  [1m[36mSQL (0.2ms)[0m  [1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [1m[35mSQL (1.8ms)[0m  select sqlite_version(*)
  [1m[36mSQL (0.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) [0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_list("schema_migrations")
  [1m[36mSQL (0.7ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mSQL (0.1ms)[0m   SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
  [1m[36mSQL (0.1ms)[0m  [1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [1m[35mSQL (0.1ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations"
Migrating to CreataDatabase (20140709140044)
  [1m[36mSQL (0.2ms)[0m  [1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [1m[35mSQL (0.4ms)[0m  CREATE TABLE "avoirs" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "price" float DEFAULT 0.0, "facture_id" integer NOT NULL, "created_at" datetime, "updated_at" datetime, "numavoir" varchar(255) DEFAULT '' NOT NULL, "designation" text DEFAULT '') 
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_list("avoirs")[0m
  [1m[35mSQL (0.1ms)[0m  CREATE INDEX "facture_id" ON "avoirs" ("facture_id")
  [1m[36mSQL (0.1ms)[0m  [1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [1m[35mSQL (0.1ms)[0m  CREATE TABLE "bonlivraisons" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "numlivraison" varchar(255) NOT NULL, "created_at" datetime, "updated_at" datetime, "devi_id" integer DEFAULT 0 NOT NULL, "adresselivraison" varchar(255) DEFAULT '') 
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_list("bonlivraisons")[0m
  [1m[35mSQL (0.1ms)[0m  CREATE INDEX "bonlivraison_devi_id" ON "bonlivraisons" ("devi_id")
  [1m[36mSQL (0.1ms)[0m  [1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [1m[35mSQL (0.1ms)[0m  CREATE TABLE "bonlivraisons_factures" ("facture_id" integer NOT NULL, "bonlivraison_id" integer NOT NULL) 
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_list("bonlivraisons_factures")[0m
  [1m[35mSQL (0.1ms)[0m  CREATE INDEX "index_bonlivraisons_factures_on_bonlivraison_id" ON "bonlivraisons_factures" ("bonlivraison_id")
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_list("bonlivraisons_factures")[0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_info('index_bonlivraisons_factures_on_bonlivraison_id')
  [1m[36mSQL (0.1ms)[0m  [1mCREATE INDEX "index_bonlivraisons_factures_on_facture_id" ON "bonlivraisons_factures" ("facture_id")[0m
  [1m[35mSQL (0.1ms)[0m   SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
  [1m[36mSQL (0.1ms)[0m  [1mCREATE TABLE "clients" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "numclient" integer NOT NULL, "nameentreprise" varchar(255) NOT NULL, "adresse" text(255) NOT NULL, "namerefcontact" varchar(255), "created_at" datetime, "updated_at" datetime, "tva_intra" varchar(255), "affacturage" boolean DEFAULT 'f') [0m
  [1m[35mSQL (0.1ms)[0m   SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
  [1m[36mSQL (0.1ms)[0m  [1mCREATE TABLE "devis" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "description" varchar(255), "numdevis" varchar(255), "client_id" integer NOT NULL, "created_at" datetime, "updated_at" datetime, "tva" boolean DEFAULT 't', "cond_payment" varchar(255) DEFAULT '40% √† la commande, 60% √† la livraison.', "etat" integer DEFAULT 1) [0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_list("devis")
  [1m[36mSQL (0.1ms)[0m  [1mCREATE INDEX "client_id" ON "devis" ("client_id")[0m
  [1m[35mSQL (0.1ms)[0m   SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
  [1m[36mSQL (0.1ms)[0m  [1mCREATE TABLE "factures" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "numfacture" varchar(255) NOT NULL, "numcommande" varchar(255), "devi_id" integer NOT NULL, "created_at" datetime, "updated_at" datetime, "choixrib" varchar(255) DEFAULT 'rib', "accompte" integer DEFAULT 100, "proforma" boolean DEFAULT 'f', "cond_reglement" varchar(255) DEFAULT 'net √† r√©ception de la facture.', "datepaiementcheck" boolean DEFAULT 'f', "datepaiement" datetime, "annulation" boolean DEFAULT 'f') [0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_list("factures")
  [1m[36mSQL (0.1ms)[0m  [1mCREATE INDEX "devi_facture_id" ON "factures" ("devi_id")[0m
  [1m[35mSQL (0.1ms)[0m   SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
  [1m[36mSQL (0.1ms)[0m  [1mCREATE TABLE "factures_pvrecettes" ("pvrecette_id" integer NOT NULL, "facture_id" integer NOT NULL) [0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_list("factures_pvrecettes")
  [1m[36mSQL (0.1ms)[0m  [1mCREATE INDEX "factures_pvrecettes_facture_id" ON "factures_pvrecettes" ("facture_id")[0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_list("factures_pvrecettes")
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_info('factures_pvrecettes_facture_id')[0m
  [1m[35mSQL (0.1ms)[0m  CREATE INDEX "factures_pvrecettes_pvrecette_id" ON "factures_pvrecettes" ("pvrecette_id")
  [1m[36mSQL (0.1ms)[0m  [1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [1m[35mSQL (0.1ms)[0m  CREATE TABLE "informationlignes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255), "number" float DEFAULT 0.0, "price" float DEFAULT 0.0, "devi_id" integer NOT NULL, "information_id" integer NOT NULL, "unite" varchar(255) DEFAULT 'pce', "position" integer) 
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_list("informationlignes")[0m
  [1m[35mSQL (0.1ms)[0m  CREATE INDEX "devi_id" ON "informationlignes" ("devi_id")
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_list("informationlignes")[0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_info('devi_id')
  [1m[36mSQL (0.1ms)[0m  [1mCREATE INDEX "information_id" ON "informationlignes" ("information_id")[0m
  [1m[35mSQL (0.1ms)[0m   SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
  [1m[36mSQL (0.1ms)[0m  [1mCREATE TABLE "informations" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar(255)) [0m
  [1m[35mSQL (0.1ms)[0m   SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
  [1m[36mSQL (0.1ms)[0m  [1mCREATE TABLE "lignedevis" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "devi_id" integer DEFAULT 0 NOT NULL, "prix" float DEFAULT 0.0, "name" varchar(255) DEFAULT '') [0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_list("lignedevis")
  [1m[36mSQL (0.1ms)[0m  [1mCREATE INDEX "altered_lignedevis_devi_id" ON "lignedevis" ("devi_id")[0m
  [1m[35mSQL (0.1ms)[0m   SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
  [1m[36mSQL (0.1ms)[0m  [1mCREATE TABLE "pvrecettes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "created_at" datetime, "updated_at" datetime, "numpvrecette" varchar(255), "devi_id" integer DEFAULT 1 NOT NULL) [0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_list("pvrecettes")
  [1m[36mSQL (0.1ms)[0m  [1mCREATE INDEX "index_devi_pvrecettes" ON "pvrecettes" ("devi_id")[0m
  [1m[35mSQL (0.1ms)[0m   SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
  [1m[36mSQL (0.1ms)[0m  [1mCREATE TABLE "titleinformationlignes" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255) NOT NULL, "informationligne_id" integer DEFAULT 0, "created_at" datetime, "updated_at" datetime, "information_id" integer DEFAULT 0 NOT NULL, "devi_id" integer DEFAULT 0 NOT NULL, "font_size" float DEFAULT 10.0 NOT NULL, "font_weight" varchar(255) DEFAULT 'normal' NOT NULL) [0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_list("titleinformationlignes")
  [1m[36mSQL (0.1ms)[0m  [1mCREATE INDEX "titleinformationlignes_devi_id" ON "titleinformationlignes" ("devi_id")[0m
  [1m[35mSQL (0.1ms)[0m  PRAGMA index_list("titleinformationlignes")
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_info('titleinformationlignes_devi_id')[0m
  [1m[35mSQL (0.1ms)[0m  CREATE INDEX "altered_titleinformationlignes_information_id" ON "titleinformationlignes" ("information_id")
  [1m[36mSQL (0.1ms)[0m  [1mPRAGMA index_list("titleinformationlignes")[0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_info('altered_titleinformationlignes_information_id')
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_info('titleinformationlignes_devi_id')[0m
  [1m[35mSQL (0.1ms)[0m  CREATE INDEX "titleinformationlignes_informationligne_id" ON "titleinformationlignes" ("informationligne_id")
  [1m[36mSQL (0.2ms)[0m  [1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [1m[35mSQL (0.2ms)[0m  CREATE TABLE "users" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "email" varchar(255) DEFAULT '' NOT NULL, "encrypted_password" varchar(128) DEFAULT '' NOT NULL, "password_salt" varchar(255) DEFAULT '' NOT NULL, "reset_password_token" varchar(255), "remember_token" varchar(255), "remember_created_at" datetime, "sign_in_count" integer DEFAULT 0, "current_sign_in_at" datetime, "last_sign_in_at" datetime, "current_sign_in_ip" varchar(255), "last_sign_in_ip" varchar(255), "created_at" datetime, "updated_at" datetime, "username" varchar(255)) 
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_list("users")[0m
  [1m[35mSQL (0.8ms)[0m  CREATE UNIQUE INDEX "index_users_on_email" ON "users" ("email")
  [1m[36mSQL (0.1ms)[0m  [1mPRAGMA index_list("users")[0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_info('index_users_on_email')
  [1m[36mSQL (0.1ms)[0m  [1mCREATE UNIQUE INDEX "index_users_on_reset_password_token" ON "users" ("reset_password_token")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ('20140709140044')
  [1m[36mSQL (0.3ms)[0m  [1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [1m[35mSQL (0.1ms)[0m  SELECT "schema_migrations"."version" FROM "schema_migrations"
  [1m[36mSQL (0.2ms)[0m  [1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [1m[35mSQL (0.1ms)[0m  PRAGMA index_list("avoirs")
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_info('facture_id')[0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_list("bonlivraisons")
  [1m[36mSQL (0.1ms)[0m  [1mPRAGMA index_info('bonlivraison_devi_id')[0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_list("bonlivraisons_factures")
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_info('index_bonlivraisons_factures_on_facture_id')[0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_info('index_bonlivraisons_factures_on_bonlivraison_id')
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_list("clients")[0m
  [1m[35mSQL (0.1ms)[0m  PRAGMA index_list("devis")
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_info('client_id')[0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_list("factures")
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_info('devi_facture_id')[0m
  [1m[35mSQL (0.1ms)[0m  PRAGMA index_list("factures_pvrecettes")
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_info('factures_pvrecettes_pvrecette_id')[0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_info('factures_pvrecettes_facture_id')
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_list("informationlignes")[0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_info('information_id')
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_info('devi_id')[0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_list("informations")
  [1m[36mSQL (0.1ms)[0m  [1mPRAGMA index_list("lignedevis")[0m
  [1m[35mSQL (0.1ms)[0m  PRAGMA index_info('altered_lignedevis_devi_id')
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_list("pvrecettes")[0m
  [1m[35mSQL (0.1ms)[0m  PRAGMA index_info('index_devi_pvrecettes')
  [1m[36mSQL (0.1ms)[0m  [1mPRAGMA index_list("titleinformationlignes")[0m
  [1m[35mSQL (0.1ms)[0m  PRAGMA index_info('titleinformationlignes_informationligne_id')
  [1m[36mSQL (0.1ms)[0m  [1mPRAGMA index_info('altered_titleinformationlignes_information_id')[0m
  [1m[35mSQL (0.0ms)[0m  PRAGMA index_info('titleinformationlignes_devi_id')
  [1m[36mSQL (0.1ms)[0m  [1mPRAGMA index_list("users")[0m
  [1m[35mSQL (0.1ms)[0m  PRAGMA index_info('index_users_on_reset_password_token')
  [1m[36mSQL (0.0ms)[0m  [1mPRAGMA index_info('index_users_on_email')[0m
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/" for 127.0.0.1 at 2014-07-10 16:12:26 +0200
Processing by ClientsController#index as HTML
Completed 401 Unauthorized in 4ms


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:12:26 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (4.4ms)
Completed 500 Internal Server Error in 1658ms

ActionView::Template::Error (undefined method `request_uri' for #<ActionDispatch::Request:0x00000102da98c0>):
    4:   <title>Comptatharsis</title>
    5:   <%= stylesheet_link_tag :all %>
    6:   <%= javascript_include_tag :defaults, "lowpro", "common" %>
    7:   <%= stylesheet_link_tag "factures/rapports/style" if request.request_uri == "/rapports" || request.request_uri == "/downloadrapports" || (!request.request_uri.scan(/^(.{1,})?\?.{1,}?$/)[0].nil? &&  (request.request_uri.scan(/^(.{1,})?\?.{1,}?$/)[0][0] == "/rapports" || request.request_uri.scan(/^(.{1,})?\?.{1,}?$/)[0][0] == "/downloadrapports")) %>
    8:   <%= stylesheet_link_tag "tablecssgeneral/style" %>
    9:   <%= stylesheet_link_tag "devis/style" if controller_name == "devis" %>
    10:   <%= csrf_meta_tag %>
  app/views/layouts/application.html.erb:7:in `_app_views_layouts_application_html_erb__3397401833364254499_2169169680'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.6ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:21:39 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (4.8ms)
Completed 500 Internal Server Error in 1595ms

ActionView::Template::Error (undefined method `request_uri' for #<ActionDispatch::Request:0x000001016eda78>):
    4:   <title>Comptatharsis</title>
    5:   <%= stylesheet_link_tag :all %>
    6:   <%= javascript_include_tag :defaults, "lowpro", "common" %>
    7:   <%= stylesheet_link_tag "factures/rapports/style" if request.request_uri == "/rapports" || request.request_uri == "/downloadrapports" || (!request.request_uri.scan(/^(.{1,})?\?.{1,}?$/)[0].nil? &&  (request.request_uri.scan(/^(.{1,})?\?.{1,}?$/)[0][0] == "/rapports" || request.request_uri.scan(/^(.{1,})?\?.{1,}?$/)[0][0] == "/downloadrapports")) %>
    8:   <%= stylesheet_link_tag "tablecssgeneral/style" %>
    9:   <%= stylesheet_link_tag "devis/style" if controller_name == "devis" %>
    10:   <%= csrf_meta_tag %>
  app/views/layouts/application.html.erb:7:in `_app_views_layouts_application_html_erb__3397401833364254499_2169169680'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.1ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 16:25:38 +0200
Processing by ClientsController#index as HTML
Completed 401 Unauthorized in 1ms


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:25:38 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (2.1ms)
Completed 200 OK in 9ms (Views: 7.7ms | ActiveRecord: 0.0ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:26:40 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (1.9ms)
Completed 500 Internal Server Error in 1570ms

ActionView::Template::Error (undefined method `request_uri' for #<ActionDispatch::Request:0x000001028ed430>):
    4:   <title>Comptatharsis</title>
    5:   <%= stylesheet_link_tag :all %>
    6:   <%= javascript_include_tag :defaults, "lowpro", "common" %>
    7:   <%= stylesheet_link_tag "factures/rapports/style" if request.request_uri == "/rapports" || request.request_uri == "/downloadrapports" || (!request.request_uri.scan(/^(.{1,})?\?.{1,}?$/)[0].nil? &&  (request.request_uri.scan(/^(.{1,})?\?.{1,}?$/)[0][0] == "/rapports" || request.request_uri.scan(/^(.{1,})?\?.{1,}?$/)[0][0] == "/downloadrapports")) %>
    8:   <%= stylesheet_link_tag "tablecssgeneral/style" %>
    9:   <%= stylesheet_link_tag "devis/style" if controller_name == "devis" %>
    10:   <%= csrf_meta_tag %>
  app/views/layouts/application.html.erb:7:in `_app_views_layouts_application_html_erb__3397401833364254499_2169069580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.4ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:29:50 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 10ms (Views: 8.2ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:29:50 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:29:50 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:29:50 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:30:01 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (1.9ms)
  Rendered devise/registrations/new.html.erb within layouts/application (10.7ms)
Completed 500 Internal Server Error in 21ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3397401833364254499_2159541960'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/log" for 127.0.0.1 at 2014-07-10 16:32:38 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (2.8ms)
Completed 200 OK in 12ms (Views: 11.1ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:32:38 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:32:38 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:32:38 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:32:58 +0200
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"y46g2n1AA8K/6UJD1RJKqY92NYcmE+6xzzJK5FnSrKo=", "user"=>{"username"=>"nicolas", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'nicolas' LIMIT 1[0m
DEPRECATION WARNING: an empty resource was given to Devise::Strategies::DatabaseAuthenticatable#validate. Please ensure the resource is not nil. (called from service at /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138)
Completed 401 Unauthorized in 10ms
Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"y46g2n1AA8K/6UJD1RJKqY92NYcmE+6xzzJK5FnSrKo=", "user"=>{"username"=>"nicolas", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  Rendered devise/sessions/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 80ms (Views: 7.3ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:32:58 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:32:58 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:32:58 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:35:50 +0200
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"y46g2n1AA8K/6UJD1RJKqY92NYcmE+6xzzJK5FnSrKo=", "user"=>{"username"=>"nicolas", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'nicolas' LIMIT 1
DEPRECATION WARNING: an empty resource was given to Devise::Strategies::DatabaseAuthenticatable#validate. Please ensure the resource is not nil. (called from service at /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138)
Completed 401 Unauthorized in 4ms
Processing by Devise::SessionsController#new as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"y46g2n1AA8K/6UJD1RJKqY92NYcmE+6xzzJK5FnSrKo=", "user"=>{"username"=>"nicolas", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  Rendered devise/sessions/new.html.erb within layouts/application (2.7ms)
Completed 200 OK in 109ms (Views: 11.5ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:35:51 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:35:51 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:35:51 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:35:54 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.9ms)
  Rendered devise/registrations/new.html.erb within layouts/application (4.6ms)
Completed 500 Internal Server Error in 14ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3397401833364254499_2159541960'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:36:28 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.5ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.8ms)
Completed 500 Internal Server Error in 23ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3397401833364254499_2159541960'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/sign_up" for 127.0.0.1 at 2014-07-10 16:36:34 +0200

ActionController::RoutingError (No route matches [GET] "/sign_up"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:36:45 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.6ms)
  Rendered devise/registrations/new.html.erb within layouts/application (4.7ms)
Completed 500 Internal Server Error in 12ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3397401833364254499_2159541960'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:38:02 +0200
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.7ms)
  Rendered devise/registrations/new.html.erb within layouts/application (5.5ms)
Completed 500 Internal Server Error in 27ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3397401833364254499_2159541960'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:38:08 +0200
Processing by Devise::RegistrationsController#edit as HTML
Completed 401 Unauthorized in 0ms


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:38:08 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 8ms (Views: 6.8ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:38:08 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:38:08 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:38:08 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:38:41 +0200
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (2.4ms)
Completed 200 OK in 19ms (Views: 7.7ms | ActiveRecord: 0.6ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:38:41 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:38:42 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:38:42 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:38:49 +0200
Processing by Devise::RegistrationsController#edit as HTML
Completed 401 Unauthorized in 0ms


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:38:49 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (2.2ms)
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:38:49 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:38:49 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:38:53 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (1.8ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:38:53 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:38:53 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/devise/registrations" for 127.0.0.1 at 2014-07-10 16:38:58 +0200

ActionController::RoutingError (No route matches [GET] "/devise/registrations"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:39:03 +0200
Processing by Devise::RegistrationsController#edit as HTML
Completed 401 Unauthorized in 0ms


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:39:03 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (3.1ms)
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:39:03 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:39:03 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:39:03 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 16:40:16 +0200
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
Processing by ClientsController#index as HTML
Completed 401 Unauthorized in 5ms


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:40:16 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (2.4ms)
Completed 200 OK in 18ms (Views: 7.2ms | ActiveRecord: 0.6ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:40:16 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:40:16 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:40:34 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (13.4ms)
Completed 200 OK in 59ms (Views: 24.5ms | ActiveRecord: 1.8ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:40:35 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:40:35 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:40:36 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (2.1ms)
Completed 200 OK in 7ms (Views: 6.6ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:40:36 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:40:36 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:40:36 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 7ms (Views: 5.9ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:40:36 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:40:36 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:40:36 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:40:36 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:40:36 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:40:36 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (1.7ms)
Completed 200 OK in 6ms (Views: 5.7ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:40:37 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:40:37 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 16:40:40 +0200
Processing by ClientsController#index as HTML
Completed 401 Unauthorized in 1ms


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:40:40 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (1.9ms)
Completed 200 OK in 7ms (Views: 6.1ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:40:40 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:40:40 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:41:13 +0200

ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 16:41:17 +0200
Processing by ClientsController#index as HTML
Completed 401 Unauthorized in 8ms


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:41:17 +0200

ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:44:05 +0200

ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.1ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:44:06 +0200

ActionController::RoutingError (No route matches [GET] "/users/sign_in"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:44:15 +0200
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (2.4ms)
Completed 200 OK in 22ms (Views: 7.8ms | ActiveRecord: 0.8ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:44:15 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:44:15 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:44:15 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:44:19 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (2.3ms)
  Rendered devise/registrations/new.html.erb within layouts/application (8.1ms)
Completed 500 Internal Server Error in 19ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3722285462479080307_2175499580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 16:44:24 +0200
Processing by ClientsController#index as HTML
  [1m[36mClient Load (1.8ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (5.2ms)
Completed 200 OK in 22ms (Views: 13.1ms | ActiveRecord: 2.2ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:44:24 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:44:24 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:44:24 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_out" for 127.0.0.1 at 2014-07-10 16:44:31 +0200
Processing by Devise::SessionsController#destroy as HTML
Redirected to http://localhost:3000/
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 16:44:31 +0200
Processing by ClientsController#index as HTML
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 8ms (Views: 7.1ms | ActiveRecord: 0.1ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:44:31 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:44:31 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:44:31 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/edit" for 127.0.0.1 at 2014-07-10 16:44:48 +0200
Processing by Devise::RegistrationsController#edit as HTML
Completed 401 Unauthorized in 0ms


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:44:48 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (2.8ms)
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:44:48 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:44:48 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.3ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:44:48 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:45:34 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.7ms)
  Rendered devise/registrations/new.html.erb within layouts/application (4.6ms)
Completed 500 Internal Server Error in 13ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3722285462479080307_2175499580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/log" for 127.0.0.1 at 2014-07-10 16:45:42 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (3.6ms)
Completed 200 OK in 15ms (Views: 12.5ms | ActiveRecord: 0.0ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:45:42 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:45:43 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:45:43 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:45:48 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.1ms)
Completed 500 Internal Server Error in 11ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3722285462479080307_2175499580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:46:23 +0200
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.5ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.8ms)
Completed 500 Internal Server Error in 22ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3722285462479080307_2175499580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:46:24 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.3ms)
Completed 500 Internal Server Error in 11ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3722285462479080307_2175499580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:46:24 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.1ms)
Completed 500 Internal Server Error in 10ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3722285462479080307_2175499580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:46:25 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.0ms)
Completed 500 Internal Server Error in 9ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3722285462479080307_2175499580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:46:30 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.5ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.7ms)
Completed 500 Internal Server Error in 13ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3722285462479080307_2175499580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:46:32 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.3ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.2ms)
Completed 500 Internal Server Error in 12ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3722285462479080307_2175499580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:46:33 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.8ms)
  Rendered devise/registrations/new.html.erb within layouts/application (4.1ms)
Completed 500 Internal Server Error in 11ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3722285462479080307_2175499580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:46:33 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.7ms)
  Rendered devise/registrations/new.html.erb within layouts/application (4.6ms)
Completed 500 Internal Server Error in 11ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3722285462479080307_2175499580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:46:33 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.9ms)
  Rendered devise/registrations/new.html.erb within layouts/application (5.1ms)
Completed 500 Internal Server Error in 12ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3722285462479080307_2175499580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:46:33 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (4.2ms)
Completed 500 Internal Server Error in 13ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__3722285462479080307_2175499580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:46:47 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (1.2ms)
  Rendered devise/registrations/new.html.erb within layouts/application (14.9ms)
Completed 500 Internal Server Error in 59ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:46:47 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.6ms)
Completed 500 Internal Server Error in 11ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:46:48 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.3ms)
Completed 500 Internal Server Error in 10ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (1.0ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:46:48 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.6ms)
  Rendered devise/registrations/new.html.erb within layouts/application (4.4ms)
Completed 500 Internal Server Error in 11ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:46:48 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (4.6ms)
Completed 500 Internal Server Error in 12ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:46:48 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.6ms)
  Rendered devise/registrations/new.html.erb within layouts/application (5.2ms)
Completed 500 Internal Server Error in 12ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/new_user" for 127.0.0.1 at 2014-07-10 16:48:17 +0200

ActionController::RoutingError (No route matches [GET] "/new_user"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:48:30 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (3.6ms)
Completed 200 OK in 22ms (Views: 9.0ms | ActiveRecord: 0.7ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:48:30 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:48:30 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:48:30 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:48:35 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.5ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.7ms)
Completed 500 Internal Server Error in 16ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:50:17 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (2.1ms)
Completed 200 OK in 17ms (Views: 6.7ms | ActiveRecord: 0.6ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:50:17 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:50:17 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:50:23 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.5ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.1ms)
Completed 500 Internal Server Error in 9ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:50:25 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.0ms)
Completed 500 Internal Server Error in 10ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:50:26 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.2ms)
Completed 500 Internal Server Error in 9ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.7ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:50:26 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.3ms)
  Rendered devise/registrations/new.html.erb within layouts/application (2.8ms)
Completed 500 Internal Server Error in 10ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:50:26 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.3ms)
Completed 500 Internal Server Error in 10ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:50:26 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.9ms)
Completed 500 Internal Server Error in 10ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.8ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:50:26 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.8ms)
Completed 500 Internal Server Error in 10ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:50:27 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.5ms)
  Rendered devise/registrations/new.html.erb within layouts/application (4.0ms)
Completed 500 Internal Server Error in 11ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:50:27 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.5ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.3ms)
Completed 500 Internal Server Error in 10ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:50:27 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.3ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.5ms)
Completed 500 Internal Server Error in 10ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:50:27 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.3ms)
  Rendered devise/registrations/new.html.erb within layouts/application (2.9ms)
Completed 500 Internal Server Error in 9ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:50:28 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.8ms)
Completed 500 Internal Server Error in 10ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb__1428320293528418066_2198440060'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:50:40 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (1.2ms)
  Rendered devise/registrations/new.html.erb within layouts/application (13.4ms)
Completed 500 Internal Server Error in 3277ms

ActionView::Template::Error (undefined local variable or method `root_path' for #<#<Class:0x000001041d6f50>:0x000001041d4f20>):
    18: 		</li>
    19: 
    20: 		<li>
    21: 		<%= link_to image_tag("img_general/client.png", :size=>"68x68"), root_path, :title=>"Retourner √† la liste des clients" %>
    22: 		</li>
    23: 
    24: 		<% if get_controller_name_link_menu(controller_name,controller.action_name) %>
  app/views/layouts/application.html.erb:21:in `_app_views_layouts_application_html_erb___487172076840354866_2171792220'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.4ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 16:51:31 +0200
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
Processing by ClientsController#index as HTML
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 15ms (Views: 9.6ms | ActiveRecord: 0.7ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:51:31 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:51:31 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:51:44 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.5ms)
  Rendered devise/registrations/new.html.erb within layouts/application (4.1ms)
Completed 500 Internal Server Error in 21ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb___487172076840354866_2171792220'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.9ms)


Started GET "/log/sign_up" for 127.0.0.1 at 2014-07-10 16:52:10 +0200

ActionController::RoutingError (No route matches [GET] "/log/sign_up"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/log/sign_up" for 127.0.0.1 at 2014-07-10 16:52:23 +0200
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)

ActionController::RoutingError (No route matches [GET] "/log/sign_up"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:52:28 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.4ms)
Completed 500 Internal Server Error in 19ms

ActionController::RoutingError (No route matches {:controller=>"devise/devis"}):
  app/helpers/application_helper.rb:33:in `get_controller_name_link_menu'
  app/views/layouts/application.html.erb:24:in `_app_views_layouts_application_html_erb___487172076840354866_2171792220'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:52:40 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (1.4ms)
  Rendered devise/registrations/new.html.erb within layouts/application (13.8ms)
Completed 500 Internal Server Error in 3275ms

ActionView::Template::Error (undefined local variable or method `root_path' for #<#<Class:0x00000103504160>:0x000001034fe378>):
    18: 		</li>
    19: 
    20: 		<li>
    21: 		<%= link_to image_tag("img_general/client.png", :size=>"68x68"), root_path, :title=>"Retourner √† la liste des clients" %>
    22: 		</li>
    23: 
    24: 		<% if get_controller_name_link_menu(controller_name,controller.action_name) %>
  app/views/layouts/application.html.erb:21:in `_app_views_layouts_application_html_erb__4438339201184321809_2173593460'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.8ms)


Started GET "/users/sign_up" for 127.0.0.1 at 2014-07-10 16:53:31 +0200
Processing by Devise::RegistrationsController#new as HTML
  Rendered devise/shared/_links.erb (0.5ms)
  Rendered devise/registrations/new.html.erb within layouts/application (3.5ms)
Completed 200 OK in 7ms (Views: 6.2ms | ActiveRecord: 0.0ms)


Started POST "/users" for 127.0.0.1 at 2014-07-10 16:53:46 +0200
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"1mlmv29KYoMzAxb1GbyVlWrKpLPdw4C2ObyC7eLX8HM=", "user"=>{"username"=>"nicolas", "email"=>"nicolas.vandenbogaerde@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Sign up"}
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT 1 FROM "users" WHERE "users"."email" = 'nicolas.vandenbogaerde@gmail.com' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT 1 FROM "users" WHERE "users"."username" = 'nicolas' LIMIT 1[0m
Binary data inserted for `string` type on column `encrypted_password`
  [1m[35mSQL (3.8ms)[0m  INSERT INTO "users" ("created_at", "current_sign_in_at", "current_sign_in_ip", "email", "encrypted_password", "last_sign_in_at", "last_sign_in_ip", "password_salt", "remember_created_at", "remember_token", "reset_password_token", "sign_in_count", "updated_at", "username") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["created_at", Thu, 10 Jul 2014 14:53:46 UTC +00:00], ["current_sign_in_at", nil], ["current_sign_in_ip", nil], ["email", "nicolas.vandenbogaerde@gmail.com"], ["encrypted_password", "$2a$10$ZdNoo1n.M9qJkdy4CQ6WY.A4BfI2s8L2rEfa4IHu.oUqPR0tsM0pS"], ["last_sign_in_at", nil], ["last_sign_in_ip", nil], ["password_salt", ""], ["remember_created_at", nil], ["remember_token", nil], ["reset_password_token", nil], ["sign_in_count", 0], ["updated_at", Thu, 10 Jul 2014 14:53:46 UTC +00:00], ["username", "nicolas"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = '2014-07-10 14:53:46.268377', "current_sign_in_at" = '2014-07-10 14:53:46.268377', "last_sign_in_ip" = '127.0.0.1', "current_sign_in_ip" = '127.0.0.1', "sign_in_count" = 1, "updated_at" = '2014-07-10 14:53:46.269094' WHERE "users"."id" = 1[0m
  [1m[35m (0.6ms)[0m  commit transaction
Redirected to http://localhost:3000/
Completed 302 Found in 101ms (ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 16:53:46 +0200

ActionController::RoutingError (No route matches [GET] "/"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 16:53:58 +0200
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Redirected to http://localhost:3000/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 9ms (ActiveRecord: 0.2ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 16:53:58 +0200

ActionController::RoutingError (No route matches [GET] "/"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 16:56:20 +0200
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 32ms (Views: 11.4ms | ActiveRecord: 1.1ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:56:21 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:56:21 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/clients/devis" for 127.0.0.1 at 2014-07-10 16:56:35 +0200
Processing by DevisController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  Rendered devis/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 23ms (Views: 9.8ms | ActiveRecord: 0.5ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:56:35 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.6ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:56:35 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 16:56:39 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 8ms (Views: 6.3ms | ActiveRecord: 0.3ms)


Started GET "/javascripts/jquery_ujs.js" for 127.0.0.1 at 2014-07-10 16:56:39 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery_ujs.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/javascripts/jquery.js" for 127.0.0.1 at 2014-07-10 16:56:39 +0200

ActionController::RoutingError (No route matches [GET] "/javascripts/jquery.js"):
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 17:03:47 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (0.9ms)
Completed 200 OK in 9ms (Views: 8.1ms | ActiveRecord: 0.3ms)


Started GET "/clients/devis" for 127.0.0.1 at 2014-07-10 17:04:18 +0200
Processing by DevisController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  Rendered devis/index.html.erb within layouts/application (0.6ms)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 0.3ms)


Started GET "/clients/devis" for 127.0.0.1 at 2014-07-10 17:06:45 +0200
Processing by DevisController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  Rendered devis/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 11ms (Views: 9.5ms | ActiveRecord: 0.2ms)


Started GET "/clients/devis" for 127.0.0.1 at 2014-07-10 17:06:57 +0200
Processing by DevisController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  Rendered devis/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 9ms (Views: 7.7ms | ActiveRecord: 0.3ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 17:06:58 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 15ms (Views: 8.2ms | ActiveRecord: 0.2ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 17:21:08 +0200
Processing by ClientsController#index as HTML
Completed 401 Unauthorized in 0ms


Started GET "/users/sign_in" for 127.0.0.1 at 2014-07-10 17:21:08 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (7.2ms)
Completed 200 OK in 19ms (Views: 17.4ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2014-07-10 17:21:15 +0200
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"1rmb6DmxDeSZgFHkn/3T4HCGiYDU/YhMX1B0mUfwcok=", "user"=>{"username"=>"nicolas", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."username" = 'nicolas' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "users" SET "current_sign_in_at" = '2014-07-10 15:21:16.076175', "sign_in_count" = 2, "updated_at" = '2014-07-10 15:21:16.076988' WHERE "users"."id" = 1
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3000/
Completed 302 Found in 80ms (ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2014-07-10 17:21:16 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (0.8ms)
Completed 200 OK in 9ms (Views: 7.6ms | ActiveRecord: 0.3ms)


Started GET "/clients/devis" for 127.0.0.1 at 2014-07-10 17:21:20 +0200
Processing by DevisController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  Rendered devis/index.html.erb within layouts/application (0.5ms)
Completed 200 OK in 11ms (Views: 9.7ms | ActiveRecord: 0.2ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/" for 127.0.0.1 at 2014-08-08 17:39:05 +0200
Processing by ClientsController#index as HTML
Completed 401 Unauthorized in 6ms


Started GET "/users/sign_in" for 127.0.0.1 at 2014-08-08 17:39:05 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (5.1ms)
Completed 200 OK in 49ms (Views: 18.9ms | ActiveRecord: 2.2ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2014-08-08 17:39:10 +0200
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"MC503h2V7/zzRmVkFNJ3rELZV3HkLzp0sY52OlN2Veg=", "user"=>{"username"=>"nicolas", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'nicolas' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = '2014-07-10 15:21:16.076175', "current_sign_in_at" = '2014-08-08 15:39:10.702827', "sign_in_count" = 3, "updated_at" = '2014-08-08 15:39:10.703625' WHERE "users"."id" = 1[0m
  [1m[35m (1.0ms)[0m  commit transaction
Redirected to http://0.0.0.0:3002/
Completed 302 Found in 96ms (ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2014-08-08 17:39:10 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.5ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (2.9ms)
Completed 200 OK in 18ms (Views: 11.0ms | ActiveRecord: 0.9ms)


Started GET "/clients/new" for 127.0.0.1 at 2014-08-08 17:39:12 +0200
Processing by ClientsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  Rendered clients/_form.html.erb (2.1ms)
  Rendered clients/new.html.erb within layouts/application (7.1ms)
Completed 200 OK in 23ms (Views: 16.2ms | ActiveRecord: 0.1ms)


Started POST "/clients" for 127.0.0.1 at 2014-08-08 17:39:29 +0200
Processing by ClientsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "client"=>{"numclient"=>"gerard", "nameentreprise"=>"gerard", "adresse"=>"", "namerefcontact"=>"gerard", "tva_intra"=>"", "affacturage"=>"0"}, "commit"=>"Valider"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Redirected to http://0.0.0.0:3002/clients/new
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/clients/new" for 127.0.0.1 at 2014-08-08 17:39:29 +0200
Processing by ClientsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  Rendered clients/_form.html.erb (1.4ms)
  Rendered clients/new.html.erb within layouts/application (2.6ms)
Completed 200 OK in 10ms (Views: 8.6ms | ActiveRecord: 0.1ms)


Started POST "/clients" for 127.0.0.1 at 2014-08-08 17:39:50 +0200
Processing by ClientsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "client"=>{"numclient"=>"gerard", "nameentreprise"=>"gerard", "adresse"=>"gerard", "namerefcontact"=>"gerard", "tva_intra"=>"12234558", "affacturage"=>"0"}, "commit"=>"Valider"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "clients" ("adresse", "affacturage", "created_at", "nameentreprise", "namerefcontact", "numclient", "tva_intra", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["adresse", "gerard"], ["affacturage", false], ["created_at", Fri, 08 Aug 2014 15:39:50 UTC +00:00], ["nameentreprise", "gerard"], ["namerefcontact", "gerard"], ["numclient", 0], ["tva_intra", "12234558"], ["updated_at", Fri, 08 Aug 2014 15:39:50 UTC +00:00]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients
Completed 302 Found in 6ms (ActiveRecord: 2.8ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:39:50 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.2ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 17:39:52 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.4ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  Rendered devis/index.html.erb within layouts/application (2.4ms)
Completed 200 OK in 26ms (Views: 10.6ms | ActiveRecord: 0.8ms)


Started GET "/clients/devis/new?client_id=1" for 127.0.0.1 at 2014-08-08 17:39:54 +0200
Processing by DevisController#new as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (1.4ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE (created_at >= '2014-01-01 00:00:00')[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "devis" ("client_id", "cond_payment", "created_at", "description", "etat", "numdevis", "tva", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["cond_payment", "40% √† la commande, 60% √† la livraison."], ["created_at", Fri, 08 Aug 2014 15:39:54 UTC +00:00], ["description", nil], ["etat", 1], ["numdevis", "D0001-2014"], ["tva", true], ["updated_at", Fri, 08 Aug 2014 15:39:54 UTC +00:00]]
  [1m[35m (0.9ms)[0m  commit transaction
Redirected to http://0.0.0.0:3002/clients/devis/1/edit
Completed 302 Found in 12ms (ActiveRecord: 2.9ms)


Started GET "/clients/devis/1/edit" for 127.0.0.1 at 2014-08-08 17:39:54 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.6ms)
  [1m[35mInformation Load (0.4ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.4ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  Rendered devis/templates/_form.html.erb (61.0ms)
  Rendered devis/edit.html.erb within layouts/application (75.9ms)
Completed 200 OK in 86ms (Views: 81.5ms | ActiveRecord: 3.2ms)


Started GET "/clients/devis/1/edit" for 127.0.0.1 at 2014-08-08 17:43:20 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.1ms)
  [1m[35mInformation Load (0.4ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  Rendered devis/templates/_form.html.erb (9.0ms)
  Rendered devis/edit.html.erb within layouts/application (13.6ms)
Completed 200 OK in 26ms (Views: 22.3ms | ActiveRecord: 1.7ms)


Started GET "/clients/devis/1/edit" for 127.0.0.1 at 2014-08-08 17:43:23 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  Rendered devis/templates/_form.html.erb (6.9ms)
  Rendered devis/edit.html.erb within layouts/application (9.8ms)
Completed 200 OK in 19ms (Views: 16.4ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/1/edit" for 127.0.0.1 at 2014-08-08 17:43:23 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  Rendered devis/templates/_form.html.erb (6.7ms)
  Rendered devis/edit.html.erb within layouts/application (9.5ms)
Completed 200 OK in 17ms (Views: 15.2ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/1/edit" for 127.0.0.1 at 2014-08-08 17:43:23 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  Rendered devis/templates/_form.html.erb (7.0ms)
  Rendered devis/edit.html.erb within layouts/application (9.6ms)
Completed 200 OK in 17ms (Views: 15.5ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/1/edit" for 127.0.0.1 at 2014-08-08 17:48:13 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  Rendered devis/templates/_form.html.erb (6.9ms)
  Rendered devis/edit.html.erb within layouts/application (13.5ms)
Completed 200 OK in 22ms (Views: 19.9ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/1/edit" for 127.0.0.1 at 2014-08-08 17:48:14 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  Rendered devis/templates/_form.html.erb (7.5ms)
  Rendered devis/edit.html.erb within layouts/application (10.3ms)
Completed 200 OK in 19ms (Views: 16.6ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis/1/edit" for 127.0.0.1 at 2014-08-08 17:48:15 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  Rendered devis/templates/_form.html.erb (7.2ms)
  Rendered devis/edit.html.erb within layouts/application (9.8ms)
Completed 200 OK in 18ms (Views: 16.3ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/1/edit" for 127.0.0.1 at 2014-08-08 17:48:15 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  Rendered devis/templates/_form.html.erb (7.8ms)
  Rendered devis/edit.html.erb within layouts/application (10.4ms)
Completed 200 OK in 20ms (Views: 17.7ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis/1/edit" for 127.0.0.1 at 2014-08-08 17:48:15 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  Rendered devis/templates/_form.html.erb (6.7ms)
  Rendered devis/edit.html.erb within layouts/application (9.3ms)
Completed 200 OK in 17ms (Views: 14.8ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/1/edit" for 127.0.0.1 at 2014-08-08 17:48:16 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  Rendered devis/templates/_form.html.erb (6.7ms)
  Rendered devis/edit.html.erb within layouts/application (9.3ms)
Completed 200 OK in 17ms (Views: 15.1ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/new?client_id=1" for 127.0.0.1 at 2014-08-08 17:48:19 +0200
Processing by DevisController#new as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE (created_at >= '2014-01-01 00:00:00')
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "devis" ("client_id", "cond_payment", "created_at", "description", "etat", "numdevis", "tva", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["client_id", 1], ["cond_payment", "40% √† la commande, 60% √† la livraison."], ["created_at", Fri, 08 Aug 2014 15:48:19 UTC +00:00], ["description", nil], ["etat", 1], ["numdevis", "D0002-2014"], ["tva", true], ["updated_at", Fri, 08 Aug 2014 15:48:19 UTC +00:00]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/2/edit
Completed 302 Found in 6ms (ActiveRecord: 2.7ms)


Started GET "/clients/devis/2/edit" for 127.0.0.1 at 2014-08-08 17:48:19 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 2 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 2[0m
  Rendered devis/templates/_form.html.erb (7.3ms)
  Rendered devis/edit.html.erb within layouts/application (10.0ms)
Completed 200 OK in 18ms (Views: 16.5ms | ActiveRecord: 0.6ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:48:25 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 10ms (Views: 8.4ms | ActiveRecord: 0.3ms)


Started GET "/clients/new" for 127.0.0.1 at 2014-08-08 17:48:27 +0200
Processing by ClientsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Rendered clients/_form.html.erb (1.5ms)
  Rendered clients/new.html.erb within layouts/application (2.8ms)
Completed 200 OK in 11ms (Views: 9.3ms | ActiveRecord: 0.2ms)


Started POST "/clients" for 127.0.0.1 at 2014-08-08 17:48:34 +0200
Processing by ClientsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "client"=>{"numclient"=>"", "nameentreprise"=>"dsqdq", "adresse"=>"sqdsqdqsdsq", "namerefcontact"=>"sqdsqdsq", "tva_intra"=>"qsdsqdsq", "affacturage"=>"0"}, "commit"=>"Valider"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Redirected to http://0.0.0.0:3002/clients/new
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/clients/new" for 127.0.0.1 at 2014-08-08 17:48:34 +0200
Processing by ClientsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Rendered clients/_form.html.erb (1.5ms)
  Rendered clients/new.html.erb within layouts/application (2.6ms)
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.1ms)


Started GET "/clients/new" for 127.0.0.1 at 2014-08-08 17:48:38 +0200
Processing by ClientsController#new as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  Rendered clients/_form.html.erb (1.5ms)
  Rendered clients/new.html.erb within layouts/application (2.6ms)
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.1ms)


Started GET "/" for 127.0.0.1 at 2014-08-08 17:48:40 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 10ms (Views: 8.4ms | ActiveRecord: 0.3ms)


Started GET "/clients/new" for 127.0.0.1 at 2014-08-08 17:48:42 +0200
Processing by ClientsController#new as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  Rendered clients/_form.html.erb (1.4ms)
  Rendered clients/new.html.erb within layouts/application (2.6ms)
Completed 200 OK in 10ms (Views: 8.8ms | ActiveRecord: 0.1ms)


Started GET "/" for 127.0.0.1 at 2014-08-08 17:48:43 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 9ms (Views: 7.7ms | ActiveRecord: 0.3ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 17:51:09 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 2
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 2[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (18.0ms)
Completed 200 OK in 28ms (Views: 25.6ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis/1/edit" for 127.0.0.1 at 2014-08-08 17:51:20 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  Rendered devis/templates/_form.html.erb (7.5ms)
  Rendered devis/edit.html.erb within layouts/application (10.0ms)
Completed 200 OK in 18ms (Views: 16.2ms | ActiveRecord: 0.6ms)


Started DELETE "/clients/devis/1" for 127.0.0.1 at 2014-08-08 17:51:33 +0200
Processing by DevisController#destroy as HTML
  Parameters: {"authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 11ms

NoMethodError (undefined method `id' for #<Class:0x00000106a83d90>):
  app/models/facture.rb:6:in `<class:Facture>'
  app/models/facture.rb:1:in `<top (required)>'
  app/controllers/devis_controller.rb:143:in `destroy'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.3ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 17:51:37 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 2[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 2
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/index.html.erb within layouts/application (10.2ms)
Completed 200 OK in 19ms (Views: 16.7ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 17:51:40 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 2[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 2
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/index.html.erb within layouts/application (10.2ms)
Completed 200 OK in 20ms (Views: 17.1ms | ActiveRecord: 0.7ms)


Started DELETE "/clients/devis/2" for 127.0.0.1 at 2014-08-08 17:51:45 +0200
Processing by DevisController#destroy as HTML
  Parameters: {"authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "id"=>"2"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 2[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 500 Internal Server Error in 9ms

NoMethodError (undefined method `id' for #<Class:0x00000106328b68>):
  app/models/facture.rb:6:in `<class:Facture>'
  app/models/facture.rb:1:in `<top (required)>'
  app/controllers/devis_controller.rb:143:in `destroy'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (5.9ms)


Started DELETE "/clients/devis/2" for 127.0.0.1 at 2014-08-08 17:51:59 +0200
Processing by DevisController#destroy as HTML
  Parameters: {"authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "id"=>"2"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "2"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 2
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `id' for #<Class:0x00000101a33700>):
  app/models/facture.rb:6:in `<class:Facture>'
  app/models/facture.rb:1:in `<top (required)>'
  app/controllers/devis_controller.rb:143:in `destroy'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (9.8ms)


Started GET "/" for 127.0.0.1 at 2014-08-08 17:52:03 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 10ms (Views: 8.9ms | ActiveRecord: 0.3ms)


Started GET "/clients/1/edit" for 127.0.0.1 at 2014-08-08 17:52:06 +0200
Processing by ClientsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT 1[0m  [["id", "1"]]
  Rendered clients/_form.html.erb (1.8ms)
  Rendered clients/edit.html.erb within layouts/application (3.7ms)
Completed 200 OK in 15ms (Views: 12.7ms | ActiveRecord: 0.2ms)


Started PUT "/clients/1" for 127.0.0.1 at 2014-08-08 17:54:10 +0200
Processing by ClientsController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "client"=>{"numclient"=>"0", "nameentreprise"=>"gerard", "adresse"=>"gerard", "namerefcontact"=>"gerard", "tva_intra"=>"12234558", "affacturage"=>"0"}, "commit"=>"Mettre √† jour", "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients
Completed 302 Found in 3ms (ActiveRecord: 0.3ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:54:10 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 10ms (Views: 8.4ms | ActiveRecord: 0.3ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:54:14 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 9ms (Views: 8.3ms | ActiveRecord: 0.2ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:54:15 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 9ms (Views: 8.1ms | ActiveRecord: 0.2ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:54:15 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 10ms (Views: 8.8ms | ActiveRecord: 0.3ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:54:36 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (10.7ms)
Completed 200 OK in 72ms (Views: 24.6ms | ActiveRecord: 2.3ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:54:37 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (2.0ms)
Completed 200 OK in 10ms (Views: 8.0ms | ActiveRecord: 0.3ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:54:38 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 10ms (Views: 8.4ms | ActiveRecord: 0.3ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:54:38 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.2ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:54:38 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 10ms (Views: 8.8ms | ActiveRecord: 0.3ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:54:38 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (1.8ms)
Completed 200 OK in 9ms (Views: 8.1ms | ActiveRecord: 0.2ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:54:39 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (4.4ms)
Completed 200 OK in 13ms (Views: 11.3ms | ActiveRecord: 0.4ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:54:39 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 10ms (Views: 8.4ms | ActiveRecord: 0.3ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 17:54:39 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (2.4ms)
Completed 200 OK in 10ms (Views: 9.1ms | ActiveRecord: 0.3ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 17:54:40 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 1[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 2
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 2[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (34.8ms)
Completed 200 OK in 60ms (Views: 40.6ms | ActiveRecord: 1.4ms)


Started GET "/clients/devis/new?client_id=1" for 127.0.0.1 at 2014-08-08 17:54:41 +0200
Processing by DevisController#new as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE (created_at >= '2014-01-01 00:00:00')
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (5.6ms)[0m  INSERT INTO "devis" ("client_id", "cond_payment", "created_at", "description", "etat", "numdevis", "tva", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["client_id", 1], ["cond_payment", "40% √† la commande, 60% √† la livraison."], ["created_at", Fri, 08 Aug 2014 15:54:41 UTC +00:00], ["description", nil], ["etat", 1], ["numdevis", "D0003-2014"], ["tva", true], ["updated_at", Fri, 08 Aug 2014 15:54:41 UTC +00:00]]
  [1m[36m (13.5ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/3/edit
Completed 302 Found in 24ms (ActiveRecord: 19.4ms)


Started GET "/clients/devis/3/edit" for 127.0.0.1 at 2014-08-08 17:54:41 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"3"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "3"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.4ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 3 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 3[0m
  Rendered devis/templates/_form.html.erb (49.4ms)
  Rendered devis/edit.html.erb within layouts/application (55.6ms)
Completed 200 OK in 66ms (Views: 63.6ms | ActiveRecord: 1.0ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 17:57:15 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  Rendered devis/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 0.3ms)


Started GET "/clients/devis/new?client_id=1" for 127.0.0.1 at 2014-08-08 17:57:17 +0200
Processing by DevisController#new as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE (created_at >= '2014-01-01 00:00:00')[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "devis" ("client_id", "cond_payment", "created_at", "description", "etat", "numdevis", "tva", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["cond_payment", "40% √† la commande, 60% √† la livraison."], ["created_at", Fri, 08 Aug 2014 15:57:17 UTC +00:00], ["description", nil], ["etat", 1], ["numdevis", "D0001-2014"], ["tva", true], ["updated_at", Fri, 08 Aug 2014 15:57:17 UTC +00:00]]
  [1m[35m (2.7ms)[0m  commit transaction
Redirected to http://0.0.0.0:3002/clients/devis/4/edit
Completed 302 Found in 7ms (ActiveRecord: 3.3ms)


Started GET "/clients/devis/4/edit" for 127.0.0.1 at 2014-08-08 17:57:17 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "4"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 4 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 4
  Rendered devis/templates/_form.html.erb (8.1ms)
  Rendered devis/edit.html.erb within layouts/application (10.8ms)
Completed 200 OK in 19ms (Views: 17.2ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis/4/edit" for 127.0.0.1 at 2014-08-08 17:58:33 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "4"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.2ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 4 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 4
  Rendered devis/templates/_form.html.erb (7.3ms)
  Rendered devis/edit.html.erb within layouts/application (10.0ms)
Completed 200 OK in 18ms (Views: 16.2ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis/4/edit" for 127.0.0.1 at 2014-08-08 17:58:35 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "4"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 4 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 4
  Rendered devis/templates/_form.html.erb (7.2ms)
  Rendered devis/edit.html.erb within layouts/application (9.8ms)
Completed 200 OK in 18ms (Views: 15.7ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis/4/edit" for 127.0.0.1 at 2014-08-08 17:58:35 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "4"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 4 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 4
  Rendered devis/templates/_form.html.erb (6.5ms)
  Rendered devis/edit.html.erb within layouts/application (8.9ms)
Completed 200 OK in 17ms (Views: 14.7ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/4/edit" for 127.0.0.1 at 2014-08-08 17:58:35 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "4"]]
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 4 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 4
  Rendered devis/templates/_form.html.erb (9.3ms)
  Rendered devis/edit.html.erb within layouts/application (12.1ms)
Completed 200 OK in 26ms (Views: 18.3ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis/new?client_id=1" for 127.0.0.1 at 2014-08-08 17:58:39 +0200
Processing by DevisController#new as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE (created_at >= '2014-01-01 00:00:00')
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "devis" ("client_id", "cond_payment", "created_at", "description", "etat", "numdevis", "tva", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["client_id", 1], ["cond_payment", "40% √† la commande, 60% √† la livraison."], ["created_at", Fri, 08 Aug 2014 15:58:39 UTC +00:00], ["description", nil], ["etat", 1], ["numdevis", "D0002-2014"], ["tva", true], ["updated_at", Fri, 08 Aug 2014 15:58:39 UTC +00:00]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/5/edit
Completed 302 Found in 6ms (ActiveRecord: 2.5ms)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 17:58:39 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "5"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5[0m
  Rendered devis/templates/_form.html.erb (7.1ms)
  Rendered devis/edit.html.erb within layouts/application (9.7ms)
Completed 200 OK in 18ms (Views: 16.2ms | ActiveRecord: 0.7ms)


Started PUT "/clients/devis/5" for 127.0.0.1 at 2014-08-08 17:58:46 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0002-2014", "etat"=>"1", "description"=>"", "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "addlignetotal_ligne_total_devisfactures_deviid_5"=>"Ajouter une ligne au total", "id"=>"5"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "5"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mUPDATE "devis" SET "description" = '', "created_at" = '2014-08-08 00:00:00.000000', "updated_at" = '2014-08-08 15:58:46.197001' WHERE "devis"."id" = 5[0m
  [1m[35m (0.6ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "lignedevis" ("devi_id", "name", "prix") VALUES (?, ?, ?)  [["devi_id", 5], ["name", ""], ["prix", 0.0]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/5/edit
Completed 302 Found in 11ms (ActiveRecord: 2.3ms)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 17:58:46 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "5"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.1ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5
  Rendered devis/templates/_form.html.erb (9.5ms)
  Rendered devis/edit.html.erb within layouts/application (12.2ms)
Completed 200 OK in 21ms (Views: 19.2ms | ActiveRecord: 0.7ms)


Started PUT "/clients/devis/5" for 127.0.0.1 at 2014-08-08 17:58:51 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0002-2014", "etat"=>"1", "description"=>"", "lignedevis_attributes"=>{"0"=>{"name"=>"", "prix"=>"0.0", "id"=>"1"}}, "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "suplignedevi_lignedevi_deviid_5_lignedevi_1"=>"X", "id"=>"5"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "5"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5 AND "lignedevis"."id" IN (1)
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "lignedevis" WHERE "lignedevis"."id" = ?  [["id", 1]]
  [1m[36m (2.6ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/5/edit
Completed 302 Found in 9ms (ActiveRecord: 3.6ms)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 17:58:51 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "5"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5[0m
  Rendered devis/templates/_form.html.erb (7.8ms)
  Rendered devis/edit.html.erb within layouts/application (10.6ms)
Completed 200 OK in 19ms (Views: 16.6ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 18:00:11 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "5"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5
  Rendered devis/templates/_form.html.erb (6.8ms)
  Rendered devis/edit.html.erb within layouts/application (9.3ms)
Completed 200 OK in 17ms (Views: 15.1ms | ActiveRecord: 0.8ms)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 18:00:12 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "5"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5[0m
  Rendered devis/templates/_form.html.erb (11.5ms)
  Rendered devis/edit.html.erb within layouts/application (14.0ms)
Completed 200 OK in 22ms (Views: 20.1ms | ActiveRecord: 0.8ms)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 18:02:12 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "5"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5[0m
  Rendered devis/templates/_form.html.erb (7.9ms)
  Rendered devis/edit.html.erb within layouts/application (10.6ms)
Completed 200 OK in 19ms (Views: 17.0ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 18:02:12 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "5"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5[0m
  Rendered devis/templates/_form.html.erb (7.2ms)
  Rendered devis/edit.html.erb within layouts/application (10.2ms)
Completed 200 OK in 19ms (Views: 16.6ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 18:02:13 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "5"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5[0m
  Rendered devis/templates/_form.html.erb (6.8ms)
  Rendered devis/edit.html.erb within layouts/application (9.3ms)
Completed 200 OK in 17ms (Views: 15.6ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 18:02:13 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "5"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5[0m
  Rendered devis/templates/_form.html.erb (7.2ms)
  Rendered devis/edit.html.erb within layouts/application (10.2ms)
Completed 200 OK in 19ms (Views: 17.1ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 18:02:14 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "5"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5[0m
  Rendered devis/templates/_form.html.erb (6.7ms)
  Rendered devis/edit.html.erb within layouts/application (9.5ms)
Completed 200 OK in 18ms (Views: 15.4ms | ActiveRecord: 0.7ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 18:06:46 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "5"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.4ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5
  Rendered devis/templates/_form.html.erb (38.1ms)
  Rendered devis/edit.html.erb within layouts/application (59.1ms)
Completed 200 OK in 123ms (Views: 70.1ms | ActiveRecord: 3.0ms)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 18:06:48 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "5"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5
  Rendered devis/templates/_form.html.erb (7.6ms)
  Rendered devis/edit.html.erb within layouts/application (10.5ms)
Completed 200 OK in 19ms (Views: 16.6ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 18:06:48 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "5"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5
  Rendered devis/templates/_form.html.erb (6.8ms)
  Rendered devis/edit.html.erb within layouts/application (9.3ms)
Completed 200 OK in 18ms (Views: 15.6ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/5/edit" for 127.0.0.1 at 2014-08-08 18:06:48 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"5"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "5"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5
  Rendered devis/templates/_form.html.erb (8.8ms)
  Rendered devis/edit.html.erb within layouts/application (11.7ms)
Completed 200 OK in 20ms (Views: 18.0ms | ActiveRecord: 0.8ms)


Started GET "/clients/devis/new?client_id=1" for 127.0.0.1 at 2014-08-08 18:07:29 +0200
Processing by DevisController#new as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE (created_at >= '2014-01-01 00:00:00')
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (6.6ms)[0m  INSERT INTO "devis" ("client_id", "cond_payment", "created_at", "description", "etat", "numdevis", "tva", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["client_id", 1], ["cond_payment", "40% √† la commande, 60% √† la livraison."], ["created_at", Fri, 08 Aug 2014 16:07:29 UTC +00:00], ["description", nil], ["etat", 1], ["numdevis", "D0003-2014"], ["tva", true], ["updated_at", Fri, 08 Aug 2014 16:07:29 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/6/edit
Completed 302 Found in 13ms (ActiveRecord: 7.6ms)


Started GET "/clients/devis/6/edit" for 127.0.0.1 at 2014-08-08 18:07:29 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"6"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "6"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 6 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 6[0m
  Rendered devis/templates/_form.html.erb (7.1ms)
  Rendered devis/edit.html.erb within layouts/application (9.6ms)
Completed 200 OK in 18ms (Views: 15.6ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/factures" for 127.0.0.1 at 2014-08-08 18:11:16 +0200
Processing by FacturesController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `id' for #<Class:0x00000105a69860>):
  app/models/facture.rb:6:in `<class:Facture>'
  app/models/facture.rb:1:in `<top (required)>'
  app/controllers/factures_controller.rb:21:in `index'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.3ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (5.1ms)


Started PUT "/clients/devis/6" for 127.0.0.1 at 2014-08-08 18:11:25 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0003-2014", "etat"=>"1", "description"=>"sdqdsqd", "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "commit"=>"Mettre √† jour", "id"=>"6"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "6"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.3ms)[0m  UPDATE "devis" SET "description" = 'sdqdsqd', "created_at" = '2014-08-08 00:00:00.000000', "updated_at" = '2014-08-08 16:11:25.587181' WHERE "devis"."id" = 6
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis?client_id=1
Completed 302 Found in 6ms (ActiveRecord: 1.1ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 18:11:25 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 4
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 4[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 6
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 6[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (17.0ms)
Completed 200 OK in 27ms (Views: 23.9ms | ActiveRecord: 0.9ms)


Started GET "/clients/devis/6/edit" for 127.0.0.1 at 2014-08-08 18:11:32 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"6"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "6"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 6 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 6
  Rendered devis/templates/_form.html.erb (7.1ms)
  Rendered devis/edit.html.erb within layouts/application (9.7ms)
Completed 200 OK in 17ms (Views: 15.4ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 18:11:36 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 4[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 4
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 6[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 6
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/index.html.erb within layouts/application (13.3ms)
Completed 200 OK in 22ms (Views: 19.1ms | ActiveRecord: 0.8ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 18:11:37 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 4
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 4[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 6
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 6[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (14.6ms)
Completed 200 OK in 24ms (Views: 20.9ms | ActiveRecord: 0.8ms)


Started GET "/clients/devis/new?client_id=1" for 127.0.0.1 at 2014-08-08 18:12:20 +0200
Processing by DevisController#new as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE (created_at >= '2014-01-01 00:00:00')
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "devis" ("client_id", "cond_payment", "created_at", "description", "etat", "numdevis", "tva", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["client_id", 1], ["cond_payment", "40% √† la commande, 60% √† la livraison."], ["created_at", Fri, 08 Aug 2014 16:12:20 UTC +00:00], ["description", nil], ["etat", 1], ["numdevis", "D0004-2014"], ["tva", true], ["updated_at", Fri, 08 Aug 2014 16:12:20 UTC +00:00]]
  [1m[36m (2.5ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/7/edit
Completed 302 Found in 7ms (ActiveRecord: 3.1ms)


Started GET "/clients/devis/7/edit" for 127.0.0.1 at 2014-08-08 18:12:20 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"7"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "7"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 7 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 7[0m
  Rendered devis/templates/_form.html.erb (6.8ms)
  Rendered devis/edit.html.erb within layouts/application (9.4ms)
Completed 200 OK in 18ms (Views: 15.7ms | ActiveRecord: 0.6ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started DELETE "/clients/devis/4" for 127.0.0.1 at 2014-08-08 18:14:23 +0200
Processing by DevisController#destroy as HTML
  Parameters: {"authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "id"=>"4"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "4"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 4[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Completed 500 Internal Server Error in 8ms

NoMethodError (undefined method `id' for #<Class:0x00000101701410>):
  app/models/facture.rb:6:in `<class:Facture>'
  app/models/facture.rb:1:in `<top (required)>'
  app/controllers/devis_controller.rb:143:in `destroy'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (5.8ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 18:14:27 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 4[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 4
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 6[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 6
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 7
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 7[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (16.4ms)
Completed 200 OK in 26ms (Views: 22.6ms | ActiveRecord: 0.9ms)


Started GET "/clients/devis" for 127.0.0.1 at 2014-08-08 18:14:36 +0200
Processing by DevisController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 4[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 4
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 6[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 6
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 7
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 7[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (20.0ms)
Completed 200 OK in 29ms (Views: 26.4ms | ActiveRecord: 0.9ms)


Started GET "/" for 127.0.0.1 at 2014-08-08 18:14:38 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (2.7ms)
Completed 200 OK in 11ms (Views: 9.4ms | ActiveRecord: 0.3ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 18:14:40 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 4[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 4
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 5
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 5[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 6[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 6
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 7
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 7[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (19.9ms)
Completed 200 OK in 30ms (Views: 27.3ms | ActiveRecord: 1.0ms)


Started GET "/clients/devis/new?client_id=1" for 127.0.0.1 at 2014-08-08 18:14:43 +0200
Processing by DevisController#new as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE (created_at >= '2014-01-01 00:00:00')
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "devis" ("client_id", "cond_payment", "created_at", "description", "etat", "numdevis", "tva", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["client_id", 1], ["cond_payment", "40% √† la commande, 60% √† la livraison."], ["created_at", Fri, 08 Aug 2014 16:14:43 UTC +00:00], ["description", nil], ["etat", 1], ["numdevis", "D0005-2014"], ["tva", true], ["updated_at", Fri, 08 Aug 2014 16:14:43 UTC +00:00]]
  [1m[36m (2.5ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/8/edit
Completed 302 Found in 8ms (ActiveRecord: 3.1ms)


Started GET "/clients/devis/8/edit" for 127.0.0.1 at 2014-08-08 18:14:43 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"8"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 8[0m
  Rendered devis/templates/_form.html.erb (7.1ms)
  Rendered devis/edit.html.erb within layouts/application (9.8ms)
Completed 200 OK in 18ms (Views: 15.8ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/8/edit" for 127.0.0.1 at 2014-08-08 18:15:46 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"8"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 8[0m
  Rendered devis/templates/_form.html.erb (11.6ms)
  Rendered devis/edit.html.erb within layouts/application (15.3ms)
Completed 200 OK in 24ms (Views: 21.5ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis/8/edit" for 127.0.0.1 at 2014-08-08 18:16:03 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"8"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 8[0m
  Rendered devis/templates/_form.html.erb (9.1ms)
  Rendered devis/edit.html.erb within layouts/application (12.0ms)
Completed 200 OK in 19ms (Views: 17.5ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/8/edit" for 127.0.0.1 at 2014-08-08 18:16:17 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"8"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 8[0m
  Rendered devis/templates/_form.html.erb (13.9ms)
  Rendered devis/edit.html.erb within layouts/application (16.6ms)
Completed 200 OK in 25ms (Views: 22.8ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/8/edit" for 127.0.0.1 at 2014-08-08 18:16:19 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"8"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 8[0m
  Rendered devis/templates/_form.html.erb (6.8ms)
  Rendered devis/edit.html.erb within layouts/application (9.7ms)
Completed 200 OK in 18ms (Views: 15.9ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/8/edit" for 127.0.0.1 at 2014-08-08 18:16:37 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"8"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 8[0m
  Rendered devis/templates/_form.html.erb (9.8ms)
  Rendered devis/edit.html.erb within layouts/application (12.7ms)
Completed 200 OK in 21ms (Views: 19.2ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/8/edit" for 127.0.0.1 at 2014-08-08 18:16:48 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"8"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 8[0m
  Rendered devis/templates/_form.html.erb (10.3ms)
  Rendered devis/edit.html.erb within layouts/application (13.3ms)
Completed 200 OK in 22ms (Views: 19.8ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis/8/edit" for 127.0.0.1 at 2014-08-08 18:17:58 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"8"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 8[0m
  Rendered devis/templates/_form.html.erb (9.0ms)
  Rendered devis/edit.html.erb within layouts/application (11.9ms)
Completed 200 OK in 20ms (Views: 17.7ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/8/edit" for 127.0.0.1 at 2014-08-08 18:21:16 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"8"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 8[0m
  Rendered devis/templates/_form.html.erb (11.2ms)
  Rendered devis/edit.html.erb within layouts/application (14.3ms)
Completed 200 OK in 23ms (Views: 20.7ms | ActiveRecord: 0.7ms)


Started PUT "/clients/devis/8" for 127.0.0.1 at 2014-08-08 18:22:03 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0005-2014", "etat"=>"1", "description"=>"", "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "add_ligne_informationid_1_deviid_8"=>"Ajouter une ligne", "id"=>"8"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "devis" SET "description" = '', "created_at" = '2014-08-08 00:00:00.000000', "updated_at" = '2014-08-08 16:22:03.631244' WHERE "devis"."id" = 8[0m
  [1m[35m (2.2ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "informationlignes" ("devi_id", "information_id", "name", "number", "position", "price", "unite") VALUES (?, ?, ?, ?, ?, ?, ?)  [["devi_id", 8], ["information_id", 1], ["name", nil], ["number", 0.0], ["position", nil], ["price", 0.0], ["unite", "pce"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/8/edit
Completed 302 Found in 14ms (ActiveRecord: 3.7ms)


Started GET "/clients/devis/8/edit" for 127.0.0.1 at 2014-08-08 18:22:03 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"8"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 5
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 8[0m
  Rendered devis/templates/_form.html.erb (11.2ms)
  Rendered devis/edit.html.erb within layouts/application (13.9ms)
Completed 200 OK in 23ms (Views: 20.5ms | ActiveRecord: 0.8ms)


Started PUT "/clients/devis/8" for 127.0.0.1 at 2014-08-08 18:22:10 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0005-2014", "etat"=>"1", "description"=>"", "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "addtitre_titleinformationligne_informationid_1_deviid_8"=>"Ajouter un titre", "id"=>"8"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "titleinformationlignes" ("created_at", "devi_id", "font_size", "font_weight", "information_id", "informationligne_id", "title", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["created_at", Fri, 08 Aug 2014 16:22:10 UTC +00:00], ["devi_id", 8], ["font_size", 10.0], ["font_weight", "normal"], ["information_id", 1], ["informationligne_id", 0], ["title", "title by default"], ["updated_at", Fri, 08 Aug 2014 16:22:10 UTC +00:00]]
  [1m[35m (2.8ms)[0m  commit transaction
Redirected to http://0.0.0.0:3002/clients/devis/8/edit
Completed 302 Found in 14ms (ActiveRecord: 3.6ms)


Started GET "/clients/devis/8/edit" for 127.0.0.1 at 2014-08-08 18:22:10 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "8"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 5[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" WHERE "informations"."id" = 1 LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" WHERE "informations"."id" = 1 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" WHERE "informations"."id" = 1 LIMIT 1[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1 AND "titleinformationlignes"."devi_id" = 8 AND "titleinformationlignes"."informationligne_id" = 0
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 8[0m
  Rendered devis/templates/_form.html.erb (16.8ms)
  Rendered devis/edit.html.erb within layouts/application (19.6ms)
Completed 200 OK in 28ms (Views: 25.8ms | ActiveRecord: 1.2ms)


Started PUT "/clients/devis/8" for 127.0.0.1 at 2014-08-08 18:22:14 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0005-2014", "etat"=>"1", "description"=>"", "informationlignes_attributes"=>{"1"=>{"information_attributes"=>{"titleinformationlignes_attributes"=>{"0"=>{"title"=>"title by default", "font_size"=>"10.0", "font_weight"=>"normal", "id"=>"2"}}, "id"=>"1"}, "id"=>"5"}}, "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "suptitre_titleinformationligne_id_2_deviid_8"=>"Supprimer ce titre", "id"=>"8"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."id" IN (5)[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" WHERE "informations"."id" = 1 LIMIT 1
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1 AND "titleinformationlignes"."id" IN (2)[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."id" = ? LIMIT 1[0m  [["id", "2"]]
  [1m[35mSQL (2.9ms)[0m  DELETE FROM "titleinformationlignes" WHERE "titleinformationlignes"."id" = 2
Redirected to http://0.0.0.0:3002/clients/devis/8/edit
Completed 302 Found in 11ms (ActiveRecord: 3.7ms)


Started GET "/clients/devis/8/edit" for 127.0.0.1 at 2014-08-08 18:22:14 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"8"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "8"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 5[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 8
  Rendered devis/templates/_form.html.erb (9.3ms)
  Rendered devis/edit.html.erb within layouts/application (12.5ms)
Completed 200 OK in 21ms (Views: 18.6ms | ActiveRecord: 0.8ms)


Started PUT "/clients/devis/8" for 127.0.0.1 at 2014-08-08 18:22:17 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0005-2014", "etat"=>"1", "description"=>"", "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "add_ligne_informationid_1_deviid_8"=>"Ajouter une ligne", "id"=>"8"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "8"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "informationlignes" ("devi_id", "information_id", "name", "number", "position", "price", "unite") VALUES (?, ?, ?, ?, ?, ?, ?)  [["devi_id", 8], ["information_id", 1], ["name", nil], ["number", 0.0], ["position", nil], ["price", 0.0], ["unite", "pce"]]
  [1m[36m (2.8ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/8/edit
Completed 302 Found in 8ms (ActiveRecord: 3.4ms)


Started GET "/clients/devis/8/edit" for 127.0.0.1 at 2014-08-08 18:22:17 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"8"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "8"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 8[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 5
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 6[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 8
  Rendered devis/templates/_form.html.erb (12.9ms)
  Rendered devis/edit.html.erb within layouts/application (15.4ms)
Completed 200 OK in 24ms (Views: 21.5ms | ActiveRecord: 1.0ms)


Started GET "/clients/devis/new?client_id=1" for 127.0.0.1 at 2014-08-08 18:22:27 +0200
Processing by DevisController#new as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.2ms)[0m  SELECT "devis".* FROM "devis" WHERE (created_at >= '2014-01-01 00:00:00')
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "devis" ("client_id", "cond_payment", "created_at", "description", "etat", "numdevis", "tva", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["client_id", 1], ["cond_payment", "40% √† la commande, 60% √† la livraison."], ["created_at", Fri, 08 Aug 2014 16:22:27 UTC +00:00], ["description", nil], ["etat", 1], ["numdevis", "D0006-2014"], ["tva", true], ["updated_at", Fri, 08 Aug 2014 16:22:27 UTC +00:00]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/9/edit
Completed 302 Found in 8ms (ActiveRecord: 3.0ms)


Started GET "/clients/devis/9/edit" for 127.0.0.1 at 2014-08-08 18:22:27 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "9"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 9 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 9[0m
  Rendered devis/templates/_form.html.erb (7.2ms)
  Rendered devis/edit.html.erb within layouts/application (10.0ms)
Completed 200 OK in 19ms (Views: 16.4ms | ActiveRecord: 0.7ms)


Started PUT "/clients/devis/9" for 127.0.0.1 at 2014-08-08 18:22:29 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0006-2014", "etat"=>"1", "description"=>"", "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "add_ligne_informationid_1_deviid_9"=>"Ajouter une ligne", "id"=>"9"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "9"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mUPDATE "devis" SET "description" = '', "created_at" = '2014-08-08 00:00:00.000000', "updated_at" = '2014-08-08 16:22:29.414396' WHERE "devis"."id" = 9[0m
  [1m[35m (2.4ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "informationlignes" ("devi_id", "information_id", "name", "number", "position", "price", "unite") VALUES (?, ?, ?, ?, ?, ?, ?)  [["devi_id", 9], ["information_id", 1], ["name", nil], ["number", 0.0], ["position", nil], ["price", 0.0], ["unite", "pce"]]
  [1m[36m (0.8ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/9/edit
Completed 302 Found in 9ms (ActiveRecord: 4.0ms)


Started GET "/clients/devis/9/edit" for 127.0.0.1 at 2014-08-08 18:22:29 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"9"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "9"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 9 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 9[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 7
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 9[0m
  Rendered devis/templates/_form.html.erb (9.4ms)
  Rendered devis/edit.html.erb within layouts/application (12.1ms)
Completed 200 OK in 20ms (Views: 18.3ms | ActiveRecord: 0.8ms)


Started GET "/clients/devis/new?client_id=1" for 127.0.0.1 at 2014-08-08 18:22:46 +0200
Processing by DevisController#new as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE (created_at >= '2014-01-01 00:00:00')[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "devis" ("client_id", "cond_payment", "created_at", "description", "etat", "numdevis", "tva", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)[0m  [["client_id", 1], ["cond_payment", "40% √† la commande, 60% √† la livraison."], ["created_at", Fri, 08 Aug 2014 16:22:46 UTC +00:00], ["description", nil], ["etat", 1], ["numdevis", "D0007-2014"], ["tva", true], ["updated_at", Fri, 08 Aug 2014 16:22:46 UTC +00:00]]
  [1m[35m (0.8ms)[0m  commit transaction
Redirected to http://0.0.0.0:3002/clients/devis/10/edit
Completed 302 Found in 6ms (ActiveRecord: 1.4ms)


Started GET "/clients/devis/10/edit" for 127.0.0.1 at 2014-08-08 18:22:46 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "10"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 10 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 10
  Rendered devis/templates/_form.html.erb (7.1ms)
  Rendered devis/edit.html.erb within layouts/application (9.7ms)
Completed 200 OK in 18ms (Views: 16.4ms | ActiveRecord: 0.6ms)


Started PUT "/clients/devis/10" for 127.0.0.1 at 2014-08-08 18:22:48 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0007-2014", "etat"=>"1", "description"=>"", "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "add_ligne_informationid_1_deviid_10"=>"Ajouter une ligne", "id"=>"10"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "10"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  UPDATE "devis" SET "description" = '', "created_at" = '2014-08-08 00:00:00.000000', "updated_at" = '2014-08-08 16:22:48.940399' WHERE "devis"."id" = 10
  [1m[36m (2.3ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "informationlignes" ("devi_id", "information_id", "name", "number", "position", "price", "unite") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["devi_id", 10], ["information_id", 1], ["name", nil], ["number", 0.0], ["position", nil], ["price", 0.0], ["unite", "pce"]]
  [1m[35m (0.8ms)[0m  commit transaction
Redirected to http://0.0.0.0:3002/clients/devis/10/edit
Completed 302 Found in 9ms (ActiveRecord: 3.8ms)


Started GET "/clients/devis/10/edit" for 127.0.0.1 at 2014-08-08 18:22:48 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"10"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "10"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 10 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 10
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 8[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 10
  Rendered devis/templates/_form.html.erb (9.4ms)
  Rendered devis/edit.html.erb within layouts/application (11.8ms)
Completed 200 OK in 20ms (Views: 17.8ms | ActiveRecord: 0.8ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 18:24:11 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  Rendered devis/index.html.erb within layouts/application (0.7ms)
Completed 200 OK in 8ms (Views: 6.9ms | ActiveRecord: 0.2ms)


Started GET "/clients/devis/new?client_id=1" for 127.0.0.1 at 2014-08-08 18:24:13 +0200
Processing by DevisController#new as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE (created_at >= '2014-01-01 00:00:00')
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "devis" ("client_id", "cond_payment", "created_at", "description", "etat", "numdevis", "tva", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["client_id", 1], ["cond_payment", "40% √† la commande, 60% √† la livraison."], ["created_at", Fri, 08 Aug 2014 16:24:13 UTC +00:00], ["description", nil], ["etat", 1], ["numdevis", "D0001-2014"], ["tva", true], ["updated_at", Fri, 08 Aug 2014 16:24:13 UTC +00:00]]
  [1m[36m (2.3ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/11/edit
Completed 302 Found in 7ms (ActiveRecord: 3.1ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 18:24:13 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/templates/_form.html.erb (7.1ms)
  Rendered devis/edit.html.erb within layouts/application (10.0ms)
Completed 200 OK in 19ms (Views: 16.3ms | ActiveRecord: 0.7ms)


Started PUT "/clients/devis/11" for 127.0.0.1 at 2014-08-08 18:24:22 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0001-2014", "etat"=>"1", "description"=>"test", "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "commit"=>"Mettre √† jour", "id"=>"11"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mUPDATE "devis" SET "description" = 'test', "created_at" = '2014-08-08 00:00:00.000000', "updated_at" = '2014-08-08 16:24:22.010138' WHERE "devis"."id" = 11[0m
  [1m[35m (1.9ms)[0m  commit transaction
Redirected to http://0.0.0.0:3002/clients/devis?client_id=1
Completed 302 Found in 7ms (ActiveRecord: 2.4ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 18:24:22 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/index.html.erb within layouts/application (5.9ms)
Completed 200 OK in 14ms (Views: 12.4ms | ActiveRecord: 0.5ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 18:24:24 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/templates/_form.html.erb (7.4ms)
  Rendered devis/edit.html.erb within layouts/application (10.0ms)
Completed 200 OK in 19ms (Views: 16.3ms | ActiveRecord: 0.6ms)


Started PUT "/clients/devis/11" for 127.0.0.1 at 2014-08-08 18:24:26 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0001-2014", "etat"=>"1", "description"=>"test", "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "add_ligne_informationid_1_deviid_11"=>"Ajouter une ligne", "id"=>"11"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "informationlignes" ("devi_id", "information_id", "name", "number", "position", "price", "unite") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["devi_id", 11], ["information_id", 1], ["name", nil], ["number", 0.0], ["position", nil], ["price", 0.0], ["unite", "pce"]]
  [1m[35m (2.0ms)[0m  commit transaction
Redirected to http://0.0.0.0:3002/clients/devis/11/edit
Completed 302 Found in 8ms (ActiveRecord: 2.6ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 18:24:27 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (10.2ms)
  Rendered devis/edit.html.erb within layouts/application (12.8ms)
Completed 200 OK in 21ms (Views: 19.1ms | ActiveRecord: 0.8ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 18:24:30 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (9.4ms)
  Rendered devis/edit.html.erb within layouts/application (12.3ms)
Completed 200 OK in 21ms (Views: 18.7ms | ActiveRecord: 0.9ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 18:32:40 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/templates/_form.html.erb (11.2ms)
  Rendered devis/edit.html.erb within layouts/application (13.8ms)
Completed 200 OK in 22ms (Views: 19.8ms | ActiveRecord: 0.9ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 18:32:43 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (11.0ms)
  Rendered devis/edit.html.erb within layouts/application (14.2ms)
Completed 200 OK in 23ms (Views: 20.3ms | ActiveRecord: 1.0ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 18:32:44 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/templates/_form.html.erb (11.3ms)
  Rendered devis/edit.html.erb within layouts/application (14.3ms)
Completed 200 OK in 23ms (Views: 20.7ms | ActiveRecord: 0.9ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 18:36:19 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (14.7ms)
  Rendered devis/edit.html.erb within layouts/application (17.6ms)
Completed 200 OK in 27ms (Views: 24.1ms | ActiveRecord: 0.9ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 18:36:22 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/templates/_form.html.erb (10.8ms)
  Rendered devis/edit.html.erb within layouts/application (13.6ms)
Completed 200 OK in 22ms (Views: 19.3ms | ActiveRecord: 0.9ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 18:36:36 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (14.3ms)
  Rendered devis/edit.html.erb within layouts/application (17.3ms)
Completed 200 OK in 26ms (Views: 23.1ms | ActiveRecord: 1.0ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 18:36:57 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/templates/_form.html.erb (14.7ms)
  Rendered devis/edit.html.erb within layouts/application (17.6ms)
Completed 200 OK in 27ms (Views: 24.1ms | ActiveRecord: 1.0ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 18:37:47 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (14.9ms)
  Rendered devis/edit.html.erb within layouts/application (17.9ms)
Completed 200 OK in 27ms (Views: 23.7ms | ActiveRecord: 1.1ms)


Started PUT "/clients/devis/11" for 127.0.0.1 at 2014-08-08 19:03:59 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0001-2014", "etat"=>"1", "description"=>"test", "informationlignes_attributes"=>{"0"=>{"name"=>"Int√©gration de la maquette html", "number"=>"1", "unite"=>"pce", "price"=>"200", "id"=>"9"}, "1"=>{"name"=>"Int√©gration du calendrier html", "number"=>"1", "unite"=>"pce", "price"=>"0.0", "id"=>"10"}}, "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "add_ligne_informationid_1_deviid_11"=>"Ajouter une ligne", "id"=>"11"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."id" IN (9, 10)
  [1m[36m (0.2ms)[0m  [1mUPDATE "informationlignes" SET "name" = 'Int√©gration de la maquette html', "number" = 1.0, "price" = 200.0 WHERE "informationlignes"."id" = 9[0m
  [1m[35m (1.2ms)[0m  UPDATE "informationlignes" SET "name" = 'Int√©gration du calendrier html', "number" = 1.0 WHERE "informationlignes"."id" = 10
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "informationlignes" ("devi_id", "information_id", "name", "number", "position", "price", "unite") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["devi_id", 11], ["information_id", 1], ["name", nil], ["number", 0.0], ["position", nil], ["price", 0.0], ["unite", "pce"]]
  [1m[35m (0.7ms)[0m  commit transaction
Redirected to http://0.0.0.0:3002/clients/devis/11/edit
Completed 302 Found in 13ms (ActiveRecord: 4.8ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 19:03:59 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (16.9ms)
  Rendered devis/edit.html.erb within layouts/application (20.2ms)
Completed 200 OK in 29ms (Views: 26.4ms | ActiveRecord: 1.0ms)


Started PUT "/clients/devis/11" for 127.0.0.1 at 2014-08-08 19:04:51 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0001-2014", "etat"=>"1", "description"=>"test", "informationlignes_attributes"=>{"0"=>{"name"=>"Int√©gration de la maquette html", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"9"}, "1"=>{"name"=>"Developpement de la partie r√©servation", "number"=>"1", "unite"=>"pce", "price"=>"700", "id"=>"11"}, "2"=>{"name"=>"Int√©gration du calendrier html", "number"=>"1.0", "unite"=>"pce", "price"=>"0.0", "id"=>"10"}}, "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "add_ligne_informationid_1_deviid_11"=>"Ajouter une ligne", "id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."id" IN (9, 11, 10)
  [1m[36m (0.2ms)[0m  [1mUPDATE "informationlignes" SET "name" = 'Developpement de la partie r√©servation', "number" = 1.0, "price" = 700.0 WHERE "informationlignes"."id" = 11[0m
  [1m[35m (2.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "informationlignes" ("devi_id", "information_id", "name", "number", "position", "price", "unite") VALUES (?, ?, ?, ?, ?, ?, ?)  [["devi_id", 11], ["information_id", 1], ["name", nil], ["number", 0.0], ["position", nil], ["price", 0.0], ["unite", "pce"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/11/edit
Completed 302 Found in 12ms (ActiveRecord: 4.3ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 19:04:51 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (14.4ms)
  Rendered devis/edit.html.erb within layouts/application (17.0ms)
Completed 200 OK in 25ms (Views: 22.8ms | ActiveRecord: 1.1ms)


Started PUT "/clients/devis/11" for 127.0.0.1 at 2014-08-08 19:05:19 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0001-2014", "etat"=>"1", "description"=>"test", "informationlignes_attributes"=>{"0"=>{"name"=>"Int√©gration de la maquette html", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"9"}, "1"=>{"name"=>"Developpement de la partie r√©servation", "number"=>"1.0", "unite"=>"pce", "price"=>"700.0", "id"=>"11"}, "2"=>{"name"=>"Livre d'or", "number"=>"1", "unite"=>"pce", "price"=>"700", "id"=>"12"}, "3"=>{"name"=>"Int√©gration du calendrier html", "number"=>"1.0", "unite"=>"pce", "price"=>"0.0", "id"=>"10"}}, "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "add_ligne_informationid_1_deviid_11"=>"Ajouter une ligne", "id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."id" IN (9, 11, 12, 10)
  [1m[36m (0.2ms)[0m  [1mUPDATE "informationlignes" SET "name" = 'Livre d''or', "number" = 1.0, "price" = 700.0 WHERE "informationlignes"."id" = 12[0m
  [1m[35m (1.9ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "informationlignes" ("devi_id", "information_id", "name", "number", "position", "price", "unite") VALUES (?, ?, ?, ?, ?, ?, ?)  [["devi_id", 11], ["information_id", 1], ["name", nil], ["number", 0.0], ["position", nil], ["price", 0.0], ["unite", "pce"]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis/11/edit
Completed 302 Found in 11ms (ActiveRecord: 3.4ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 19:05:19 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/templates/_form.html.erb (15.8ms)
  Rendered devis/edit.html.erb within layouts/application (18.6ms)
Completed 200 OK in 29ms (Views: 26.2ms | ActiveRecord: 1.0ms)


Started POST "/clients/devis/sort" for 127.0.0.1 at 2014-08-08 19:05:27 +0200
Processing by DevisController#sort as JS
  Parameters: {"informationlignes_informations_1"=>["9", "10", "11", "12", "13"], "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk="}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Completed 500 Internal Server Error in 1ms

NoMethodError (undefined method `each_with_index' for "sort":String):
  app/controllers/devis_controller.rb:133:in `sort'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.3ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (5.8ms)


Started PUT "/clients/devis/11" for 127.0.0.1 at 2014-08-08 19:06:09 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0001-2014", "etat"=>"1", "description"=>"test", "informationlignes_attributes"=>{"0"=>{"name"=>"Int√©gration de la maquette html", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"9"}, "4"=>{"name"=>"Int√©gration du calendrier html", "number"=>"1.0", "unite"=>"pce", "price"=>"0.0", "id"=>"10"}, "1"=>{"name"=>"Developpement de la partie r√©servation", "number"=>"1.0", "unite"=>"pce", "price"=>"700.0", "id"=>"11"}, "2"=>{"name"=>"Livre d'or", "number"=>"1.0", "unite"=>"pce", "price"=>"700.0", "id"=>"12"}, "3"=>{"name"=>"Syst√®me de gestion du contenu (backoffice)", "number"=>"1", "unite"=>"pce", "price"=>"800", "id"=>"13"}}, "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "commit"=>"Mettre √† jour", "id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."id" IN (9, 10, 11, 12, 13)
  [1m[36m (0.2ms)[0m  [1mUPDATE "informationlignes" SET "name" = 'Syst√®me de gestion du contenu (backoffice)', "number" = 1.0, "price" = 800.0 WHERE "informationlignes"."id" = 13[0m
  [1m[35m (2.3ms)[0m  commit transaction
Redirected to http://0.0.0.0:3002/clients/devis?client_id=1
Completed 302 Found in 10ms (ActiveRecord: 2.9ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 19:06:09 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/index.html.erb within layouts/application (6.2ms)
Completed 200 OK in 15ms (Views: 13.1ms | ActiveRecord: 0.5ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 19:10:24 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/templates/_form.html.erb (21.3ms)
  Rendered devis/edit.html.erb within layouts/application (24.2ms)
Completed 200 OK in 33ms (Views: 30.1ms | ActiveRecord: 1.2ms)


Started PUT "/clients/devis/11" for 127.0.0.1 at 2014-08-08 19:19:25 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0001-2014", "etat"=>"1", "description"=>"test", "informationlignes_attributes"=>{"0"=>{"name"=>"Int√©gration de la maquette html", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"9"}, "1"=>{"name"=>"Developpement de la partie r√©servation", "number"=>"1.0", "unite"=>"pce", "price"=>"700.0", "id"=>"11"}, "2"=>{"name"=>"Livre d'or", "number"=>"1.0", "unite"=>"pce", "price"=>"700.0", "id"=>"12"}, "3"=>{"name"=>"Syst√®me de gestion du contenu (backoffice)", "number"=>"1.0", "unite"=>"pce", "price"=>"400", "id"=>"13"}, "4"=>{"name"=>"Int√©gration du calendrier html", "number"=>"1.0", "unite"=>"pce", "price"=>"0.0", "id"=>"10"}}, "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "commit"=>"Mettre √† jour", "id"=>"11"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."id" IN (9, 11, 12, 13, 10)[0m
  [1m[35m (0.2ms)[0m  UPDATE "informationlignes" SET "price" = 400.0 WHERE "informationlignes"."id" = 13
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis?client_id=1
Completed 302 Found in 10ms (ActiveRecord: 2.7ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 19:19:25 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (6.7ms)
Completed 200 OK in 16ms (Views: 14.0ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 19:19:27 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (15.6ms)
  Rendered devis/edit.html.erb within layouts/application (19.3ms)
Completed 200 OK in 29ms (Views: 26.8ms | ActiveRecord: 1.1ms)


Started PUT "/clients/devis/11" for 127.0.0.1 at 2014-08-08 19:21:46 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0001-2014", "etat"=>"1", "description"=>"test", "informationlignes_attributes"=>{"0"=>{"name"=>"Int√©gration de la maquette html", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"9"}, "1"=>{"name"=>"Developpement de la partie r√©servation", "number"=>"1.0", "unite"=>"pce", "price"=>"700.0", "id"=>"11"}, "2"=>{"name"=>"Livre d'or", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"12"}, "3"=>{"name"=>"Syst√®me de gestion du contenu (backoffice)", "number"=>"1.0", "unite"=>"pce", "price"=>"400.0", "id"=>"13"}, "4"=>{"name"=>"Int√©gration du calendrier html", "number"=>"1.0", "unite"=>"pce", "price"=>"40", "id"=>"10"}}, "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "commit"=>"Mettre √† jour", "id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."id" IN (9, 11, 12, 13, 10)
  [1m[36m (0.2ms)[0m  [1mUPDATE "informationlignes" SET "price" = 200.0 WHERE "informationlignes"."id" = 12[0m
  [1m[35m (0.2ms)[0m  UPDATE "informationlignes" SET "price" = 40.0 WHERE "informationlignes"."id" = 10
  [1m[36m (2.4ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis?client_id=1
Completed 302 Found in 11ms (ActiveRecord: 3.3ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 19:21:46 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (6.3ms)
Completed 200 OK in 15ms (Views: 12.8ms | ActiveRecord: 0.5ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 19:21:50 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (16.7ms)
  Rendered devis/edit.html.erb within layouts/application (19.3ms)
Completed 200 OK in 28ms (Views: 25.0ms | ActiveRecord: 1.2ms)


Started PUT "/clients/devis/11" for 127.0.0.1 at 2014-08-08 19:22:52 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0001-2014", "etat"=>"1", "description"=>"test", "informationlignes_attributes"=>{"0"=>{"name"=>"Int√©gration de la maquette html", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"9"}, "1"=>{"name"=>"Developpement de la partie r√©servation", "number"=>"1.0", "unite"=>"pce", "price"=>"700.0", "id"=>"11"}, "2"=>{"name"=>"Livre d'or", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"12"}, "3"=>{"name"=>"Syst√®me de gestion du contenu (backoffice)", "number"=>"1.0", "unite"=>"pce", "price"=>"400.0", "id"=>"13"}, "4"=>{"name"=>"Int√©gration du calendrier html", "number"=>"1.0", "unite"=>"pce", "price"=>"40.0", "id"=>"10"}}, "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "commit"=>"Mettre √† jour", "id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."id" IN (9, 11, 12, 13, 10)
  [1m[36m (0.0ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients/devis?client_id=1
Completed 302 Found in 6ms (ActiveRecord: 0.4ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 19:22:52 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (6.1ms)
Completed 200 OK in 15ms (Views: 12.4ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 19:22:57 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (15.8ms)
  Rendered devis/edit.html.erb within layouts/application (18.6ms)
Completed 200 OK in 27ms (Views: 24.2ms | ActiveRecord: 1.1ms)


Started PUT "/clients/devis/11" for 127.0.0.1 at 2014-08-08 19:23:02 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0001-2014", "etat"=>"2", "description"=>"test", "informationlignes_attributes"=>{"0"=>{"name"=>"Int√©gration de la maquette html", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"9"}, "1"=>{"name"=>"Developpement de la partie r√©servation", "number"=>"1.0", "unite"=>"pce", "price"=>"700.0", "id"=>"11"}, "2"=>{"name"=>"Livre d'or", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"12"}, "3"=>{"name"=>"Syst√®me de gestion du contenu (backoffice)", "number"=>"1.0", "unite"=>"pce", "price"=>"400.0", "id"=>"13"}, "4"=>{"name"=>"Int√©gration du calendrier html", "number"=>"1.0", "unite"=>"pce", "price"=>"40.0", "id"=>"10"}}, "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "commit"=>"Mettre √† jour", "id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."id" IN (9, 11, 12, 13, 10)
  [1m[36m (0.2ms)[0m  [1mUPDATE "devis" SET "etat" = 2, "updated_at" = '2014-08-08 17:23:02.227111' WHERE "devis"."id" = 11[0m
  [1m[35m (2.7ms)[0m  commit transaction
Redirected to http://0.0.0.0:3002/clients/devis?client_id=1
Completed 302 Found in 10ms (ActiveRecord: 3.3ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 19:23:02 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/index.html.erb within layouts/application (6.1ms)
Completed 200 OK in 16ms (Views: 13.4ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-08 19:23:07 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  Rendered devis/show.pdf.prawn (6.3ms)
Completed 500 Internal Server Error in 14ms

ActionView::Template::Error (cannot load such file -- prawn/layout):
    1: require 'prawn'
    2: require 'prawn/layout'
    3: require 'prawn/core'
    4: #pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
    5: #pdf.image pigs, :scale => 0.2
  app/views/devis/show.pdf.prawn:2:in `_app_views_devis_show_pdf_prawn___1020984278421726434_2194708840'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.8ms)


Started GET "/clients/devis/factures" for 127.0.0.1 at 2014-08-08 19:23:11 +0200
Processing by FacturesController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Completed 500 Internal Server Error in 8ms

NoMethodError (undefined method `id' for #<Class:0x00000102b61518>):
  app/models/facture.rb:6:in `<class:Facture>'
  app/models/facture.rb:1:in `<top (required)>'
  app/controllers/factures_controller.rb:21:in `index'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/factures/new?devi_id=11" for 127.0.0.1 at 2014-08-08 19:23:17 +0200
Processing by FacturesController#new as HTML
  Parameters: {"devi_id"=>"11"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", 11]]
Completed 500 Internal Server Error in 7ms

NoMethodError (undefined method `id' for #<Class:0x0000010152aee8>):
  app/models/facture.rb:6:in `<class:Facture>'
  app/models/facture.rb:1:in `<top (required)>'
  app/controllers/factures_controller.rb:83:in `new'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (6.1ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 19:23:22 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (20.0ms)
  Rendered devis/edit.html.erb within layouts/application (23.5ms)
Completed 200 OK in 37ms (Views: 30.0ms | ActiveRecord: 1.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-08 19:23:35 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  Rendered devis/show.pdf.prawn (1.7ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (cannot load such file -- prawn/layout):
    1: require 'prawn'
    2: require 'prawn/layout'
    3: require 'prawn/core'
    4: #pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
    5: #pdf.image pigs, :scale => 0.2
  app/views/devis/show.pdf.prawn:2:in `_app_views_devis_show_pdf_prawn___1020984278421726434_2194708840'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/" for 127.0.0.1 at 2014-08-08 19:23:51 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (2.2ms)
Completed 200 OK in 12ms (Views: 10.4ms | ActiveRecord: 0.3ms)


Started GET "/clients/1/edit" for 127.0.0.1 at 2014-08-08 19:23:53 +0200
Processing by ClientsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT 1  [["id", "1"]]
  Rendered clients/_form.html.erb (2.5ms)
  Rendered clients/edit.html.erb within layouts/application (5.8ms)
Completed 200 OK in 17ms (Views: 14.9ms | ActiveRecord: 0.3ms)


Started PUT "/clients/1" for 127.0.0.1 at 2014-08-08 19:24:41 +0200
Processing by ClientsController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"9HkmDlFAfmJElL+B+VPgubg7fZXt/WpWRTVxxobc9zk=", "client"=>{"numclient"=>"1", "nameentreprise"=>"gerard", "adresse"=>"Gerard-cayla@wanadoo.fr", "namerefcontact"=>"gerard", "tva_intra"=>"12234558", "affacturage"=>"0"}, "commit"=>"Mettre √† jour", "id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.2ms)[0m  UPDATE "clients" SET "numclient" = 1, "adresse" = 'Gerard-cayla@wanadoo.fr', "updated_at" = '2014-08-08 17:24:41.407394' WHERE "clients"."id" = 1
  [1m[36m (2.7ms)[0m  [1mcommit transaction[0m
Redirected to http://0.0.0.0:3002/clients
Completed 302 Found in 7ms (ActiveRecord: 3.2ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-08 19:24:41 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 9ms (Views: 8.1ms | ActiveRecord: 0.3ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-08 19:24:44 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (6.4ms)
Completed 200 OK in 15ms (Views: 12.7ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-08 19:24:46 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  Rendered devis/show.pdf.prawn (1.6ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (cannot load such file -- prawn/layout):
    1: require 'prawn'
    2: require 'prawn/layout'
    3: require 'prawn/core'
    4: #pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
    5: #pdf.image pigs, :scale => 0.2
  app/views/devis/show.pdf.prawn:2:in `_app_views_devis_show_pdf_prawn___1020984278421726434_2194708840'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-08 19:24:59 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  Rendered devis/show.pdf.prawn (1.6ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (cannot load such file -- prawn/layout):
    1: require 'prawn'
    2: require 'prawn/layout'
    3: require 'prawn/core'
    4: #pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
    5: #pdf.image pigs, :scale => 0.2
  app/views/devis/show.pdf.prawn:2:in `_app_views_devis_show_pdf_prawn___1020984278421726434_2194708840'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 19:25:06 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (16.2ms)
  Rendered devis/edit.html.erb within layouts/application (19.1ms)
Completed 200 OK in 28ms (Views: 25.2ms | ActiveRecord: 1.2ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-08 19:26:01 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (15.7ms)
  Rendered devis/edit.html.erb within layouts/application (18.4ms)
Completed 200 OK in 27ms (Views: 24.1ms | ActiveRecord: 1.2ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-09 08:55:12 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.2ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/index.html.erb within layouts/application (9.1ms)
Completed 200 OK in 21ms (Views: 17.1ms | ActiveRecord: 0.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 08:55:16 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  Rendered devis/show.pdf.prawn (11.1ms)
Completed 500 Internal Server Error in 15ms

ActionView::Template::Error (cannot load such file -- prawn/layout):
    1: require 'prawn'
    2: require 'prawn/layout'
    3: require 'prawn/core'
    4: #pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
    5: #pdf.image pigs, :scale => 0.2
  app/views/devis/show.pdf.prawn:2:in `_app_views_devis_show_pdf_prawn___1020984278421726434_2194708840'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.4ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.4ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:01:16 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (118.6ms)
Completed 500 Internal Server Error in 187ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__4095047976455412612_2162869660'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__4095047976455412612_2162869660'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__4095047976455412612_2162869660'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:01:38 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  Rendered devis/show.pdf.prawn (3.1ms)
Completed 500 Internal Server Error in 7ms

ActionView::Template::Error (cannot load such file -- prawn/layout):
    1: require 'prawn'
    2: require 'prawn/layout'
    3: require 'prawn/core'
    4: #pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
    5: #pdf.image pigs, :scale => 0.2
  app/views/devis/show.pdf.prawn:2:in `_app_views_devis_show_pdf_prawn__4095047976455412612_2196631260'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:11:16 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (106.2ms)
Completed 500 Internal Server Error in 168ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn___3799055937781637_2158476100'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn___3799055937781637_2158476100'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3799055937781637_2158476100'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.5ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:27:48 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (117.5ms)
Completed 500 Internal Server Error in 181ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__4077275009421646276_2161878480'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__4077275009421646276_2161878480'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__4077275009421646276_2161878480'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.3ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:27:49 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (12.1ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__4077275009421646276_2161878480'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__4077275009421646276_2161878480'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__4077275009421646276_2161878480'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:27:50 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (11.0ms)
Completed 500 Internal Server Error in 15ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__4077275009421646276_2161878480'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__4077275009421646276_2161878480'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__4077275009421646276_2161878480'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:27:50 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (11.7ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__4077275009421646276_2161878480'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__4077275009421646276_2161878480'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__4077275009421646276_2161878480'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:51 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (111.5ms)
Completed 500 Internal Server Error in 170ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:52 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (11.6ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:53 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (11.7ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:53 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (12.0ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:53 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (10.8ms)
Completed 500 Internal Server Error in 15ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:53 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (11.9ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:54 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (30.1ms)
Completed 500 Internal Server Error in 34ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.0ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:54 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (12.8ms)
Completed 500 Internal Server Error in 17ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:54 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (11.9ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:55 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (11.8ms)
Completed 500 Internal Server Error in 15ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:55 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (12.0ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.0ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:55 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (11.7ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:55 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (11.7ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:29:56 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (11.8ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (uninitialized constant Prawn::Table):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn__1711543931329475910_2170261080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:33:02 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (105.2ms)
Completed 500 Internal Server Error in 160ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `new'
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn___3393977029679317417_2192870800'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2192870800'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2192870800'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:36:49 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2225488680 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:61: syntax error, unexpected keyword_ensure, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:63: syntax error, unexpected keyword_end, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2225488680(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (0.8ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:61: syntax error, unexpected keyword_ensure, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:63: syntax error, unexpected keyword_end, expecting '}'):
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:37:31 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2224670960 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:62: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:64: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2224670960(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
}	

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (0.8ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:62: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:64: syntax error, unexpected end-of-input, expecting '}'):
    59: }	
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:37:43 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2223856180 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:60: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:63: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:65: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2223856180(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
}
}	

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (0.8ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:60: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:63: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:65: syntax error, unexpected end-of-input, expecting '}'):
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
    59: }
    60: }	
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:37:50 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2223053800 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:60: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:64: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:66: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2223053800(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
}
}	
}

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (0.8ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:60: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:64: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:66: syntax error, unexpected end-of-input, expecting '}'):
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
    59: }
    60: }	
    61: }
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.3ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:38:07 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2192904480 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:60: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:63: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:65: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2192904480(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
}
}	

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (0.8ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:60: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:63: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:65: syntax error, unexpected end-of-input, expecting '}'):
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
    59: }
    60: }	
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:38:21 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2191503720 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:58: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:61: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:63: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2191503720(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
}
}	

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (0.8ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:58: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:61: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:63: syntax error, unexpected end-of-input, expecting '}'):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: }
    58: }	
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:38:41 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2190113580 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:60: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:64: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:66: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2190113580(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
}
}
end	

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (0.9ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:60: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:64: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:66: syntax error, unexpected end-of-input, expecting '}'):
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
    59: }
    60: }
    61: end	
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:39:18 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  Rendered devis/show.pdf.prawn (3.0ms)
Completed 500 Internal Server Error in 7ms

ActionView::Template::Error (cannot load such file -- prawn/layout):
    1: #require 'prawn'
    2: require 'prawn/layout'
    3: #require 'prawn/core'
    4: #pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
    5: #pdf.image pigs, :scale => 0.2
  app/views/devis/show.pdf.prawn:2:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2171125220'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:39:26 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (12.9ms)
Completed 500 Internal Server Error in 17ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `new'
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn___3393977029679317417_2226586400'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2226586400'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2226586400'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:43:16 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  Rendered devis/show.pdf.prawn (1.1ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    1: Prawn::Table::Cell.new(:width=>0,:text=>"nicolas", :font_size=>10)
  app/views/devis/show.pdf.prawn:1:in `new'
  app/views/devis/show.pdf.prawn:1:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2225111440'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:43:28 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  Rendered devis/show.pdf.prawn (1.0ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    1: Prawn::Table::Cell.new(:text=>"nicolas", :font_size=>10)
  app/views/devis/show.pdf.prawn:1:in `new'
  app/views/devis/show.pdf.prawn:1:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2224314760'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 09:46:51 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered devis/show.pdf.prawn (13.0ms)
Completed 500 Internal Server Error in 17ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `new'
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn___3393977029679317417_2223479440'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223479440'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223479440'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/" for 127.0.0.1 at 2014-08-09 10:06:26 +0200
Processing by ClientsController#index as HTML
Completed 401 Unauthorized in 1ms


Started GET "/users/sign_in" for 127.0.0.1 at 2014-08-09 10:06:26 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (3.4ms)
Completed 200 OK in 13ms (Views: 12.1ms | ActiveRecord: 0.0ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2014-08-09 10:06:32 +0200
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"xjkNAcGIQxadHArESWoRr4lSaobx5IYWoePWod6ozIw=", "user"=>{"username"=>"nicolas", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'nicolas' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = '2014-08-08 15:39:10.702827', "current_sign_in_at" = '2014-08-09 08:06:32.471739', "sign_in_count" = 4, "updated_at" = '2014-08-09 08:06:32.472567' WHERE "users"."id" = 1[0m
  [1m[35m (1.0ms)[0m  commit transaction
Redirected to http://localhost:3002/
Completed 302 Found in 78ms (ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2014-08-09 10:06:32 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (3.5ms)
Completed 200 OK in 12ms (Views: 10.8ms | ActiveRecord: 0.3ms)


Started GET "/clients/devis" for 127.0.0.1 at 2014-08-09 10:06:34 +0200
Processing by DevisController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/index.html.erb within layouts/application (14.0ms)
Completed 200 OK in 23ms (Views: 20.4ms | ActiveRecord: 0.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 10:06:36 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  Rendered devis/show.pdf.prawn (13.8ms)
Completed 500 Internal Server Error in 18ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `new'
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn___3393977029679317417_2224791220'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2224791220'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2224791220'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 10:07:47 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  Rendered devis/show.pdf.prawn (11.9ms)
Completed 500 Internal Server Error in 16ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    55: 		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    56: 			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
    57: 			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
    58: 			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new("test", :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:width=>0,:text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 		
    60: 		     unless informationligne.titleinformationlignes.empty?	
    61: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/devis/show.pdf.prawn:58:in `new'
  app/views/devis/show.pdf.prawn:58:in `block (2 levels) in _app_views_devis_show_pdf_prawn___3393977029679317417_2223325340'
  app/views/devis/show.pdf.prawn:55:in `each'
  app/views/devis/show.pdf.prawn:55:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223325340'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223325340'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 10:10:32 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (22.6ms)
Completed 500 Internal Server Error in 27ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    71:     :width => 0,
    72:     :text => "Produit",
    73:     :font_style => :bold,
    74:     :font_size => 10), Prawn::Table::Cell.new(
    75:     :width => 0,
    76:     :text => "Nb",
    77:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:74:in `new'
  app/views/devis/show.pdf.prawn:74:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2192578580'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2192578580'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 10:13:27 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (7132.2ms)
Completed 500 Internal Server Error in 7137ms

ActionView::Template::Error (undefined method `border_style=' for #<Prawn::Table:0x000001029055a8>):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		pdf.table items, :border_style => :grid, 
    99: 			:headers => headers,
    100: 			:column_widths => {0 => 270},
    101: 			:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2172421600'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2172421600'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 10:17:50 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (7048.4ms)
Completed 500 Internal Server Error in 7052ms

ActionView::Template::Error (undefined method `headers=' for #<Prawn::Table:0x00000105216730>):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		pdf.table items,
    99: 			:headers => headers,
    100: 			:column_widths => {0 => 270},
    101: 			:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2170428620'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2170428620'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 10:18:15 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (6955.5ms)
Completed 500 Internal Server Error in 6959ms

ActionView::Template::Error (undefined method `align=' for #<Prawn::Table:0x000001051d45d8>):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		pdf.table items,
    99: 			:column_widths => {0 => 270},
    100: 			:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
    101: 			:width => 535
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2171766260'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2171766260'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 10:22:49 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2170379960 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:101: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:174: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:176: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2170379960(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s

		@totalsumgeneral = 0
	
	}
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	pdf.table(items, :border_style => :grid,
		:headers => headers_bis,
		:column_widths => {0 => 430},
		:align => {0 => :left, 1 => :right},
		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]


pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.1ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:101: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:174: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:176: syntax error, unexpected end-of-input, expecting '}'):
    98: 
    99: 		@totalsumgeneral = 0
    100: 	
    101: 	}
    102: 	
    103: 	pdf.text "\n\nTotal", :style => :bold, :size => 10
    104: 	items = Array.new
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.3ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 10:23:00 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (6993.8ms)
Completed 500 Internal Server Error in 6998ms

ActionView::Template::Error (undefined method `border_style=' for #<Prawn::Table:0x000001055ba198>):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		pdf.table items, :border_style => :grid, 
    99: 			:headers => headers,
    100: 			:column_widths => {0 => 270},
    101: 			:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2190697080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2190697080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:06:27 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.2ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.2ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (7282.7ms)
Completed 500 Internal Server Error in 7300ms

ActionView::Template::Error (undefined method `border_style=' for #<Prawn::Table:0x000001090a8110>):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		pdf.table items, :border_style => :grid, 
    99: 			:headers => headers,
    100: 			:column_widths => {0 => 270},
    101: 			:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2193199340'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2193199340'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:08:24 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2171817360 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:101: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:169: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:171: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2171817360(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s

		@totalsumgeneral = 0
	
	}
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]


#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]


pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.1ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:101: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:169: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:171: syntax error, unexpected end-of-input, expecting '}'):
    98: 
    99: 		@totalsumgeneral = 0
    100: 	
    101: 	}
    102: 	
    103: 	pdf.text "\n\nTotal", :style => :bold, :size => 10
    104: 	items = Array.new
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.3ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:08:26 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2171817360 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:101: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:169: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:171: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2171817360(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s

		@totalsumgeneral = 0
	
	}
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]


#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]


pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.0ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:101: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:169: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:171: syntax error, unexpected end-of-input, expecting '}'):
    98: 
    99: 		@totalsumgeneral = 0
    100: 	
    101: 	}
    102: 	
    103: 	pdf.text "\n\nTotal", :style => :bold, :size => 10
    104: 	items = Array.new
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.3ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:09:50 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2192464120 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:95: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:163: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:165: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2192464120(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"

		@totalsumgeneral = 0
	
	}
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]


#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]


pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.2ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:95: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:163: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:165: syntax error, unexpected end-of-input, expecting '}'):
    92: 
    93: 		@totalsumgeneral = 0
    94: 	
    95: 	}
    96: 	
    97: 	pdf.text "\n\nTotal", :style => :bold, :size => 10
    98: 	items = Array.new
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:09:51 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2192464120 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:95: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:163: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:165: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2192464120(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"

		@totalsumgeneral = 0
	
	}
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]


#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]


pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.0ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:95: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:163: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:165: syntax error, unexpected end-of-input, expecting '}'):
    92: 
    93: 		@totalsumgeneral = 0
    94: 	
    95: 	}
    96: 	
    97: 	pdf.text "\n\nTotal", :style => :bold, :size => 10
    98: 	items = Array.new
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:09:52 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2192464120 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:95: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:163: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:165: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2192464120(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"

		@totalsumgeneral = 0
	
	}
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]


#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]


pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.0ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:95: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:163: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:165: syntax error, unexpected end-of-input, expecting '}'):
    92: 
    93: 		@totalsumgeneral = 0
    94: 	
    95: 	}
    96: 	
    97: 	pdf.text "\n\nTotal", :style => :bold, :size => 10
    98: 	items = Array.new
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:09:52 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2192464120 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:95: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:163: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:165: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2192464120(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"

		@totalsumgeneral = 0
	
	}
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]


#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]


pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.0ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:95: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:163: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:165: syntax error, unexpected end-of-input, expecting '}'):
    92: 
    93: 		@totalsumgeneral = 0
    94: 	
    95: 	}
    96: 	
    97: 	pdf.text "\n\nTotal", :style => :bold, :size => 10
    98: 	items = Array.new
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.0ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:09:58 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (7127.6ms)
Completed 500 Internal Server Error in 7132ms

ActionView::Template::Error (undefined method `border_style=' for #<Prawn::Table:0x000001095e2f40>):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		pdf.table items, :border_style => :grid, 
    99: 			:headers => headers,
    100: 			:column_widths => {0 => 270},
    101: 			:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2225296680'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2225296680'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:10:55 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2171765980 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:101: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:169: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:171: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2171765980(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s

		@totalsumgeneral = 0
	
	}
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]


#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]


pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.1ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:101: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:169: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:171: syntax error, unexpected end-of-input, expecting '}'):
    98: 
    99: 		@totalsumgeneral = 0
    100: 	
    101: 	}
    102: 	
    103: 	pdf.text "\n\nTotal", :style => :bold, :size => 10
    104: 	items = Array.new
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:11:10 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2190517120 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:168: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:170: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2190517120(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s

		@totalsumgeneral = 0
	
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]


#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]


pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.1ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:168: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:170: syntax error, unexpected end-of-input, expecting '}'):
0  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.3ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:12:13 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (6996.8ms)
Completed 500 Internal Server Error in 7001ms

ActionView::Template::Error (undefined method `border_style=' for #<Prawn::Table:0x0000010570b5d8>):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		pdf.table items, :border_style => :grid, 
    99: 			:headers => headers,
    100: 			:column_widths => {0 => 270},
    101: 			:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2192444420'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2192444420'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:12:55 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (7137.5ms)
Completed 500 Internal Server Error in 7142ms

ActionView::Template::Error (undefined method `border_style=' for #<Prawn::Table:0x000001051b4940>):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		pdf.table items, 
    99:       :border_style => :grid, 
    100: 			:headers => headers,
    101: 			:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2171767840'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2171767840'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:13:36 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2171886220 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:102: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:175: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:177: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2171886220(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		pdf.table(items)

		@totalsumgeneral = 0
	
	}
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	pdf.table(items, :border_style => :grid,
		:headers => headers_bis,
		:column_widths => {0 => 430},
		:align => {0 => :left, 1 => :right},
		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]


pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.1ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:102: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:175: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:177: syntax error, unexpected end-of-input, expecting '}'):
    99: 
    100: 		@totalsumgeneral = 0
    101: 	
    102: 	}
    103: 	
    104: 	pdf.text "\n\nTotal", :style => :bold, :size => 10
    105: 	items = Array.new
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.3ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:14:23 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2190647800 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:175: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:177: syntax error, unexpected end-of-input, expecting keyword_end
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2190647800(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		pdf.table(items)

		@totalsumgeneral = 0
	
	end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	pdf.table(items, :border_style => :grid,
		:headers => headers_bis,
		:column_widths => {0 => 430},
		:align => {0 => :left, 1 => :right},
		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]


pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.3ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:175: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:177: syntax error, unexpected end-of-input, expecting keyword_end):
0  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.3ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:14:45 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2192509020 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:172: syntax error, unexpected tSTRING_DEND, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:175: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:177: syntax error, unexpected end-of-input, expecting keyword_end
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2192509020(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		pdf.table(items)

		@totalsumgeneral = 0
	
	end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	pdf.table(items, :border_style => :grid,
		:headers => headers_bis,
		:column_widths => {0 => 430},
		:align => {0 => :left, 1 => :right},
		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
}

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.1ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:172: syntax error, unexpected tSTRING_DEND, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:175: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:177: syntax error, unexpected end-of-input, expecting keyword_end):
    169: 	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8
    170: 
    171: pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
    172: }
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:14:57 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (15.5ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		pdf.table(items)
    99: 
    100: 		@totalsumgeneral = 0
    101: 	
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2193293620'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2193293620'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:15:34 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (21099.0ms)
Completed 500 Internal Server Error in 21103ms

ActionView::Template::Error (undefined method `border_style=' for #<Prawn::Table:0x00000109410eb0>):
    149:     :font_style => :bold,
    150:     :font_size => 10)]
    151: 
    152: 	pdf.table(items, :border_style => :grid,
    153: 		:headers => headers_bis,
    154: 		:column_widths => {0 => 430},
    155: 		:align => {0 => :left, 1 => :right},
  app/views/devis/show.pdf.prawn:152:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2224275460'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2224275460'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:16:20 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (22.7ms)
Completed 500 Internal Server Error in 28ms

ActionView::Template::Error (undefined method `has_key?' for [540.0, 0]:Array):
    163: 	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
    164: 	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8
    165: 
    166: pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
    167: end
  app/views/devis/show.pdf.prawn:166:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2171732100'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2171732100'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.3ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:16:47 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (30.1ms)
Completed 200 OK in 34ms (Views: 31.9ms | ActiveRecord: 1.0ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:17:17 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (22.6ms)
Completed 500 Internal Server Error in 26ms

ActionView::Template::Error (undefined method `has_key?' for [540.0, 0]:Array):
    163: 	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
    164: 	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8
    165: 
    166:   pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
    167: end
  app/views/devis/show.pdf.prawn:166:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223407220'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223407220'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:18:32 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2225475100 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:108: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:181: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:183: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2225475100(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#pdf.table items, 
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
	}
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]


pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.0ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:108: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:181: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:183: syntax error, unexpected end-of-input, expecting '}'):
    105: 
    106: 		@totalsumgeneral = 0
    107: 	
    108: 	}
    109: 	
    110: 	pdf.text "\n\nTotal", :style => :bold, :size => 10
    111: 	items = Array.new
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.3ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:18:40 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2226411040 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:108: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:181: syntax error, unexpected keyword_ensure, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:183: syntax error, unexpected keyword_end, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2226411040(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each{|information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#pdf.table items, 
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
	}
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.1ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:108: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:181: syntax error, unexpected keyword_ensure, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:183: syntax error, unexpected keyword_end, expecting '}'):
    105: 
    106: 		@totalsumgeneral = 0
    107: 	
    108: 	}
    109: 	
    110: 	pdf.text "\n\nTotal", :style => :bold, :size => 10
    111: 	items = Array.new
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:19:08 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (24.5ms)
Completed 200 OK in 33ms (Views: 26.1ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:21:47 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (15.1ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		pdf.table(items) 
    99:     #  :border_style => :grid, 
    100: 		#	:headers => headers,
    101: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2225572980'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2225572980'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:24:53 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (15.1ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (undefined method `all?' for "test":String):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		pdf.table("test") 
    99:     #  :border_style => :grid, 
    100: 		#	:headers => headers,
    101: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223870160'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223870160'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:25:10 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (15.5ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		pdf.table(items) 
    99:     #  :border_style => :grid, 
    100: 		#	:headers => headers,
    101: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2192967860'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2192967860'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:31:51 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (15.9ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		pdf.table(items) 
    99:     #  :border_style => :grid, 
    100: 		#	:headers => headers,
    101: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2190193360'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2190193360'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:32:40 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (3355.0ms)
Completed 500 Internal Server Error in 3359ms

ActionView::Template::Error (undefined method `table' for #<#<Class:0x00000105661218>:0x000001097b3e00>):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		table(items) 
    99:     #  :border_style => :grid, 
    100: 		#	:headers => headers,
    101: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2227016500'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2227016500'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:33:03 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (17.2ms)
Completed 500 Internal Server Error in 22ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		Prawn::Table.new(items) 
    99:     #  :border_style => :grid, 
    100: 		#	:headers => headers,
    101: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:98:in `new'
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223884680'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223884680'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:33:09 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (17.6ms)
Completed 500 Internal Server Error in 23ms

ActionView::Template::Error (undefined method `empty?' for #<Prawn::Document:0x000001056982b8>):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		Prawn::Table.new(pdf, items) 
    99:     #  :border_style => :grid, 
    100: 		#	:headers => headers,
    101: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:98:in `new'
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2192995900'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2192995900'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.0ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:33:10 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (17.5ms)
Completed 500 Internal Server Error in 22ms

ActionView::Template::Error (undefined method `empty?' for #<Prawn::Document:0x000001051cc130>):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		Prawn::Table.new(pdf, items) 
    99:     #  :border_style => :grid, 
    100: 		#	:headers => headers,
    101: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:98:in `new'
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2192995900'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2192995900'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:33:25 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (20.2ms)
Completed 500 Internal Server Error in 25ms

ActionView::Template::Error (undefined method `Table' for Prawn:Module):
    95: 		items.push([phrase_somme,"","", "", totalsumgeneral])
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		Prawn::Table(pdf, items) 
    99:     #  :border_style => :grid, 
    100: 		#	:headers => headers,
    101: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:98:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2156593660'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2156593660'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:34:17 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (17.1ms)
Completed 500 Internal Server Error in 21ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     pdf.table(items, :cell_style => { :borders => [:left, :right] })
    100:     #  :border_style => :grid, 
    101: 		#	:headers => headers,
    102: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:99:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2225701920'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2225701920'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:34:18 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.2ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (14.4ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     pdf.table(items, :cell_style => { :borders => [:left, :right] })
    100:     #  :border_style => :grid, 
    101: 		#	:headers => headers,
    102: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:99:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2225701920'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2225701920'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:34:18 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (14.3ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     pdf.table(items, :cell_style => { :borders => [:left, :right] })
    100:     #  :border_style => :grid, 
    101: 		#	:headers => headers,
    102: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:99:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2225701920'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2225701920'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:34:38 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (16.2ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     items
    100:     pdf.table(items, :cell_style => { :borders => [:left, :right] })
    101:     #  :border_style => :grid, 
    102: 		#	:headers => headers,
    103: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2190949220'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2190949220'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:34:50 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (53.6ms)
Completed 200 OK in 58ms (Views: 55.3ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:35:01 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.2ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (41.1ms)
Completed 200 OK in 46ms (Views: 43.2ms | ActiveRecord: 1.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:36:06 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (34.3ms)
Completed 200 OK in 39ms (Views: 35.9ms | ActiveRecord: 1.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:37:20 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (27.2ms)
Completed 500 Internal Server Error in 31ms

ActionView::Template::Error (undefined method `headers=' for #<Prawn::Table:0x00000105495e48>):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     puts items
    100:     pdf.table([
    101:   ["1. Row example text", "433"],
    102:   ["2. Row example text", "2343"],
    103:   ["3. Row example text", "342"],
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2192992340'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2192992340'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:38:03 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (41.2ms)
Completed 200 OK in 46ms (Views: 42.9ms | ActiveRecord: 1.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:38:25 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (17.0ms)
Completed 500 Internal Server Error in 21ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     puts items
    100:     pdf.table(items,  :width => 500, :cell_style => {:headers => headers,
    101:     :font_style => :bold})
    102:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    103:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2226327900'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2226327900'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:38:34 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (15.9ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     puts items
    100:     pdf.table([items],  :width => 500, :cell_style => {:headers => headers,
    101:     :font_style => :bold})
    102:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    103:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2224640360'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2224640360'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:39:09 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (32.2ms)
Completed 200 OK in 36ms (Views: 33.8ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:40:49 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (16.2ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     puts items
    100:     pdf.table(items,  :width => 500, :cell_style => {:headers => headers,
    101:     :font_style => :bold})
    102:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    103:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2190851860'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2190851860'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:52:45 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (17.4ms)
Completed 500 Internal Server Error in 26ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    106: 		#pdf.text items.length.to_s
    107: 		#Prawn::Table(pdf, items) 
    108:     puts items
    109:     pdf.table(items,  :width => 500, :cell_style => {:headers => headers,
    110:     :font_style => :bold})
    111:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    112:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:109:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2155970620'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2155970620'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:52:46 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (16.0ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    106: 		#pdf.text items.length.to_s
    107: 		#Prawn::Table(pdf, items) 
    108:     puts items
    109:     pdf.table(items,  :width => 500, :cell_style => {:headers => headers,
    110:     :font_style => :bold})
    111:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    112:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:109:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2155970620'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2155970620'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:52:47 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (15.5ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    106: 		#pdf.text items.length.to_s
    107: 		#Prawn::Table(pdf, items) 
    108:     puts items
    109:     pdf.table(items,  :width => 500, :cell_style => {:headers => headers,
    110:     :font_style => :bold})
    111:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    112:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:109:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2155970620'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2155970620'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:52:47 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (15.6ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    106: 		#pdf.text items.length.to_s
    107: 		#Prawn::Table(pdf, items) 
    108:     puts items
    109:     pdf.table(items,  :width => 500, :cell_style => {:headers => headers,
    110:     :font_style => :bold})
    111:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    112:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:109:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2155970620'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2155970620'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:53:04 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (18.0ms)
Completed 500 Internal Server Error in 22ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    106: 		#pdf.text items.length.to_s
    107: 		#Prawn::Table(pdf, items) 
    108:     puts items
    109:     pdf.table(items,  :width => 500, :cell_style => {
    110:     :font_style => :bold})
    111:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    112:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:109:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2190521940'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2190521940'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:53:05 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (15.0ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    106: 		#pdf.text items.length.to_s
    107: 		#Prawn::Table(pdf, items) 
    108:     puts items
    109:     pdf.table(items,  :width => 500, :cell_style => {
    110:     :font_style => :bold})
    111:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    112:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:109:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2190521940'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2190521940'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:54:08 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (15.3ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    106: 		#pdf.text items.length.to_s
    107: 		#Prawn::Table(pdf, items) 
    108:     puts items
    109:     pdf.table([items],  :width => 500, :cell_style => {
    110:     :font_style => :bold})
    111:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    112:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:109:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2225446280'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2225446280'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.0ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:54:48 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2223866220 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:64: syntax error, unexpected keyword_end, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2223866220(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : 
			#Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), 
			#Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), 
			#Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), 
			#Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : 
			#Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items) 
    puts items
    pdf.table(items,  :width => 500, :cell_style => {
    :font_style => :bold})
    #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.2ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:64: syntax error, unexpected keyword_end, expecting '}'):
    61: 			#Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), 
    62: 			#Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : 
    63: 			#Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    64:                      end
    65: 			items.push(items_temp)
    66: 			items_temp = Array.new
    67: 		}
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:55:09 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  Rendered devis/show.pdf.prawn (13.4ms)
Completed 500 Internal Server Error in 18ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     puts items
    100:     pdf.table(items,  :width => 500, :cell_style => {
    101:     :font_style => :bold})
    102:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    103:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2222986040'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2222986040'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:55:55 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (15.3ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    106: 		#pdf.text items.length.to_s
    107: 		#Prawn::Table(pdf, items) 
    108:     puts items
    109:     pdf.table(items,  :width => 500, :cell_style => {
    110:     :font_style => :bold})
    111:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    112:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:109:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2191699600'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2191699600'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:56:29 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (21.3ms)
Completed 500 Internal Server Error in 26ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    85: 		#pdf.text items.length.to_s
    86: 		#Prawn::Table(pdf, items) 
    87:     puts items
    88:     pdf.table(items,  :width => 500, :cell_style => {
    89:     :font_style => :bold})
    90:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    91:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:88:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2171587660'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2171587660'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:56:31 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (16.1ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    85: 		#pdf.text items.length.to_s
    86: 		#Prawn::Table(pdf, items) 
    87:     puts items
    88:     pdf.table(items,  :width => 500, :cell_style => {
    89:     :font_style => :bold})
    90:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    91:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:88:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2171587660'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2171587660'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:56:32 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (16.0ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    85: 		#pdf.text items.length.to_s
    86: 		#Prawn::Table(pdf, items) 
    87:     puts items
    88:     pdf.table(items,  :width => 500, :cell_style => {
    89:     :font_style => :bold})
    90:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    91:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:88:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2171587660'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2171587660'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:56:32 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (15.8ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    85: 		#pdf.text items.length.to_s
    86: 		#Prawn::Table(pdf, items) 
    87:     puts items
    88:     pdf.table(items,  :width => 500, :cell_style => {
    89:     :font_style => :bold})
    90:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    91:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:88:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2171587660'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2171587660'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:56:32 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (15.8ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    85: 		#pdf.text items.length.to_s
    86: 		#Prawn::Table(pdf, items) 
    87:     puts items
    88:     pdf.table(items,  :width => 500, :cell_style => {
    89:     :font_style => :bold})
    90:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    91:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:88:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2171587660'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2171587660'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:57:20 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (22.1ms)
Completed 500 Internal Server Error in 26ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    85: 		#pdf.text items.length.to_s
    86: 		#Prawn::Table(pdf, items) 
    87:     puts items
    88:     pdf.table(items,  :width => 500, :cell_style => {
    89:     :font_style => :bold})
    90:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    91:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:88:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2171273880'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2171273880'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:58:26 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2225949360 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:68: syntax error, unexpected ')', expecting :: or '[' or '.'
... informationligne.price).to_s))	
...                               ^
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2225949360(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : 
			#Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), 
			#Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), 
			#Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), 
			#Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : 
			#Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
			items_temp.push("fdsfdsfs")
      #items_temp.push((information.name.nil? ? "" : informationligne.name), informationligne.number.to_s, 
      informationligne.unite.to_s, 
      format("%.2f",informationligne.price).to_s, 
      (informationligne.number.nil? && informationligne.price.nil? ? "" : format("%.2f",informationligne.number * informationligne.price).to_s))	
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			  items.push(titleinformationligne.title)
      }
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items) 
    puts items
    pdf.table(items,  :width => 500, :cell_style => {
    :font_style => :bold})
    #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.2ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:68: syntax error, unexpected ')', expecting :: or '[' or '.'
... informationligne.price).to_s))	
...                               ^):
    65:       #items_temp.push((information.name.nil? ? "" : informationligne.name), informationligne.number.to_s, 
    66:       informationligne.unite.to_s, 
    67:       format("%.2f",informationligne.price).to_s, 
    68:       (informationligne.number.nil? && informationligne.price.nil? ? "" : format("%.2f",informationligne.number * informationligne.price).to_s))	
    69: 		     unless informationligne.titleinformationlignes.empty?	
    70: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
    71: 				#items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:58:50 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (15.0ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table(items,  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2225061960'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2225061960'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:59:06 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (17.8ms)
Completed 500 Internal Server Error in 22ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table(items,  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223463060'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223463060'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:59:08 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (15.3ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table(items,  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223463060'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223463060'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:59:17 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2189700040 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:77: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:171: syntax error, unexpected keyword_end, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:174: syntax error, unexpected keyword_ensure, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:176: syntax error, unexpected keyword_end, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2189700040(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : 
			#Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), 
			#Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), 
			#Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), 
			#Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : 
			#Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
			items_temp.push("fdsfdsfs")
      #items_temp.push((information.name.nil? ? "" : informationligne.name), informationligne.number.to_s, 
      #informationligne.unite.to_s, 
      #format("%.2f",informationligne.price).to_s, 
      #(informationligne.number.nil? && informationligne.price.nil? ? "" : format("%.2f",informationligne.number * informationligne.price).to_s))	
		     unless informationligne.titleinformationlignes.empty?	
			#informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			 # items.push(titleinformationligne.title)
      #}
      #               end
			items.push(items_temp)
			items_temp = Array.new
		}


		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items) 
    puts items
    pdf.table(items,  :width => 500, :cell_style => {
    :font_style => :bold})
    #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.1ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:77: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:171: syntax error, unexpected keyword_end, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:174: syntax error, unexpected keyword_ensure, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:176: syntax error, unexpected keyword_end, expecting '}'):
    74:       #               end
    75: 			items.push(items_temp)
    76: 			items_temp = Array.new
    77: 		}
    78: 
    79: 
    80: 		pdf.text "\n\n"
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:59:25 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (19.9ms)
Completed 500 Internal Server Error in 24ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table(items,  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2156949300'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2156949300'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 18:59:47 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (14.7ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table(items,  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2225641140'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2225641140'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:00:11 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (15.0ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table(items,  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2224085860'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2224085860'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.0ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:00:18 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (15.8ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table(items,  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2193130760'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2193130760'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:00:35 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (14.9ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table([items],  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2190670200'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2190670200'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:02:38 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (14.5ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table(["cdxcxwc"],  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2227047020'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2227047020'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:02:54 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (25.0ms)
Completed 200 OK in 29ms (Views: 26.6ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:03:14 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (16.1ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table(items,  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223889680'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223889680'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:03:21 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (14.7ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table([items],  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2192975800'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2192975800'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:03:28 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (14.4ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table([[items]],  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2190456100'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2190456100'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:05:07 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (3308.3ms)
Completed 500 Internal Server Error in 3313ms

ActionView::Template::Error (undefined local variable or method `dsdsd' for #<#<Class:0x00000105661218>:0x000001097811f8>):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table([[dsdsd]], [[dsfdsfdsf]],  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2226904720'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2226904720'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:05:28 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (15.8ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (wrong number of arguments (3 for 1..2)):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table([["dsdsd"]], [["dsfdsfdsf"]],  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2190730340'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2190730340'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:05:30 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (18.9ms)
Completed 500 Internal Server Error in 23ms

ActionView::Template::Error (wrong number of arguments (3 for 1..2)):
    86: 		#pdf.text items.length.to_s
    87: 		#Prawn::Table(pdf, items) 
    88:     puts items
    89:     pdf.table([["dsdsd"]], [["dsfdsfdsf"]],  :width => 500, :cell_style => {
    90:     :font_style => :bold})
    91:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    92:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:89:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2190730340'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2190730340'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:05:41 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (28.9ms)
Completed 200 OK in 33ms (Views: 30.4ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:06:01 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (30.1ms)
Completed 200 OK in 34ms (Views: 31.6ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:07:28 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2193427460 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:89: syntax error, unexpected =>, expecting keyword_end
    :font_style => :bold})
                  ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:111: syntax error, unexpected tSTRING_DEND, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:123: syntax error, unexpected tSTRING_DEND, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:125: syntax error, unexpected keyword_end, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:170: syntax error, unexpected keyword_end, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:173: syntax error, unexpected keyword_ensure, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:175: syntax error, unexpected keyword_end, expecting '}'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2193427460(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : 
			#Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), 
			#Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), 
			#Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), 
			#Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : 
			#Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
      items_temp.push((information.name.nil? ? "" : informationligne.name), informationligne.number.to_s, 
      informationligne.unite.to_s, 
      format("%.2f",informationligne.price).to_s, 
      (informationligne.number.nil? && informationligne.price.nil? ? "" : format("%.2f",informationligne.number * informationligne.price).to_s))	
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			  items.push(titleinformationligne.title)
      }
                     end
			#items.push("fdsfdsfds")
			items_temp = Array.new
		}


		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items) 
    puts items
    #pdf.table([["dsdsd", "dfdsfds"], ["dsfdsfdsf", "nicolas"]],  :width => 500, :cell_style => {
    :font_style => :bold})
    #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (2.1ms)
Completed 500 Internal Server Error in 7ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:89: syntax error, unexpected =>, expecting keyword_end
    :font_style => :bold})
                  ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:111: syntax error, unexpected tSTRING_DEND, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:123: syntax error, unexpected tSTRING_DEND, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:125: syntax error, unexpected keyword_end, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:170: syntax error, unexpected keyword_end, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:173: syntax error, unexpected keyword_ensure, expecting '}'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:175: syntax error, unexpected keyword_end, expecting '}'):
    86: 		#Prawn::Table(pdf, items) 
    87:     puts items
    88:     #pdf.table([["dsdsd", "dfdsfds"], ["dsfdsfdsf", "nicolas"]],  :width => 500, :cell_style => {
    89:     :font_style => :bold})
    90:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    91:     #  :border_style => :grid, 
    92: 		#	:headers => headers,
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:08:22 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (18.8ms)
Completed 500 Internal Server Error in 23ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    85: 		#pdf.text items.length.to_s
    86: 		#Prawn::Table(pdf, items) 
    87:     puts items
    88:     pdf.table(items,  :width => 500, :cell_style => {
    89:     :font_style => :bold})
    90:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    91:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:88:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2192621980'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2192621980'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:08:47 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (16.6ms)
Completed 500 Internal Server Error in 21ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    85: 		#pdf.text items.length.to_s
    86: 		#Prawn::Table(pdf, items) 
    87:     puts items
    88:     pdf.table(items[0],  :width => 500, :cell_style => {
    89:     :font_style => :bold})
    90:     #pdf.table(items, :cell_style => { :borders => [:left, :right] })
    91:     #  :border_style => :grid, 
  app/views/devis/show.pdf.prawn:88:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2189479160'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2189479160'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:09:00 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (33.9ms)
Completed 200 OK in 38ms (Views: 35.4ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:10:03 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (15.4ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     items
    100:     pdf.table(items[0], :cell_style => { :borders => [:left, :right] })
    101:     #  :border_style => :grid, 
    102: 		#	:headers => headers,
    103: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2224919500'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2224919500'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:10:12 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (30.5ms)
Completed 500 Internal Server Error in 35ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     items
    100:     pdf.table([items[0]], :cell_style => { :borders => [:left, :right] })
    101:     #  :border_style => :grid, 
    102: 		#	:headers => headers,
    103: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223362620'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223362620'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.0ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:10:25 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (16.3ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     items
    100:     pdf.table([items], :cell_style => { :borders => [:left, :right] })
    101:     #  :border_style => :grid, 
    102: 		#	:headers => headers,
    103: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2192492960'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2192492960'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:10:39 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (19.2ms)
Completed 500 Internal Server Error in 24ms

ActionView::Template::Error (undefined method `empty?' for #<Prawn::Table::Cell:0x00000102b437e8>):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     items
    100:     pdf.table(items[0][0], :cell_style => { :borders => [:left, :right] })
    101:     #  :border_style => :grid, 
    102: 		#	:headers => headers,
    103: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2172441760'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2172441760'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (4.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:10:56 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (15.8ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (undefined method `empty?' for #<Prawn::Table::Cell:0x000001095c2060>):
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     pdf.table(items[0][0], :cell_style => { :borders => [:left, :right] })
    100:     #  :border_style => :grid, 
    101: 		#	:headers => headers,
    102: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:99:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2226653160'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2226653160'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:11:27 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (16.0ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (undefined method `empty?' for #<Prawn::Table::Cell:0x000001092a2e70>):
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     pdf.table(items[0][0])
    100:     #  :border_style => :grid, 
    101: 		#	:headers => headers,
    102: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:99:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2224998200'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2224998200'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:11:36 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (15.1ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    96: 		pdf.text information.name, :style => :bold, :font_size => 10
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items) 
    99:     pdf.table(items[0], :cell_style => { :borders => [:left, :right] })
    100:     #  :border_style => :grid, 
    101: 		#	:headers => headers,
    102: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:99:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223375500'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223375500'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:11:54 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (24.6ms)
Completed 200 OK in 29ms (Views: 26.2ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:12:28 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (16.8ms)
Completed 500 Internal Server Error in 22ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items)
    99: 		puts items[0]
    100:     pdf.table(items.to_a, :cell_style => { :borders => [:left, :right] })
    101:     #  :border_style => :grid, 
    102: 		#	:headers => headers,
    103: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2189427020'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2189427020'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:13:11 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (19.6ms)
Completed 500 Internal Server Error in 24ms

ActionView::Template::Error (undefined method `empty?' for #<Prawn::Table::Cell:0x00000109561558>):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items)
    99: 		puts items[0]
    100:     pdf.table(Prawn::Table::Cell.new(pdf,
    101:     :width => 0,
    102:     :text => "Produit",
    103:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2226606560'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2226606560'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:13:26 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (16.0ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items)
    99: 		puts items[0]
    100:     pdf.table([Prawn::Table::Cell.new(pdf,
    101:     :width => 0,
    102:     :text => "Produit",
    103:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2224949560'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2224949560'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.3ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:13:41 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (16.2ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (undefined method `empty?' for #<Prawn::Table::Cell:0x0000010573b710>):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items)
    99: 		puts items[0]
    100:     pdf.table(Prawn::Table::Cell.new(pdf,
    101:     :width => 0,
    102:     :text => "Produit",
    103:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223374360'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223374360'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:14:45 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (15.4ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (data must be a two dimensional array of cellable objects):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items)
    99: 		puts items[0]
    100:     pdf.table([Prawn::Table::Cell.new(pdf,
    101:     :width => 0,
    102:     :text => "Produit",
    103:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2192443080'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2192443080'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:15:05 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (15.7ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (subclasses must implement natural_content_width):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items)
    99: 		puts items[0]
    100:     pdf.table([[Prawn::Table::Cell.new(pdf,
    101:     :width => 0,
    102:     :text => "Produit",
    103:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2172286280'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2172286280'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.0ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:15:24 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2226455800 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:104: syntax error, unexpected ')', expecting ']'
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2226455800(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			}
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items)
		puts items[0]
    pdf.table([Prawn::Table::Cell.new(
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.3ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:104: syntax error, unexpected ')', expecting ']'):
    101:     :width => 0,
    102:     :text => "Produit",
    103:     :font_style => :bold,
    104:     :font_size => 10), :cell_style => { :borders => [:left, :right] })
    105:     #  :border_style => :grid, 
    106: 		#	:headers => headers,
    107: 	 	#	:column_widths => {0 => 270},
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:15:36 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (15.9ms)
Completed 500 Internal Server Error in 20ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items)
    99: 		puts items[0]
    100:     pdf.table(Prawn::Table::Cell.new(
    101:     :width => 0,
    102:     :text => "Produit",
    103:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:100:in `new'
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2225511260'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2225511260'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:15:50 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (16.5ms)
Completed 500 Internal Server Error in 21ms

ActionView::Template::Error (undefined method `empty?' for #<Prawn::Table::Cell:0x00000109052eb8>):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items)
    99: 		puts items[0]
    100:     pdf.table(Prawn::Table::Cell.new(pdf,
    101:     :width => 0,
    102:     :text => "Produit",
    103:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223937720'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223937720'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:16:12 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (16.2ms)
Completed 500 Internal Server Error in 21ms

ActionView::Template::Error (undefined method `all?' for "#<Prawn::Table::Cell:0x00000105464208>":String):
    97: 		#pdf.text items.length.to_s
    98: 		#Prawn::Table(pdf, items)
    99: 		puts items[0]
    100:     pdf.table(Prawn::Table::Cell.new(pdf,
    101:     :width => 0,
    102:     :text => "Produit",
    103:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:100:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2192952360'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2192952360'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:37:25 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.2ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2189814380 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:62: syntax error, unexpected ',', expecting =>
      informationligne.unite.to_s, 
                                  ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:65: syntax error, unexpected ')', expecting :: or '[' or '.'
      ))	
        ^
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2189814380(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	

			items_temp.push((information.name.nil? ? "" : informationligne.name), 
      informationligne.number.to_s,:font_size=>10, 
      informationligne.unite.to_s, 
      format("%.2f",informationligne.price).to_s, 
      (informationligne.number.nil? && informationligne.price.nil? ? "" : (format("%.2f",informationligne.number * informationligne.price)).to_s
      ))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			  
				items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items)
		puts items[0]
    pdf.table(Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10).to_s, :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.4ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:62: syntax error, unexpected ',', expecting =>
      informationligne.unite.to_s, 
                                  ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:65: syntax error, unexpected ')', expecting :: or '[' or '.'
      ))	
        ^):
    59: 
    60: 			items_temp.push((information.name.nil? ? "" : informationligne.name), 
    61:       informationligne.number.to_s,:font_size=>10, 
    62:       informationligne.unite.to_s, 
    63:       format("%.2f",informationligne.price).to_s, 
    64:       (informationligne.number.nil? && informationligne.price.nil? ? "" : (format("%.2f",informationligne.number * informationligne.price)).to_s
    65:       ))	
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:38:12 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2169339500 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:62: syntax error, unexpected ',', expecting =>
      informationligne.unite.to_s, 
                                  ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:63: syntax error, unexpected ')', expecting '}'
      format("%.2f",informationligne.price).to_s)	
                                                 ^
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2169339500(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	

			items_temp.push((information.name.nil? ? "" : informationligne.name), 
      informationligne.number.to_s,:font_size=>10, 
      informationligne.unite.to_s, 
      format("%.2f",informationligne.price).to_s)	
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			  
				items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items)
		puts items[0]
    pdf.table(Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10).to_s, :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.3ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:62: syntax error, unexpected ',', expecting =>
      informationligne.unite.to_s, 
                                  ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:63: syntax error, unexpected ')', expecting '}'
      format("%.2f",informationligne.price).to_s)	
                                                 ^):
    59: 
    60: 			items_temp.push((information.name.nil? ? "" : informationligne.name), 
    61:       informationligne.number.to_s,:font_size=>10, 
    62:       informationligne.unite.to_s, 
    63:       format("%.2f",informationligne.price).to_s)	
    64: 		     unless informationligne.titleinformationlignes.empty?	
    65: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:38:29 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2226505220 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:62: syntax error, unexpected ',', expecting =>
      informationligne.unite.to_s, 
                                  ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:64: syntax error, unexpected ')', expecting '}'
      ))	
        ^
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2226505220(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	

			items_temp.push((information.name.nil? ? "" : informationligne.name), 
      informationligne.number.to_s,:font_size=>10, 
      informationligne.unite.to_s, 
      (informationligne.number.nil? && informationligne.price.nil? ? "" : (format("%.2f",informationligne.number * informationligne.price)).to_s
      ))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			  
				items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    headers = [Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Nb",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Unit√©",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Prix ‚Ç¨",
    :font_style => :bold,
    :font_size => 10), Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Total ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)] 
		pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items)
		puts items[0]
    pdf.table(Prawn::Table::Cell.new(pdf,
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10).to_s, :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.2ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:62: syntax error, unexpected ',', expecting =>
      informationligne.unite.to_s, 
                                  ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:64: syntax error, unexpected ')', expecting '}'
      ))	
        ^):
    59: 
    60: 			items_temp.push((information.name.nil? ? "" : informationligne.name), 
    61:       informationligne.number.to_s,:font_size=>10, 
    62:       informationligne.unite.to_s, 
    63:       (informationligne.number.nil? && informationligne.price.nil? ? "" : (format("%.2f",informationligne.number * informationligne.price)).to_s
    64:       ))	
    65: 		
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:39:22 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (15.1ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (undefined method `all?' for "#<Prawn::Table::Cell:0x00000109378cc8>":String):
    106: 		#pdf.text items.length.to_s
    107: 		#Prawn::Table(pdf, items)
    108: 		puts items[0]
    109:     pdf.table(Prawn::Table::Cell.new(pdf,
    110:     :width => 0,
    111:     :text => "Produit",
    112:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:109:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2225555980'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2225555980'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.8ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:40:37 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (14.7ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (undefined method `all?' for "#<Prawn::Table::Cell:0x000001090727b8>":String):
    107: 		#pdf.text items.length.to_s
    108: 		#Prawn::Table(pdf, items)
    109: 		puts items[0]
    110:     pdf.table(Prawn::Table::Cell.new(pdf,
    111:     :width => 0,
    112:     :text => "Produit",
    113:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:110:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223969820'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223969820'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:40:37 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (13.6ms)
Completed 500 Internal Server Error in 18ms

ActionView::Template::Error (undefined method `all?' for "#<Prawn::Table::Cell:0x000001055d8e18>":String):
    107: 		#pdf.text items.length.to_s
    108: 		#Prawn::Table(pdf, items)
    109: 		puts items[0]
    110:     pdf.table(Prawn::Table::Cell.new(pdf,
    111:     :width => 0,
    112:     :text => "Produit",
    113:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:110:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223969820'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223969820'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:40:38 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (14.5ms)
Completed 500 Internal Server Error in 19ms

ActionView::Template::Error (undefined method `all?' for "#<Prawn::Table::Cell:0x00000105021088>":String):
    107: 		#pdf.text items.length.to_s
    108: 		#Prawn::Table(pdf, items)
    109: 		puts items[0]
    110:     pdf.table(Prawn::Table::Cell.new(pdf,
    111:     :width => 0,
    112:     :text => "Produit",
    113:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:110:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223969820'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223969820'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:40:38 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (18.0ms)
Completed 500 Internal Server Error in 22ms

ActionView::Template::Error (undefined method `all?' for "#<Prawn::Table::Cell:0x0000010970b110>":String):
    107: 		#pdf.text items.length.to_s
    108: 		#Prawn::Table(pdf, items)
    109: 		puts items[0]
    110:     pdf.table(Prawn::Table::Cell.new(pdf,
    111:     :width => 0,
    112:     :text => "Produit",
    113:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:110:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223969820'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223969820'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:40:38 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  Rendered devis/show.pdf.prawn (14.1ms)
Completed 500 Internal Server Error in 18ms

ActionView::Template::Error (undefined method `all?' for "#<Prawn::Table::Cell:0x000001094380a0>":String):
    107: 		#pdf.text items.length.to_s
    108: 		#Prawn::Table(pdf, items)
    109: 		puts items[0]
    110:     pdf.table(Prawn::Table::Cell.new(pdf,
    111:     :width => 0,
    112:     :text => "Produit",
    113:     :font_style => :bold,
  app/views/devis/show.pdf.prawn:110:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223969820'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223969820'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:41:02 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (24.0ms)
Completed 200 OK in 28ms (Views: 25.7ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:42:05 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (46.7ms)
Completed 200 OK in 51ms (Views: 48.2ms | ActiveRecord: 1.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:45:06 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2172301800 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:104: syntax error, unexpected tSTRING_BEG, expecting ']'
    "Total ‚Ç¨"] 
     ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:104: syntax error, unexpected ']', expecting keyword_end
    "Total ‚Ç¨"] 
                ^
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2172301800(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	

			items_temp.push((information.name.nil? ? "" : informationligne.name), 
      informationligne.number.to_s, 
      informationligne.unite.to_s, 
      format("%.2f",informationligne.price).to_s, 
      (informationligne.number.nil? && informationligne.price.nil? ? "" : (format("%.2f",informationligne.number * informationligne.price)).to_s
      ))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			  
				items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    #headers = [Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Produit",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Nb",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Unit√©",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Prix ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Total ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10)] 	
    headers = ["Produit",
    "Nb",
    "Unit√©",
    "Prix ‚Ç¨"
    "Total ‚Ç¨"] 
    pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		#phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		#totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		
    #items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items)
    pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (6.5ms)
Completed 500 Internal Server Error in 12ms


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:45:07 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2172301800 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:104: syntax error, unexpected tSTRING_BEG, expecting ']'
    "Total ‚Ç¨"] 
     ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:104: syntax error, unexpected ']', expecting keyword_end
    "Total ‚Ç¨"] 
                ^
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2172301800(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	

			items_temp.push((information.name.nil? ? "" : informationligne.name), 
      informationligne.number.to_s, 
      informationligne.unite.to_s, 
      format("%.2f",informationligne.price).to_s, 
      (informationligne.number.nil? && informationligne.price.nil? ? "" : (format("%.2f",informationligne.number * informationligne.price)).to_s
      ))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			  
				items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    #headers = [Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Produit",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Nb",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Unit√©",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Prix ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Total ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10)] 	
    headers = ["Produit",
    "Nb",
    "Unit√©",
    "Prix ‚Ç¨"
    "Total ‚Ç¨"] 
    pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		#phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		#totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		
    #items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items)
    pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.1ms)
Completed 500 Internal Server Error in 5ms


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:45:08 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.2ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2172301800 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:104: syntax error, unexpected tSTRING_BEG, expecting ']'
    "Total ‚Ç¨"] 
     ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:104: syntax error, unexpected ']', expecting keyword_end
    "Total ‚Ç¨"] 
                ^
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2172301800(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	

			items_temp.push((information.name.nil? ? "" : informationligne.name), 
      informationligne.number.to_s, 
      informationligne.unite.to_s, 
      format("%.2f",informationligne.price).to_s, 
      (informationligne.number.nil? && informationligne.price.nil? ? "" : (format("%.2f",informationligne.number * informationligne.price)).to_s
      ))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			  
				items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    #headers = [Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Produit",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Nb",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Unit√©",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Prix ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Total ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10)] 	
    headers = ["Produit",
    "Nb",
    "Unit√©",
    "Prix ‚Ç¨"
    "Total ‚Ç¨"] 
    pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		#phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		#totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		
    #items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items)
    pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.3ms)
Completed 500 Internal Server Error in 6ms


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:45:08 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2172301800 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:104: syntax error, unexpected tSTRING_BEG, expecting ']'
    "Total ‚Ç¨"] 
     ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:104: syntax error, unexpected ']', expecting keyword_end
    "Total ‚Ç¨"] 
                ^
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2172301800(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	

			items_temp.push((information.name.nil? ? "" : informationligne.name), 
      informationligne.number.to_s, 
      informationligne.unite.to_s, 
      format("%.2f",informationligne.price).to_s, 
      (informationligne.number.nil? && informationligne.price.nil? ? "" : (format("%.2f",informationligne.number * informationligne.price)).to_s
      ))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			  
				items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    #headers = [Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Produit",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Nb",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Unit√©",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Prix ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Total ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10)] 	
    headers = ["Produit",
    "Nb",
    "Unit√©",
    "Prix ‚Ç¨"
    "Total ‚Ç¨"] 
    pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		#phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		#totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		
    #items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items)
    pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.2ms)
Completed 500 Internal Server Error in 6ms


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:45:08 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2172301800 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:104: syntax error, unexpected tSTRING_BEG, expecting ']'
    "Total ‚Ç¨"] 
     ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:104: syntax error, unexpected ']', expecting keyword_end
    "Total ‚Ç¨"] 
                ^
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2172301800(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	

			items_temp.push((information.name.nil? ? "" : informationligne.name), 
      informationligne.number.to_s, 
      informationligne.unite.to_s, 
      format("%.2f",informationligne.price).to_s, 
      (informationligne.number.nil? && informationligne.price.nil? ? "" : (format("%.2f",informationligne.number * informationligne.price)).to_s
      ))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			  
				items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    #headers = [Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Produit",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Nb",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Unit√©",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Prix ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Total ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10)] 	
    headers = ["Produit",
    "Nb",
    "Unit√©",
    "Prix ‚Ç¨"
    "Total ‚Ç¨"] 
    pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		#phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		#totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		
    #items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items)
    pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.2ms)
Completed 500 Internal Server Error in 6ms


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:45:24 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (43.7ms)
Completed 200 OK in 48ms (Views: 45.3ms | ActiveRecord: 1.0ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:46:27 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (45.1ms)
Completed 200 OK in 49ms (Views: 46.7ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:47:28 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2189948640 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:102: syntax error, unexpected tIDENTIFIER, expecting ')'
    headers.push("Nb")
           ^
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2189948640(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	

			items_temp.push((information.name.nil? ? "" : informationligne.name), 
      informationligne.number.to_s, 
      informationligne.unite.to_s, 
      format("%.2f",informationligne.price).to_s, 
      (informationligne.number.nil? && informationligne.price.nil? ? "" : (format("%.2f",informationligne.number * informationligne.price)).to_s
      ))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			  
				items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    #headers = [Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Produit",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Nb",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Unit√©",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Prix ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Total ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10)] 	
    
    headers.push("Produit"
    headers.push("Nb")
    headers.push("Unit√©")
    headers.push("Prix ‚Ç¨")
    headers.push("Total ‚Ç¨")
    pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		#phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		#totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		
    #items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items)
    pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.3ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:102: syntax error, unexpected tIDENTIFIER, expecting ')'
    headers.push("Nb")
           ^):
    99:     #:font_size => 10)] 	
    100:     
    101:     headers.push("Produit"
    102:     headers.push("Nb")
    103:     headers.push("Unit√©")
    104:     headers.push("Prix ‚Ç¨")
    105:     headers.push("Total ‚Ç¨")
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:47:39 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (18.6ms)
Completed 500 Internal Server Error in 23ms

ActionView::Template::Error (undefined method `push' for #<Hash:0x00000102b87d30>):
    98:     #:font_style => :bold,
    99:     #:font_size => 10)] 	
    100:     
    101:     headers.push("Produit")
    102:     headers.push("Nb")
    103:     headers.push("Unit√©")
    104:     headers.push("Prix ‚Ç¨")
  app/views/devis/show.pdf.prawn:101:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2169596000'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2169596000'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.5ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:48:32 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (43.9ms)
Completed 200 OK in 48ms (Views: 45.4ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:48:55 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  Rendered devis/show.pdf.prawn (56.9ms)
Completed 500 Internal Server Error in 62ms

ActionView::Template::Error (undefined method `headers=' for #<Prawn::Table:0x000001056dbe28>):
    113: 		pdf.text information.name, :style => :bold, :font_size => 10
    114: 		#pdf.text items.length.to_s
    115: 		#Prawn::Table(pdf, items)
    116:     pdf.table(items, :headers => headers, :cell_style => { :borders => [:left, :right] })
    117:     #  :border_style => :grid, 
    118: 		#	:headers => headers,
    119: 	 	#	:column_widths => {0 => 270},
  app/views/devis/show.pdf.prawn:116:in `block in _app_views_devis_show_pdf_prawn___3393977029679317417_2223162500'
  app/views/devis/show.pdf.prawn:50:in `each'
  app/views/devis/show.pdf.prawn:50:in `_app_views_devis_show_pdf_prawn___3393977029679317417_2223162500'
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:49:16 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (49.8ms)
Completed 200 OK in 54ms (Views: 51.3ms | ActiveRecord: 1.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:50:54 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (46.6ms)
Completed 200 OK in 51ms (Views: 48.1ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:51:36 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (48.2ms)
Completed 200 OK in 52ms (Views: 49.9ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:51:57 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (48.1ms)
Completed 200 OK in 52ms (Views: 49.7ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis" for 127.0.0.1 at 2014-08-09 19:52:01 +0200
Processing by DevisController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (9.3ms)
Completed 200 OK in 24ms (Views: 19.6ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:52:03 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (43.7ms)
Completed 200 OK in 48ms (Views: 45.1ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:53:03 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
ERROR: compiling _app_views_devis_show_pdf_prawn___3393977029679317417_2189680760 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:61: syntax error, unexpected tIDENTIFIER, expecting ')'
      informationligne.number.to_s, 
                      ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:65: syntax error, unexpected ')', expecting :: or '[' or '.'
      ))	
        ^
Function body:           def _app_views_devis_show_pdf_prawn___3393977029679317417_2189680760(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "devis/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'
#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "VANDENBOGAERDE Nicolas", :size => 13, :style => :bold
	pdf.text "5 Rue Cave", :size => 10
	pdf.text "22430 Erquy", :size => 10
	pdf.text "06 61 66 63 26", :size => 10
	pdf.text "nicolas.vandenbogaerde@gmail.com", :size => 10
	#pdf.text "\n"
  #      pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	#pdf.text "RCS Paris 493 029 839", :size => 10
	pdf.text "Siret 518 475 785 00011", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end

#compteur_old = 28
#compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @devi.client.namerefcontact, :size => 10
	pdf.text @devi.client.nameentreprise, :style => :bold, :size => 10
        #pdf.text @devi.client.adresse, :size => 10
	@devi.client.adresse.each_line{ |line|
		#compteur_init += 1 
		pdf.text line, :size => 10	
	}
	pdf.text @devi.client.tva_intra, :size => 10 unless @devi.client.tva_intra.empty? && @devi.client.tva_intra.nil?
end


pdf.bounding_box [0,500], :width => 200 do
pdf.text "DEVIS", :style => :bold, :size => 10
pdf.text "Num√©ro : #{@devi.numdevis}", :size => 10
pdf.text "Date : #{@devi.created_at.strftime('%d/%m/%Y')}", :size => 10
pdf.text "Num√©ro client : #{@devi.client.numclient}", :size => 10
end

pdf.text "\n\n"

#pdf.bounding_box [0, 350], :width => 550 do 
	pdf.text "Description", :style => :bold, :size => 10
	unless @devi.description.nil?
		@devi.description.each_line{ |line|
			#compteur_init += 1
			pdf.text line, :size => 10
		}
	end
	Information.all.each do |information|
 	    unless @devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
		items = Array.new
		items_temp = Array.new
		#items.push([{:text => information.name, :colspan => 5}])
		@devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
			#items.push([Prawn::Table::Cell.new(:width=>20, :text=>"nicolas", :font_size=>10)]) unless informationligne.titleinformationligne.nil?
			informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price 
			#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	

			items_temp.push((information.name.nil? ? "" : informationligne.name), "fdfsdf"
      informationligne.number.to_s, 
      informationligne.unite.to_s, 
      format("%.2f",informationligne.price).to_s, 
      (informationligne.number.nil? && informationligne.price.nil? ? "" : (format("%.2f",informationligne.number * informationligne.price)).to_s
      ))	
		
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(pdf, :width=>20, :document => self, :borders => [:right], :text=>"")])
			  
				items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end
			items.push(items_temp)
			items_temp = Array.new
		}


    #headers = [Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Produit",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Nb",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Unit√©",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Prix ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10), Prawn::Table::Cell.new(pdf,
    #:width => 0,
    #:text => "Total ‚Ç¨",
    #:font_style => :bold,
    #:font_size => 10)] 	
   
    headers = Array.new 
    headers.push("Produit")
    headers.push("Nb")
    headers.push("Unit√©")
    headers.push("Prix ‚Ç¨")
    headers.push("Total ‚Ç¨")
    pdf.text "\n\n"
		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		#phrase_somme = Prawn::Table::Cell.new(pdf, :text => "Somme #{information.name}", :document => self, :font_size => 10, :font_style => :bold)
		#totalsumgeneral = Prawn::Table::Cell.new(pdf, :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_size => 10, :font_style => :bold)
		
    #items.push([phrase_somme,"","", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		#pdf.text items.length.to_s
		#Prawn::Table(pdf, items)
    pdf.table(items, :cell_style => { :borders => [:left, :right] , :draw_header => headers})
    #  :border_style => :grid, 
		#	:headers => headers,
	 	#	:column_widths => {0 => 270},
		#	:align => { 0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width => 535
		#end

		@totalsumgeneral = 0
	
  end
	
	pdf.text "\n\nTotal", :style => :bold, :size => 10
	items = Array.new
	items_temp = Array.new
        Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			items.push(items_temp.push(Prawn::Table::Cell.new(pdf, :text => information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(pdf, :text=>@hash_totalsnumgeneral[information.name], :width=>0, :font_size=>10)))	
			@totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}

   total = [[Prawn::Table::Cell.new(pdf,
    :text => "Total", :document => self, :font_style => :bold, :font_size => 10),
	   Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
	  
   unless @devi.lignedevis.empty?
	totallignedevis = Array.new
   	@devi.lignedevis.each{ |lignedevi|
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>lignedevi.name, :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>format("%.2f", lignedevi.prix).to_s, :font_style => :bold, :font_size => 10)])  
   	}
	totallignedevis.push([Prawn::Table::Cell.new(pdf, :text=>"HT", :font_style => :bold, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => :bold, :font_size => 10)])
   end
 
   tva = [[Prawn::Table::Cell.new(pdf,
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size => 10), 
	  Prawn::Table::Cell.new(pdf,
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_size => 10, :font_style => :bold)],
	  [Prawn::Table::Cell.new(pdf,
    :text => "TTC", :document => self, :font_style => :bold, :font_size => 10), Prawn::Table::Cell.new(pdf,
    :text =>format("%.2f" , (@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size => 10)
		]]
	items += total
        items += totallignedevis unless @devi.lignedevis.empty?
	items += tva if @devi.tva?

	
    headers_bis = [Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(pdf, :position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

	#pdf.table(items, :border_style => :grid,
#		:headers => headers_bis,
#		:column_widths => {0 => 430},
#		:align => {0 => :left, 1 => :right},
#		:width => 535)

#end
	pdf.text "\n\nValidit√© de l'offre : 1 mois\n\n", :size => 8

	pdf.text "Tous travaux non cit√©s en r√©f√©rence sur ce pr√©sent devis feront l'objet d'un avenant ou d'une facturation compl√©mentaire.\n\n", :size => 8

	pdf.text "Conditions de paiement :", :style => :bold, :size => 8
	pdf.text "#{@devi.cond_payment}\n\n", :size => 8

	pdf.text "Pour l'enregistrement de votre Commande :", :style => :bold, :size => 8
	pdf.text "Nous vous prions de bien vouloir nous retourner :", :size => 8
	pdf.text "Un exemplaire de ce devis dat√© et sign√© avec la mention 'Bon pour accord' qui fera alors office de bon de commande.", :size => 8
	pdf.text "Seules les commandes avec acompte sont fermes et d√©finitives. Ce devis annule et remplace s'il y a lieu, le ou les pr√©c√©dents.", :size => 8

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
end

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:268:in `block in retrieve_response_from_mimes'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:229:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:176:in `to_format'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:153:in `respond'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/responder.rb:146:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/mime_responds.rb:238:in `respond_with'
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/controllers/devis_controller.rb:27:in `show'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__1785448944356768870__process_action__661801020009097610__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__551997609733695813__call__4381092552748321371__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered devis/show.pdf.prawn (1.2ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:61: syntax error, unexpected tIDENTIFIER, expecting ')'
      informationligne.number.to_s, 
                      ^
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/devis/show.pdf.prawn:65: syntax error, unexpected ')', expecting :: or '[' or '.'
      ))	
        ^):
    58: 			#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(pdf, :width=>0,:text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(pdf, :width=>0, :text=>informationligne.number.to_s,:font_size=>10), Prawn::Table::Cell.new(pdf ,:text=>informationligne.unite.to_s,:width=>0,:font_size=>10), Prawn::Table::Cell.new(pdf, :text=>format("%.2f",informationligne.price).to_s, :width=>0,:font_size=>10), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(pdf, :text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))	
    59: 
    60: 			items_temp.push((information.name.nil? ? "" : informationligne.name), "fdfsdf"
    61:       informationligne.number.to_s, 
    62:       informationligne.unite.to_s, 
    63:       format("%.2f",informationligne.price).to_s, 
    64:       (informationligne.number.nil? && informationligne.price.nil? ? "" : (format("%.2f",informationligne.number * informationligne.price)).to_s
  app/controllers/devis_controller.rb:27:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.0ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:53:51 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (44.6ms)
Completed 200 OK in 49ms (Views: 46.2ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:53:58 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (46.4ms)
Completed 200 OK in 51ms (Views: 48.0ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:55:22 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (49.3ms)
Completed 200 OK in 53ms (Views: 50.7ms | ActiveRecord: 1.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:55:30 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.4ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (46.4ms)
Completed 200 OK in 50ms (Views: 47.6ms | ActiveRecord: 1.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:55:54 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (45.0ms)
Completed 200 OK in 49ms (Views: 46.6ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:55:59 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (48.4ms)
Completed 200 OK in 52ms (Views: 49.8ms | ActiveRecord: 1.1ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:56:38 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (162.6ms)
Completed 200 OK in 231ms (Views: 171.4ms | ActiveRecord: 4.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 19:58:39 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (44.7ms)
Completed 200 OK in 49ms (Views: 46.1ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 20:00:00 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (67.0ms)
Completed 200 OK in 71ms (Views: 68.4ms | ActiveRecord: 1.4ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-09 20:00:27 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (49.8ms)
Completed 200 OK in 54ms (Views: 51.3ms | ActiveRecord: 1.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-10 09:30:43 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (62.4ms)
Completed 200 OK in 67ms (Views: 64.0ms | ActiveRecord: 1.2ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-10 09:32:40 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/show.pdf.prawn (57.7ms)
Completed 200 OK in 62ms (Views: 59.3ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-10 09:32:48 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/templates/_error_form_devi.html.erb (0.6ms)
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35mTitleinformationligne Load (0.2ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered devis/templates/_form.html.erb (34.1ms)
  Rendered devis/edit.html.erb within layouts/application (44.0ms)
Completed 200 OK in 57ms (Views: 54.2ms | ActiveRecord: 1.5ms)


Started PUT "/clients/devis/11" for 127.0.0.1 at 2014-08-10 09:32:58 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"pGjJ+lJ1pL/MMDtTS9onSeLspno6HCNm9zl53Whd1w0=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0001-2014", "etat"=>"2", "description"=>"test", "informationlignes_attributes"=>{"0"=>{"name"=>"Int√©gration de la maquette html", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"9"}, "1"=>{"name"=>"Developpement de la partie r√©servation", "number"=>"1.0", "unite"=>"pce", "price"=>"700.0", "id"=>"11"}, "2"=>{"name"=>"Livre d'or", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"12"}, "3"=>{"name"=>"Syst√®me de gestion du contenu (backoffice)", "number"=>"1.0", "unite"=>"pce", "price"=>"400.0", "id"=>"13"}, "4"=>{"name"=>"Int√©gration du calendrier html", "number"=>"1.0", "unite"=>"pce", "price"=>"40.0", "id"=>"10"}}, "tva"=>"1", "cond_payment"=>"100% √† la livraison."}, "commit"=>"Mettre √† jour", "id"=>"11"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."id" IN (9, 11, 12, 13, 10)
  [1m[36m (0.3ms)[0m  [1mUPDATE "devis" SET "cond_payment" = '100% √† la livraison.', "updated_at" = '2014-08-10 07:32:58.129612' WHERE "devis"."id" = 11[0m
  [1m[35m (1.0ms)[0m  commit transaction
Redirected to http://localhost:3002/clients/devis?client_id=1
Completed 302 Found in 13ms (ActiveRecord: 1.7ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-10 09:32:58 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.2ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/index.html.erb within layouts/application (9.3ms)
Completed 200 OK in 25ms (Views: 21.6ms | ActiveRecord: 0.7ms)


Started GET "/" for 127.0.0.1 at 2014-08-10 09:33:03 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (3.0ms)
Completed 200 OK in 12ms (Views: 10.6ms | ActiveRecord: 0.3ms)


Started GET "/clients/1/edit" for 127.0.0.1 at 2014-08-10 09:33:15 +0200
Processing by ClientsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT 1[0m  [["id", "1"]]
  Rendered clients/_form.html.erb (2.5ms)
  Rendered clients/edit.html.erb within layouts/application (5.6ms)
Completed 200 OK in 18ms (Views: 15.9ms | ActiveRecord: 0.3ms)


Started PUT "/clients/1" for 127.0.0.1 at 2014-08-10 09:33:20 +0200
Processing by ClientsController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"pGjJ+lJ1pL/MMDtTS9onSeLspno6HCNm9zl53Whd1w0=", "client"=>{"numclient"=>"1", "nameentreprise"=>"gerard", "adresse"=>"Gerard-cayla@wanadoo.fr", "namerefcontact"=>"gerard", "tva_intra"=>"", "affacturage"=>"0"}, "commit"=>"Mettre √† jour", "id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "clients" SET "tva_intra" = '', "updated_at" = '2014-08-10 07:33:20.995945' WHERE "clients"."id" = 1[0m
  [1m[35m (2.7ms)[0m  commit transaction
Redirected to http://localhost:3002/clients
Completed 302 Found in 7ms (ActiveRecord: 3.2ms)


Started GET "/clients" for 127.0.0.1 at 2014-08-10 09:33:21 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (1.9ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.3ms)


Started GET "/clients/1/edit" for 127.0.0.1 at 2014-08-10 09:33:23 +0200
Processing by ClientsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = ? LIMIT 1  [["id", "1"]]
  Rendered clients/_form.html.erb (1.6ms)
  Rendered clients/edit.html.erb within layouts/application (3.0ms)
Completed 200 OK in 11ms (Views: 9.6ms | ActiveRecord: 0.2ms)


Started GET "/clients/devis" for 127.0.0.1 at 2014-08-10 09:37:56 +0200
Processing by DevisController#index as HTML
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/index.html.erb within layouts/application (6.7ms)
Completed 200 OK in 17ms (Views: 15.3ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-10 09:37:57 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/templates/_form.html.erb (16.2ms)
  Rendered devis/edit.html.erb within layouts/application (20.0ms)
Completed 200 OK in 30ms (Views: 27.7ms | ActiveRecord: 1.2ms)


Started GET "/clients/devis/11/edit" for 127.0.0.1 at 2014-08-10 09:38:04 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"11"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.0ms)
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36mTitleinformationligne Load (0.1ms)[0m  [1mSELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35mTitleinformationligne Load (0.1ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/templates/_form.html.erb (15.8ms)
  Rendered devis/edit.html.erb within layouts/application (18.3ms)
Completed 200 OK in 26ms (Views: 23.8ms | ActiveRecord: 1.2ms)


Started PUT "/clients/devis/11" for 127.0.0.1 at 2014-08-10 09:38:29 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"pGjJ+lJ1pL/MMDtTS9onSeLspno6HCNm9zl53Whd1w0=", "devi"=>{"created_at(3i)"=>"8", "created_at(2i)"=>"8", "created_at(1i)"=>"2014", "numdevis"=>"D0001-2014", "etat"=>"2", "description"=>"Developoppement de site internet de gestion de location", "informationlignes_attributes"=>{"0"=>{"name"=>"Int√©gration de la maquette html", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"9"}, "1"=>{"name"=>"Developpement de la partie r√©servation", "number"=>"1.0", "unite"=>"pce", "price"=>"700.0", "id"=>"11"}, "2"=>{"name"=>"Livre d'or", "number"=>"1.0", "unite"=>"pce", "price"=>"200.0", "id"=>"12"}, "3"=>{"name"=>"Syst√®me de gestion du contenu (backoffice)", "number"=>"1.0", "unite"=>"pce", "price"=>"400.0", "id"=>"13"}, "4"=>{"name"=>"Int√©gration du calendrier html", "number"=>"1.0", "unite"=>"pce", "price"=>"40.0", "id"=>"10"}}, "tva"=>"1", "cond_payment"=>"100% √† la livraison."}, "commit"=>"Mettre √† jour", "id"=>"11"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "11"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."id" IN (9, 11, 12, 13, 10)[0m
  [1m[35m (0.3ms)[0m  UPDATE "devis" SET "description" = 'Developoppement de site internet de gestion de location', "updated_at" = '2014-08-10 07:38:29.853260' WHERE "devis"."id" = 11
  [1m[36m (2.7ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3002/clients/devis?client_id=1
Completed 302 Found in 9ms (ActiveRecord: 3.4ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-08-10 09:38:29 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (6.2ms)
Completed 200 OK in 15ms (Views: 12.8ms | ActiveRecord: 0.6ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-08-10 09:38:32 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (61.9ms)
Completed 200 OK in 66ms (Views: 63.4ms | ActiveRecord: 1.1ms)
DEPRECATION WARNING: Passing a block to devise_for is deprecated. Please remove the block from devise_for (only the block, the call to devise_for must still exist) and call devise_scope :user do ... end with the block instead. (called from block in <top (required)> at /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/config/routes.rb:2)


Started GET "/" for 127.0.0.1 at 2014-09-14 16:15:15 +0200
Processing by ClientsController#index as HTML
Completed 401 Unauthorized in 6ms


Started GET "/users/sign_in" for 127.0.0.1 at 2014-09-14 16:15:16 +0200
Processing by Devise::SessionsController#new as HTML
  Rendered devise/sessions/new.html.erb within layouts/application (6.0ms)
Completed 200 OK in 52ms (Views: 20.8ms | ActiveRecord: 2.2ms)


Started POST "/users/sign_in" for 127.0.0.1 at 2014-09-14 16:15:21 +0200
Processing by Devise::SessionsController#create as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"/q3t5FZ0GVFpYCSe/08clpr26aQck2kzFCy/XwKx6Vc=", "user"=>{"username"=>"nicolas", "password"=>"[FILTERED]", "remember_me"=>"0"}, "commit"=>"Sign in"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."username" = 'nicolas' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.3ms)[0m  [1mUPDATE "users" SET "last_sign_in_at" = '2014-08-09 08:06:32.471739', "current_sign_in_at" = '2014-09-14 14:15:21.552244', "sign_in_count" = 5, "updated_at" = '2014-09-14 14:15:21.553101' WHERE "users"."id" = 1[0m
  [1m[35m (1.0ms)[0m  commit transaction
Redirected to http://localhost:3002/
Completed 302 Found in 94ms (ActiveRecord: 0.0ms)


Started GET "/" for 127.0.0.1 at 2014-09-14 16:15:21 +0200
Processing by ClientsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mClient Load (0.6ms)[0m  SELECT "clients".* FROM "clients" ORDER BY nameentreprise
  Rendered clients/index.html.erb within layouts/application (12.6ms)
Completed 200 OK in 33ms (Views: 25.9ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis" for 127.0.0.1 at 2014-09-14 16:15:23 +0200
Processing by DevisController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.7ms)[0m  SELECT "devis".* FROM "devis" WHERE ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis
  [1m[36mInformationligne Load (1.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11[0m
  [1m[35mLignedevi Load (0.5ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  [1m[36mClient Load (0.3ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/index.html.erb within layouts/application (42.5ms)
Completed 200 OK in 79ms (Views: 50.4ms | ActiveRecord: 3.7ms)


Started GET "/" for 127.0.0.1 at 2014-09-14 16:15:27 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.3ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (4.0ms)
Completed 200 OK in 16ms (Views: 12.5ms | ActiveRecord: 0.7ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-09-14 16:15:28 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.3ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mLignedevi Load (0.2ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (10.2ms)
Completed 200 OK in 21ms (Views: 17.8ms | ActiveRecord: 1.0ms)


Started GET "/clients/devis/new?client_id=1" for 127.0.0.1 at 2014-09-14 16:15:30 +0200
Processing by DevisController#new as HTML
  Parameters: {"client_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE (created_at >= '2014-01-01 00:00:00')
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (2.0ms)[0m  INSERT INTO "devis" ("client_id", "cond_payment", "created_at", "description", "etat", "numdevis", "tva", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?)  [["client_id", 1], ["cond_payment", "40% √† la commande, 60% √† la livraison."], ["created_at", Sun, 14 Sep 2014 14:15:30 UTC +00:00], ["description", nil], ["etat", 1], ["numdevis", "D0002-2014"], ["tva", true], ["updated_at", Sun, 14 Sep 2014 14:15:30 UTC +00:00]]
  [1m[36m (0.7ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3002/clients/devis/12/edit
Completed 302 Found in 10ms (ActiveRecord: 3.1ms)


Started GET "/clients/devis/12/edit" for 127.0.0.1 at 2014-09-14 16:15:30 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"12"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "12"]]
  [1m[35mClient Load (0.4ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.7ms)
  [1m[36mInformation Load (0.5ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.8ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 12 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 12[0m
  Rendered devis/templates/_form.html.erb (42.4ms)
  Rendered devis/edit.html.erb within layouts/application (53.1ms)
Completed 200 OK in 67ms (Views: 60.5ms | ActiveRecord: 3.6ms)


Started PUT "/clients/devis/12" for 127.0.0.1 at 2014-09-14 16:15:33 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"/TpxMX3/vUajPGbyytvjZ69jOBhPoCmW7QuT//JpFGw=", "devi"=>{"created_at(3i)"=>"14", "created_at(2i)"=>"9", "created_at(1i)"=>"2014", "numdevis"=>"D0002-2014", "etat"=>"1", "description"=>"vdvcvds", "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "add_ligne_informationid_1_deviid_12"=>"Ajouter une ligne", "id"=>"12"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "12"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mUPDATE "devis" SET "description" = 'vdvcvds', "created_at" = '2014-09-14 00:00:00.000000', "updated_at" = '2014-09-14 14:15:33.550309' WHERE "devis"."id" = 12[0m
  [1m[35m (0.7ms)[0m  commit transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "informationlignes" ("devi_id", "information_id", "name", "number", "position", "price", "unite") VALUES (?, ?, ?, ?, ?, ?, ?)  [["devi_id", 12], ["information_id", 1], ["name", nil], ["number", 0.0], ["position", nil], ["price", 0.0], ["unite", "pce"]]
  [1m[36m (0.6ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3002/clients/devis/12/edit
Completed 302 Found in 8ms (ActiveRecord: 2.2ms)


Started GET "/clients/devis/12/edit" for 127.0.0.1 at 2014-09-14 16:15:33 +0200
Processing by DevisController#edit as HTML
  Parameters: {"id"=>"12"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "12"]]
  [1m[35mClient Load (0.3ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/templates/_error_form_devi.html.erb (0.1ms)
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 12 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 12[0m
  [1m[35mTitleinformationligne Load (0.5ms)[0m  SELECT "titleinformationlignes".* FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 14
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."information_id" = 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 12[0m
  Rendered devis/templates/_form.html.erb (19.9ms)
  Rendered devis/edit.html.erb within layouts/application (25.5ms)
Completed 200 OK in 38ms (Views: 34.2ms | ActiveRecord: 2.5ms)


Started PUT "/clients/devis/12" for 127.0.0.1 at 2014-09-14 16:15:50 +0200
Processing by DevisController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"/TpxMX3/vUajPGbyytvjZ69jOBhPoCmW7QuT//JpFGw=", "devi"=>{"created_at(3i)"=>"14", "created_at(2i)"=>"9", "created_at(1i)"=>"2014", "numdevis"=>"D0002-2014", "etat"=>"1", "description"=>"vdvcvds", "informationlignes_attributes"=>{"0"=>{"name"=>"fdsfdsfsd", "number"=>"1", "unite"=>"pce", "price"=>"200", "id"=>"14"}}, "tva"=>"1", "cond_payment"=>"40% √† la commande, 60% √† la livraison."}, "commit"=>"Mettre √† jour", "id"=>"12"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "12"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mInformationligne Load (0.3ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 12 AND "informationlignes"."id" IN (14)[0m
  [1m[35m (0.6ms)[0m  UPDATE "informationlignes" SET "name" = 'fdsfdsfsd', "number" = 1.0, "price" = 200.0 WHERE "informationlignes"."id" = 14
  [1m[36m (2.2ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3002/clients/devis?client_id=1
Completed 302 Found in 14ms (ActiveRecord: 3.6ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-09-14 16:15:50 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.3ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.3ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 12[0m
  [1m[35mLignedevi Load (0.2ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 12
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/index.html.erb within layouts/application (15.0ms)
Completed 200 OK in 27ms (Views: 22.9ms | ActiveRecord: 1.4ms)


Started DELETE "/clients/devis/12" for 127.0.0.1 at 2014-09-14 16:15:55 +0200
Processing by DevisController#destroy as HTML
  Parameters: {"authenticity_token"=>"/TpxMX3/vUajPGbyytvjZ69jOBhPoCmW7QuT//JpFGw=", "id"=>"12"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "12"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mLignedevi Load (0.2ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 12[0m
  [1m[35mFacture Load (0.6ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."devi_id" = 12
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 12[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "informationlignes" WHERE "informationlignes"."id" = ?  [["id", 14]]
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 60ms

NoMethodError (undefined method `id' for #<Class:0x00000101ab1740>):
  app/models/pvrecette.rb:6:in `<class:Pvrecette>'
  app/models/pvrecette.rb:1:in `<top (required)>'
  app/controllers/devis_controller.rb:143:in `destroy'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (8.1ms)


Started GET "/clients/devis?client_id=1" for 127.0.0.1 at 2014-09-14 16:17:23 +0200
Processing by DevisController#index as HTML
  Parameters: {"client_id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."client_id" = 1 AND ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  [1m[35mClient Load (0.3ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 12[0m
  [1m[35mLignedevi Load (0.2ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 12
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  Rendered devis/index.html.erb within layouts/application (47.4ms)
Completed 200 OK in 102ms (Views: 53.9ms | ActiveRecord: 3.4ms)


Started DELETE "/clients/devis/12" for 127.0.0.1 at 2014-09-14 16:17:28 +0200
Processing by DevisController#destroy as HTML
  Parameters: {"authenticity_token"=>"/TpxMX3/vUajPGbyytvjZ69jOBhPoCmW7QuT//JpFGw=", "id"=>"12"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m  [["id", "12"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36mLignedevi Load (0.1ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 12[0m
  [1m[35mFacture Load (0.2ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."devi_id" = 12
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 12[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "informationlignes" WHERE "informationlignes"."id" = ?  [["id", 14]]
  [1m[36mPvrecette Load (0.1ms)[0m  [1mSELECT "pvrecettes".* FROM "pvrecettes" WHERE "pvrecettes"."devi_id" = 12[0m
  [1m[35m (0.5ms)[0m  rollback transaction
Completed 500 Internal Server Error in 29ms

NoMethodError (undefined method `id' for #<Class:0x00000101ac3c10>):
  app/models/bonlivraison.rb:4:in `<class:Bonlivraison>'
  app/models/bonlivraison.rb:1:in `<top (required)>'
  app/controllers/devis_controller.rb:143:in `destroy'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (6.7ms)


Started DELETE "/clients/devis/12" for 127.0.0.1 at 2014-09-14 16:17:59 +0200
Processing by DevisController#destroy as HTML
  Parameters: {"authenticity_token"=>"/TpxMX3/vUajPGbyytvjZ69jOBhPoCmW7QuT//JpFGw=", "id"=>"12"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.2ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "12"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mLignedevi Load (0.1ms)[0m  SELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 12
  [1m[36mFacture Load (0.1ms)[0m  [1mSELECT "factures".* FROM "factures" WHERE "factures"."devi_id" = 12[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 12
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "informationlignes" WHERE "informationlignes"."id" = ?[0m  [["id", 14]]
  [1m[35mPvrecette Load (0.1ms)[0m  SELECT "pvrecettes".* FROM "pvrecettes" WHERE "pvrecettes"."devi_id" = 12
  [1m[36mBonlivraison Load (0.1ms)[0m  [1mSELECT "bonlivraisons".* FROM "bonlivraisons" WHERE "bonlivraisons"."devi_id" = 12[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "devis" WHERE "devis"."id" = ?  [["id", 12]]
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3002/clients/devis
Completed 302 Found in 86ms (ActiveRecord: 0.0ms)


Started GET "/clients/devis" for 127.0.0.1 at 2014-09-14 16:17:59 +0200
Processing by DevisController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mLignedevi Load (0.2ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (19.4ms)
Completed 200 OK in 29ms (Views: 26.1ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis/D0001-2014.pdf?id_devi=11" for 127.0.0.1 at 2014-09-14 17:36:55 +0200
Processing by DevisController#show as PDF
  Parameters: {"id_devi"=>"11", "id"=>"D0001-2014"}
  [1m[36mUser Load (2.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.3ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 AND "devis"."numdevis" = 'D0001-2014' LIMIT 1
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.5ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered devis/show.pdf.prawn (276.5ms)
Completed 200 OK in 305ms (Views: 284.2ms | ActiveRecord: 4.6ms)


Started GET "/" for 127.0.0.1 at 2014-09-14 18:20:20 +0200
Processing by ClientsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" ORDER BY nameentreprise[0m
  Rendered clients/index.html.erb within layouts/application (6.0ms)
Completed 200 OK in 20ms (Views: 16.9ms | ActiveRecord: 0.8ms)


Started GET "/clients/devis/factures" for 127.0.0.1 at 2014-09-14 18:20:22 +0200
Processing by FacturesController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mFacture Load (0.8ms)[0m  [1mSELECT "factures".* FROM "factures" WHERE ("factures"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numfacture[0m
  Rendered factures/index.html.erb within layouts/application (3.4ms)
Completed 200 OK in 17ms (Views: 12.9ms | ActiveRecord: 1.1ms)


Started GET "/clients/devis" for 127.0.0.1 at 2014-09-14 18:20:24 +0200
Processing by DevisController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE ("devis"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numdevis[0m
  [1m[35mInformationligne Load (0.4ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mLignedevi Load (0.2ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  Rendered devis/index.html.erb within layouts/application (10.7ms)
Completed 200 OK in 24ms (Views: 20.0ms | ActiveRecord: 1.2ms)


Started GET "/clients/devis/factures?devi_id=11" for 127.0.0.1 at 2014-09-14 18:20:26 +0200
Processing by FacturesController#index as HTML
  Parameters: {"devi_id"=>"11"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.2ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mFacture Load (0.4ms)[0m  [1mSELECT "factures".* FROM "factures" WHERE "factures"."devi_id" = 11 AND ("factures"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numfacture[0m
  Rendered factures/index.html.erb within layouts/application (3.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1
Completed 200 OK in 19ms (Views: 15.4ms | ActiveRecord: 1.0ms)


Started GET "/clients/devis/factures/new?devi_id=11" for 127.0.0.1 at 2014-09-14 18:20:28 +0200
Processing by FacturesController#new as HTML
  Parameters: {"devi_id"=>"11"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.2ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", 11]]
  [1m[36mFacture Load (0.4ms)[0m  [1mSELECT "factures".* FROM "factures" WHERE (created_at >= '2014-01-01 00:00:00')[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "factures" ("accompte", "annulation", "choixrib", "cond_reglement", "created_at", "datepaiement", "datepaiementcheck", "devi_id", "numcommande", "numfacture", "proforma", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [["accompte", 100], ["annulation", false], ["choixrib", "rib"], ["cond_reglement", "net √† r√©ception de la facture."], ["created_at", Sun, 14 Sep 2014 16:20:28 UTC +00:00], ["datepaiement", nil], ["datepaiementcheck", false], ["devi_id", 11], ["numcommande", nil], ["numfacture", "F0001-2014"], ["proforma", false], ["updated_at", Sun, 14 Sep 2014 16:20:28 UTC +00:00]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
Redirected to http://localhost:3002/clients/devis/factures/1/edit
Completed 302 Found in 26ms (ActiveRecord: 3.6ms)


Started GET "/clients/devis/factures/1/edit" for 127.0.0.1 at 2014-09-14 18:20:28 +0200
Processing by FacturesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mFacture Load (0.1ms)[0m  [1mSELECT "factures".* FROM "factures" WHERE "factures"."id" = ? LIMIT 1[0m  [["id", "1"]]
  Rendered factures/_form.html.erb (13.3ms)
  Rendered factures/edit.html.erb within layouts/application (17.8ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."id" = ? LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."id" = ? LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
Completed 200 OK in 33ms (Views: 30.6ms | ActiveRecord: 0.5ms)


Started PUT "/clients/devis/factures/1" for 127.0.0.1 at 2014-09-14 18:20:35 +0200
Processing by FacturesController#update as HTML
  Parameters: {"utf8"=>"‚úì", "authenticity_token"=>"/TpxMX3/vUajPGbyytvjZ69jOBhPoCmW7QuT//JpFGw=", "facture"=>{"devi_id"=>"11", "created_at(3i)"=>"14", "created_at(2i)"=>"9", "created_at(1i)"=>"2014", "datepaiementcheck"=>"0", "datepaiement(3i)"=>"14", "datepaiement(2i)"=>"9", "datepaiement(1i)"=>"2014", "numfacture"=>"F0001-2014", "proforma"=>"0", "annulation"=>"0", "numcommande"=>"test", "choixrib"=>"rib", "accompte"=>"100", "cond_reglement"=>"net √† r√©ception de la facture."}, "commit"=>"mettre √† jour cette facture", "id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mFacture Load (0.1ms)[0m  [1mSELECT "factures".* FROM "factures" WHERE "factures"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mUPDATE "factures" SET "numcommande" = 'test', "created_at" = '2014-09-14 00:00:00.000000', "datepaiement" = '2014-09-14 00:00:00.000000', "updated_at" = '2014-09-14 16:20:35.948087' WHERE "factures"."id" = 1[0m
  [1m[35m (1.0ms)[0m  commit transaction
Redirected to http://localhost:3002/clients/devis/factures?devi_id=11
Completed 302 Found in 9ms (ActiveRecord: 2.0ms)


Started GET "/clients/devis/factures?devi_id=11" for 127.0.0.1 at 2014-09-14 18:20:35 +0200
Processing by FacturesController#index as HTML
  Parameters: {"devi_id"=>"11"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.1ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1  [["id", "11"]]
  [1m[36mFacture Load (0.3ms)[0m  [1mSELECT "factures".* FROM "factures" WHERE "factures"."devi_id" = 11 AND ("factures"."created_at" BETWEEN '2014-01-01 00:00:00' AND '2015-01-01 00:00:00') ORDER BY numfacture[0m
  [1m[35mDevi Load (0.2ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11
  [1m[36mLignedevi Load (0.2ms)[0m  [1mSELECT "lignedevis".* FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered factures/templates/_tab_liste_factures.html.erb (11.3ms)
  Rendered factures/index.html.erb within layouts/application (16.1ms)
  [1m[35mCACHE (0.0ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = ? LIMIT 1
Completed 200 OK in 30ms (Views: 27.2ms | ActiveRecord: 1.4ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 18:20:39 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
Completed 500 Internal Server Error in 1374ms

NoMethodError (undefined method `request_uri' for #<ActionDispatch::Request:0x00000101b592b0>):
  app/controllers/factures_controller.rb:34:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (1231.5ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 18:27:14 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mFacture Load (0.1ms)[0m  [1mSELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1[0m
Completed 500 Internal Server Error in 39ms

NameError (uninitialized constant FacturesController::RAILS_ROOT):
  app/controllers/factures_controller.rb:59:in `show'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.3ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (5.3ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 18:28:26 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mFacture Load (0.1ms)[0m  [1mSELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1[0m
  Rendered factures/show.pdf.prawn (24.2ms)
Completed 500 Internal Server Error in 73ms

ActionView::Template::Error (cannot load such file -- prawn/layout):
    1: require 'prawn'
    2: require 'prawn/layout'
    3: require 'prawn/core'
    4: 
    5: #pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"
  app/views/factures/show.pdf.prawn:2:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2162083780'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.4ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 18:28:58 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mFacture Load (0.1ms)[0m  [1mSELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.3ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.1ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered factures/show.pdf.prawn (96.3ms)
Completed 500 Internal Server Error in 100ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    76: 
    77:  			@facture.devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    78: 				informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price
    79: 				items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0, :text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:text=>informationligne.number, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>informationligne.unite, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :font_size=>10, :width=>0), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
    80: 				
    81: 		     unless informationligne.titleinformationlignes.empty?	
    82: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
  app/views/factures/show.pdf.prawn:79:in `new'
  app/views/factures/show.pdf.prawn:79:in `block (2 levels) in _app_views_factures_show_pdf_prawn___2601126669109534190_2161759460'
  app/views/factures/show.pdf.prawn:77:in `each'
  app/views/factures/show.pdf.prawn:77:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2161759460'
  app/views/factures/show.pdf.prawn:66:in `each'
  app/views/factures/show.pdf.prawn:66:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2161759460'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.7ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:03:02 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
ERROR: compiling _app_views_factures_show_pdf_prawn___2601126669109534190_2170214600 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:158: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:212: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:214: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_factures_show_pdf_prawn___2601126669109534190_2170214600(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "factures/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'

#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"

#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "Emeraude composites", :size => 13, :style => :bold
	pdf.text "24 bis rue de la truite", :size => 10
	pdf.text "22400 Co√´temieux", :size => 10
	pdf.text "06 76 54 41 94", :size=> 10
	pdf.text "yann@emeraudecomposites.fr", :size => 10
	pdf.text "\n"
        pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	pdf.text "RM 22 803 795 301", :size => 10
	pdf.text "Siret 803 795 000 16", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end
#compteur_old = 28 
compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @facture.devi.client.namerefcontact, :size => 10
	pdf.text @facture.devi.client.nameentreprise, :style => :bold, :size => 10
	@facture.devi.client.adresse.each_line{ |line|
		compteur_init += 1 
		pdf.text line, :size => 10
	}
	pdf.text @facture.devi.client.tva_intra, :size => 10 unless @facture.devi.client.tva_intra.empty? && @facture.devi.client.tva_intra.nil? 
end

	if compteur_init > 50
		compteur_init = 0
	end


pdf.bounding_box [0,500], :width => 200 do
	pdf.text "FACTURE #{@facture.proforma ? "PRO FORMA" : ""}", :style => :bold, :size => 10
	pdf.text "Num√©ro : #{@facture.numfacture}", :size => 10
	pdf.text "Date : #{@facture.created_at.strftime('%d/%m/%Y')}", :size => 10
        pdf.text "Devis : #{@facture.devi.numdevis}", :size => 10
	pdf.text "Num√©ro client : #{@facture.devi.client.numclient}", :size => 10
        #pdf.text("Commande : #{@facture.numcommande}", :size => 10) unless @facture.numcommande.nil? || @facture.numcommande.empty?
	unless @facture.numcommande.nil? || @facture.numcommande.empty?
		@facture.numcommande.each_line{ |line|
			compteur_init += 1
			pdf.text line, :size => 10
		}	
	end
end

	if compteur_init > 50
		compteur_init = 0
	end

pdf.text "\n\n"
	pdf.text "Description", :style => :bold, :size => 10
	#pdf.text((@facture.devi.description.nil? ? "" : @facture.devi.description), :size => 10)
	unless @facture.devi.description.nil?
		@facture.devi.description.each_line{ |line|
			compteur_init += 1
			pdf.text line, :size => 10
		}
	end

  headers = Array.new
  headers.push("Produit")
  headers.push("Nb")
  headers.push("Unit√©")
  headers.push("Prix ‚Ç¨")
  headers.push("Total ‚Ç¨")
	Information.all.each{ |information|
		compteur_init += 1
        	unless @facture.devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
			items = Array.new
      itams.push(headers)
			items_temp = Array.new
			unless information.name.nil?
				information.name.each_line{ |line|
					compteur_init += 1
				}
			end

 			@facture.devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
				informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price
				#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0, :text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:text=>informationligne.number, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>informationligne.unite, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :font_size=>10, :width=>0), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
				
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(:width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:right], :text=>"")])
			  items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end

				items.push(items_temp)
				items_temp = Array.new
				compteur_init += 1
			}

		

		#pdf.text compteur_init.to_s
		#pdf.text compteur_old.to_s
		#if (compteur_init > 40 || (compteur_init + compteur_old) > 40) && (compteur_old != 28 || compteur_init < 40)
                #      if compteur_init > 40
		#	dif_compteur = (50 - compteur_old) + 10
		#      else
		#	dif_compteur = (50 - (compteur_old + compteur_init)) + 20
		#      end
		#	0.upto(dif_compteur){ |i|
		#		pdf.text "\n"			
		#	}
		#	compteur_init = compteur_init - compteur_old
		#else
			pdf.text "\n\n"
		#end

		if compteur_init > 50
			compteur_init = 0
		end

    		#headers = [Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Produit",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Nb",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Unit√©",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Prix ‚Ç¨",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Total ‚Ç¨",
    		#:font_style => :bold,
    		#:font_size => 10)] 

		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		#phrase_somme = Prawn::Table::Cell.new(:text => "Somme #{information.name}", :document => self, :font_style => :bold, :font_size=>10)
		#totalsumgeneral = Prawn::Table::Cell.new(:text => format("%.2f", @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size=>10)
		#items.push([phrase_somme, "", "", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #pdf.table items, :border_style => :grid,
		#	:headers => headers,
		#	:column_widths => {0 => 270},
		#	:align => {0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width=> 535
		#end
		@totalsumgeneral = 0
		#compteur_old = compteur_init
	}

	#pdf.text compteur_init.to_s
	#pdf.text compteur_old.to_s
	#if compteur_init  > 19 && compteur_old != 28
	#	dif_compteur = ((compteur_old + compteur_init) > 28 && (compteur_old + compteur_init) < 51) ? 5 : (50 - compteur_init)
	#	0.upto(dif_compteur){ |i|
	#		pdf.text "\n"			
	#	}
	#		compteur_init = 0
	#else
	pdf.text "\n\n"
	#end

	if compteur_init > 50
		compteur_init = 0
	end

  header_bis = Array.new
  header_bis.push("Produit")
  header_bis.push("Total net ‚Ç¨")

	pdf.text "Total", :style => :bold, :font_size=>10
	items = Array.new
  items.push(header_bis)
	items_temp = Array.new
	Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			#items.push(items_temp.push(Prawn::Table::Cell.new(:text=>information.name.nil? ? "" : information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(:text=>@hash_totalsnumgeneral[information.name], :width => 0, :font_size=>10)))
			items.push(items_temp.push(information.name, @hash_totalsnumgeneral[information.name]))
      @totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}
 
   #total = [[Prawn::Table::Cell.new(
   # :text => "Total #{@facture.devi.tva ? "" : "*"}", :document => self, :font_style => (@facture.accompte == 100 ? :bold : :normal), :font_size=>10),
	 #  Prawn::Table::Cell.new(
   # :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => (@facture.accompte == 100 ? :bold : :normal), :font_size=>10)]]

   total = [["Total", format("%.2f",@totalsumgeneral).to_s]]
 
     unless @facture.devi.lignedevis.empty?
    	totallignedevis = Array.new
	@facture.devi.lignedevis.each{ |lignedevi| 
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([lignedevi.name,format("%.2f", lignedevi.prix).to_s])  
	}

  totallignedevis.push(["HT",@totalsumgeneral.to_s])
	#totallignedevis.push([Prawn::Table::Cell.new(:text=>"HT", :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10)])
     end 

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__3574332544021311878__process_action__913916791702894930__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__2180803471000393099__call__3895209263182192782__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered factures/show.pdf.prawn (1.0ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:158: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:212: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:214: syntax error, unexpected end-of-input, expecting '}'):
    155: 		#end
    156: 		@totalsumgeneral = 0
    157: 		#compteur_old = compteur_init
    158: 	}
    159: 
    160: 	#pdf.text compteur_init.to_s
    161: 	#pdf.text compteur_old.to_s
  actionpack (3.2.0) lib/action_view/template.rb:285:in `module_eval'
  actionpack (3.2.0) lib/action_view/template.rb:285:in `compile'
  actionpack (3.2.0) lib/action_view/template.rb:233:in `compile!'
  actionpack (3.2.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (3.2.0) lib/active_support/notifications.rb:125:in `instrument'
  actionpack (3.2.0) lib/action_view/template.rb:141:in `render'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
  actionpack (3.2.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:39:in `render_template'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:12:in `render'
  actionpack (3.2.0) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.0) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:109:in `_render_template'
  actionpack (3.2.0) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.0) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.0) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.0) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (3.2.0) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.0) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.0) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.0) lib/active_support/callbacks.rb:425:in `_run__3574332544021311878__process_action__913916791702894930__callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.0) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.0) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.0) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.0) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.0) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:66:in `call'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:570:in `call'
  bullet (4.11.3) lib/bullet/rack.rb:10:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.0) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `_run__2180803471000393099__call__3895209263182192782__callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.0) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.3ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:03:03 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
ERROR: compiling _app_views_factures_show_pdf_prawn___2601126669109534190_2170214600 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:158: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:212: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:214: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_factures_show_pdf_prawn___2601126669109534190_2170214600(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "factures/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'

#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"

#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "Emeraude composites", :size => 13, :style => :bold
	pdf.text "24 bis rue de la truite", :size => 10
	pdf.text "22400 Co√´temieux", :size => 10
	pdf.text "06 76 54 41 94", :size=> 10
	pdf.text "yann@emeraudecomposites.fr", :size => 10
	pdf.text "\n"
        pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	pdf.text "RM 22 803 795 301", :size => 10
	pdf.text "Siret 803 795 000 16", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end
#compteur_old = 28 
compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @facture.devi.client.namerefcontact, :size => 10
	pdf.text @facture.devi.client.nameentreprise, :style => :bold, :size => 10
	@facture.devi.client.adresse.each_line{ |line|
		compteur_init += 1 
		pdf.text line, :size => 10
	}
	pdf.text @facture.devi.client.tva_intra, :size => 10 unless @facture.devi.client.tva_intra.empty? && @facture.devi.client.tva_intra.nil? 
end

	if compteur_init > 50
		compteur_init = 0
	end


pdf.bounding_box [0,500], :width => 200 do
	pdf.text "FACTURE #{@facture.proforma ? "PRO FORMA" : ""}", :style => :bold, :size => 10
	pdf.text "Num√©ro : #{@facture.numfacture}", :size => 10
	pdf.text "Date : #{@facture.created_at.strftime('%d/%m/%Y')}", :size => 10
        pdf.text "Devis : #{@facture.devi.numdevis}", :size => 10
	pdf.text "Num√©ro client : #{@facture.devi.client.numclient}", :size => 10
        #pdf.text("Commande : #{@facture.numcommande}", :size => 10) unless @facture.numcommande.nil? || @facture.numcommande.empty?
	unless @facture.numcommande.nil? || @facture.numcommande.empty?
		@facture.numcommande.each_line{ |line|
			compteur_init += 1
			pdf.text line, :size => 10
		}	
	end
end

	if compteur_init > 50
		compteur_init = 0
	end

pdf.text "\n\n"
	pdf.text "Description", :style => :bold, :size => 10
	#pdf.text((@facture.devi.description.nil? ? "" : @facture.devi.description), :size => 10)
	unless @facture.devi.description.nil?
		@facture.devi.description.each_line{ |line|
			compteur_init += 1
			pdf.text line, :size => 10
		}
	end

  headers = Array.new
  headers.push("Produit")
  headers.push("Nb")
  headers.push("Unit√©")
  headers.push("Prix ‚Ç¨")
  headers.push("Total ‚Ç¨")
	Information.all.each{ |information|
		compteur_init += 1
        	unless @facture.devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
			items = Array.new
      itams.push(headers)
			items_temp = Array.new
			unless information.name.nil?
				information.name.each_line{ |line|
					compteur_init += 1
				}
			end

 			@facture.devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
				informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price
				#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0, :text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:text=>informationligne.number, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>informationligne.unite, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :font_size=>10, :width=>0), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
				
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(:width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:right], :text=>"")])
			  items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end

				items.push(items_temp)
				items_temp = Array.new
				compteur_init += 1
			}

		

		#pdf.text compteur_init.to_s
		#pdf.text compteur_old.to_s
		#if (compteur_init > 40 || (compteur_init + compteur_old) > 40) && (compteur_old != 28 || compteur_init < 40)
                #      if compteur_init > 40
		#	dif_compteur = (50 - compteur_old) + 10
		#      else
		#	dif_compteur = (50 - (compteur_old + compteur_init)) + 20
		#      end
		#	0.upto(dif_compteur){ |i|
		#		pdf.text "\n"			
		#	}
		#	compteur_init = compteur_init - compteur_old
		#else
			pdf.text "\n\n"
		#end

		if compteur_init > 50
			compteur_init = 0
		end

    		#headers = [Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Produit",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Nb",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Unit√©",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Prix ‚Ç¨",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Total ‚Ç¨",
    		#:font_style => :bold,
    		#:font_size => 10)] 

		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		#phrase_somme = Prawn::Table::Cell.new(:text => "Somme #{information.name}", :document => self, :font_style => :bold, :font_size=>10)
		#totalsumgeneral = Prawn::Table::Cell.new(:text => format("%.2f", @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size=>10)
		#items.push([phrase_somme, "", "", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #pdf.table items, :border_style => :grid,
		#	:headers => headers,
		#	:column_widths => {0 => 270},
		#	:align => {0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width=> 535
		#end
		@totalsumgeneral = 0
		#compteur_old = compteur_init
	}

	#pdf.text compteur_init.to_s
	#pdf.text compteur_old.to_s
	#if compteur_init  > 19 && compteur_old != 28
	#	dif_compteur = ((compteur_old + compteur_init) > 28 && (compteur_old + compteur_init) < 51) ? 5 : (50 - compteur_init)
	#	0.upto(dif_compteur){ |i|
	#		pdf.text "\n"			
	#	}
	#		compteur_init = 0
	#else
	pdf.text "\n\n"
	#end

	if compteur_init > 50
		compteur_init = 0
	end

  header_bis = Array.new
  header_bis.push("Produit")
  header_bis.push("Total net ‚Ç¨")

	pdf.text "Total", :style => :bold, :font_size=>10
	items = Array.new
  items.push(header_bis)
	items_temp = Array.new
	Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			#items.push(items_temp.push(Prawn::Table::Cell.new(:text=>information.name.nil? ? "" : information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(:text=>@hash_totalsnumgeneral[information.name], :width => 0, :font_size=>10)))
			items.push(items_temp.push(information.name, @hash_totalsnumgeneral[information.name]))
      @totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}
 
   #total = [[Prawn::Table::Cell.new(
   # :text => "Total #{@facture.devi.tva ? "" : "*"}", :document => self, :font_style => (@facture.accompte == 100 ? :bold : :normal), :font_size=>10),
	 #  Prawn::Table::Cell.new(
   # :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => (@facture.accompte == 100 ? :bold : :normal), :font_size=>10)]]

   total = [["Total", format("%.2f",@totalsumgeneral).to_s]]
 
     unless @facture.devi.lignedevis.empty?
    	totallignedevis = Array.new
	@facture.devi.lignedevis.each{ |lignedevi| 
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([lignedevi.name,format("%.2f", lignedevi.prix).to_s])  
	}

  totallignedevis.push(["HT",@totalsumgeneral.to_s])
	#totallignedevis.push([Prawn::Table::Cell.new(:text=>"HT", :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10)])
     end 

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__3574332544021311878__process_action__913916791702894930__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__2180803471000393099__call__3895209263182192782__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered factures/show.pdf.prawn (0.9ms)
Completed 500 Internal Server Error in 5ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:158: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:212: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:214: syntax error, unexpected end-of-input, expecting '}'):
    155: 		#end
    156: 		@totalsumgeneral = 0
    157: 		#compteur_old = compteur_init
    158: 	}
    159: 
    160: 	#pdf.text compteur_init.to_s
    161: 	#pdf.text compteur_old.to_s
  actionpack (3.2.0) lib/action_view/template.rb:285:in `module_eval'
  actionpack (3.2.0) lib/action_view/template.rb:285:in `compile'
  actionpack (3.2.0) lib/action_view/template.rb:233:in `compile!'
  actionpack (3.2.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (3.2.0) lib/active_support/notifications.rb:125:in `instrument'
  actionpack (3.2.0) lib/action_view/template.rb:141:in `render'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
  actionpack (3.2.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:39:in `render_template'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:12:in `render'
  actionpack (3.2.0) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.0) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:109:in `_render_template'
  actionpack (3.2.0) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.0) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.0) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.0) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (3.2.0) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.0) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.0) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.0) lib/active_support/callbacks.rb:425:in `_run__3574332544021311878__process_action__913916791702894930__callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.0) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.0) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.0) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.0) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.0) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:66:in `call'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:570:in `call'
  bullet (4.11.3) lib/bullet/rack.rb:10:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.0) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `_run__2180803471000393099__call__3895209263182192782__callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.0) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.5ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.1ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:03:15 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.3ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
ERROR: compiling _app_views_factures_show_pdf_prawn___2601126669109534190_2176585740 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:158: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:290: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:292: syntax error, unexpected end-of-input, expecting '}'
Function body:           def _app_views_factures_show_pdf_prawn___2601126669109534190_2176585740(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "factures/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'

#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"

#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "Emeraude composites", :size => 13, :style => :bold
	pdf.text "24 bis rue de la truite", :size => 10
	pdf.text "22400 Co√´temieux", :size => 10
	pdf.text "06 76 54 41 94", :size=> 10
	pdf.text "yann@emeraudecomposites.fr", :size => 10
	pdf.text "\n"
        pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	pdf.text "RM 22 803 795 301", :size => 10
	pdf.text "Siret 803 795 000 16", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end
#compteur_old = 28 
compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @facture.devi.client.namerefcontact, :size => 10
	pdf.text @facture.devi.client.nameentreprise, :style => :bold, :size => 10
	@facture.devi.client.adresse.each_line{ |line|
		compteur_init += 1 
		pdf.text line, :size => 10
	}
	pdf.text @facture.devi.client.tva_intra, :size => 10 unless @facture.devi.client.tva_intra.empty? && @facture.devi.client.tva_intra.nil? 
end

	if compteur_init > 50
		compteur_init = 0
	end


pdf.bounding_box [0,500], :width => 200 do
	pdf.text "FACTURE #{@facture.proforma ? "PRO FORMA" : ""}", :style => :bold, :size => 10
	pdf.text "Num√©ro : #{@facture.numfacture}", :size => 10
	pdf.text "Date : #{@facture.created_at.strftime('%d/%m/%Y')}", :size => 10
        pdf.text "Devis : #{@facture.devi.numdevis}", :size => 10
	pdf.text "Num√©ro client : #{@facture.devi.client.numclient}", :size => 10
        #pdf.text("Commande : #{@facture.numcommande}", :size => 10) unless @facture.numcommande.nil? || @facture.numcommande.empty?
	unless @facture.numcommande.nil? || @facture.numcommande.empty?
		@facture.numcommande.each_line{ |line|
			compteur_init += 1
			pdf.text line, :size => 10
		}	
	end
end

	if compteur_init > 50
		compteur_init = 0
	end

pdf.text "\n\n"
	pdf.text "Description", :style => :bold, :size => 10
	#pdf.text((@facture.devi.description.nil? ? "" : @facture.devi.description), :size => 10)
	unless @facture.devi.description.nil?
		@facture.devi.description.each_line{ |line|
			compteur_init += 1
			pdf.text line, :size => 10
		}
	end

  headers = Array.new
  headers.push("Produit")
  headers.push("Nb")
  headers.push("Unit√©")
  headers.push("Prix ‚Ç¨")
  headers.push("Total ‚Ç¨")
	Information.all.each{ |information|
		compteur_init += 1
        	unless @facture.devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
			items = Array.new
      itams.push(headers)
			items_temp = Array.new
			unless information.name.nil?
				information.name.each_line{ |line|
					compteur_init += 1
				}
			end

 			@facture.devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
				informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price
				#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0, :text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:text=>informationligne.number, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>informationligne.unite, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :font_size=>10, :width=>0), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
				
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(:width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:right], :text=>"")])
			  items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end

				items.push(items_temp)
				items_temp = Array.new
				compteur_init += 1
			}

		

		#pdf.text compteur_init.to_s
		#pdf.text compteur_old.to_s
		#if (compteur_init > 40 || (compteur_init + compteur_old) > 40) && (compteur_old != 28 || compteur_init < 40)
                #      if compteur_init > 40
		#	dif_compteur = (50 - compteur_old) + 10
		#      else
		#	dif_compteur = (50 - (compteur_old + compteur_init)) + 20
		#      end
		#	0.upto(dif_compteur){ |i|
		#		pdf.text "\n"			
		#	}
		#	compteur_init = compteur_init - compteur_old
		#else
			pdf.text "\n\n"
		#end

		if compteur_init > 50
			compteur_init = 0
		end

    		#headers = [Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Produit",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Nb",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Unit√©",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Prix ‚Ç¨",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Total ‚Ç¨",
    		#:font_style => :bold,
    		#:font_size => 10)] 

		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		#phrase_somme = Prawn::Table::Cell.new(:text => "Somme #{information.name}", :document => self, :font_style => :bold, :font_size=>10)
		#totalsumgeneral = Prawn::Table::Cell.new(:text => format("%.2f", @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size=>10)
		#items.push([phrase_somme, "", "", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #pdf.table items, :border_style => :grid,
		#	:headers => headers,
		#	:column_widths => {0 => 270},
		#	:align => {0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width=> 535
		#end
		@totalsumgeneral = 0
		#compteur_old = compteur_init
	}

	#pdf.text compteur_init.to_s
	#pdf.text compteur_old.to_s
	#if compteur_init  > 19 && compteur_old != 28
	#	dif_compteur = ((compteur_old + compteur_init) > 28 && (compteur_old + compteur_init) < 51) ? 5 : (50 - compteur_init)
	#	0.upto(dif_compteur){ |i|
	#		pdf.text "\n"			
	#	}
	#		compteur_init = 0
	#else
	pdf.text "\n\n"
	#end

	if compteur_init > 50
		compteur_init = 0
	end

  header_bis = Array.new
  header_bis.push("Produit")
  header_bis.push("Total net ‚Ç¨")

	pdf.text "Total", :style => :bold, :font_size=>10
	items = Array.new
  items.push(header_bis)
	items_temp = Array.new
	Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			#items.push(items_temp.push(Prawn::Table::Cell.new(:text=>information.name.nil? ? "" : information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(:text=>@hash_totalsnumgeneral[information.name], :width => 0, :font_size=>10)))
			items.push(items_temp.push(information.name, @hash_totalsnumgeneral[information.name]))
      @totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}
 
   #total = [[Prawn::Table::Cell.new(
   # :text => "Total #{@facture.devi.tva ? "" : "*"}", :document => self, :font_style => (@facture.accompte == 100 ? :bold : :normal), :font_size=>10),
	 #  Prawn::Table::Cell.new(
   # :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => (@facture.accompte == 100 ? :bold : :normal), :font_size=>10)]]

   total = [["Total", format("%.2f",@totalsumgeneral).to_s]]
 
     unless @facture.devi.lignedevis.empty?
    	totallignedevis = Array.new
	@facture.devi.lignedevis.each{ |lignedevi| 
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([lignedevi.name,format("%.2f", lignedevi.prix).to_s])  
	}

  totallignedevis.push(["HT",@totalsumgeneral.to_s])
	#totallignedevis.push([Prawn::Table::Cell.new(:text=>"HT", :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10)])
     end 
  if @facture.accompte == 100 
   tva = [[Prawn::Table::Cell.new(
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size=>10), 
	  Prawn::Table::Cell.new(
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_style => :bold, :font_size=>10)],
	  [Prawn::Table::Cell.new(
    :text => "TTC", :document => self, :font_size=>10, :font_style => :bold), Prawn::Table::Cell.new(
    :text => format("%.2f",(@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size=>10)
		]]
   else	 
        total_accompte = [[Prawn::Table::Cell.new(:text=>"HT (#{@facture.accompte}%)", :document => self, :font_style => :bold, :font_size=>10), Prawn::Table::Cell.new(:text=>(format("%.2f",(@totalsumgeneral*@facture.accompte)/100)).to_s, :document => self, :font_style => :bold, :font_size=>10)]]

	tva = [[Prawn::Table::Cell.new(:text=>"TVA 20%", :document => self, :font_style => :bold, :font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",(((@totalsumgeneral*@facture.accompte)/100)*20)/100).to_s, :document => self, :font_style => :bold, :font_size => 10)]]

	ttc = [[Prawn::Table::Cell.new(:text=>"TTC", :document => self, :font_style => :bold, :font_size=>10), Prawn::Table::Cell.new(:text=>(format("%.2f",(((@totalsumgeneral*@facture.accompte)/100)*0.2)+((@totalsumgeneral*@facture.accompte)/100))).to_s, :document => self, :font_style => :bold, :font_size=>10)]]
        tva += ttc 
   end
	items += total
	items += totallignedevis unless @facture.devi.lignedevis.empty?
        items += total_accompte unless @facture.accompte == 100
	items += tva if @facture.devi.tva?
    header_bis = [Prawn::Table::Cell.new(:position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(:position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

    	pdf.table(items, :border_style => :grid,
		:headers => header_bis,
		:column_widths => {0 => 430},
		:align => {0 => :left, 1 => :right},
		:width => 535)


	#compteur_init += 26
	#compteur_init += compteur_old if compteur_old < 33 && compteur_init < 28
	#if compteur_init > 13
	#		dif_compteur = compteur_old == 28 ? 15 : (compteur_init > 49 ? 5 : 60 - (compteur_init < compteur_old ? compteur_init : compteur_old))
	#		cpt = (compteur_init > compteur_old ? compteur_init : compteur_old).to_s
	#		0.upto(dif_compteur){ |i|
	#			pdf.text "\n"			
	#		}
	#else
	#	pdf.text "\n\n"
	#end
	
        compteur_init += 26	
	if compteur_init > 50
		compteur_init = 0
	end

	pdf.text "\n\n * prestation exon√©r√©e de TVA en vertu de l‚Äôarticle 196 de la directive 2006/112/CE modifi√©e ‚Äì article 283-2 du CGI", :size=>10, :style=>:italic unless @facture.devi.tva
	pdf.text "\n\nDate de paiement : #{@facture.cond_reglement == "net dans 30 jours." ? (@facture.created_at + 2592000).strftime('%d/%m/%Y') : @facture.created_at.strftime('%d/%m/%Y')}", :size => 10
	pdf.text "Conditions de paiement : #{@facture.cond_reglement}", :size => 10 
	pdf.text "Taux de p√©nalit√©s de retard 12%", :size => 10
	pdf.text "Condition d'escompte : sans escomptes", :size => 10
	pdf.text "Si√®ge social : Tharsis software 183-189 avenue de Choisy 75013 Paris\n\n", :size => 10
	pdf.text "\n\n\n"

	if compteur_init > 30
		0.upto((compteur_init - 50)+10){ |i|
			pdf.text "\n"
		}
	end
	pdf.image @pigsfacture, :scale => 0.6, :vposition => :bottom, :position=>:center
#point = [0, pdf.bounds.bottom + 25]
#pdf.repeat :all do
#    pdf.bounding_box point, :width => 535  do
#	pdf.text "Tharsis Software - S.A.R.L. au capital de 10 500‚Ç¨", :align => :center, :size => 8
#	pdf.text "RCS PARIS 493 029 839 - SIRET 493 029 839 00021 - TVA FR64493029839", :align => :center, :size => 8
#    end
#end

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__3574332544021311878__process_action__913916791702894930__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__2180803471000393099__call__3895209263182192782__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered factures/show.pdf.prawn (2.0ms)
Completed 500 Internal Server Error in 7ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:158: syntax error, unexpected '}', expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:290: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:292: syntax error, unexpected end-of-input, expecting '}'):
    155: 		#end
    156: 		@totalsumgeneral = 0
    157: 		#compteur_old = compteur_init
    158: 	}
    159: 
    160: 	#pdf.text compteur_init.to_s
    161: 	#pdf.text compteur_old.to_s
  actionpack (3.2.0) lib/action_view/template.rb:285:in `module_eval'
  actionpack (3.2.0) lib/action_view/template.rb:285:in `compile'
  actionpack (3.2.0) lib/action_view/template.rb:233:in `compile!'
  actionpack (3.2.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (3.2.0) lib/active_support/notifications.rb:125:in `instrument'
  actionpack (3.2.0) lib/action_view/template.rb:141:in `render'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
  actionpack (3.2.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:39:in `render_template'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:12:in `render'
  actionpack (3.2.0) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.0) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:109:in `_render_template'
  actionpack (3.2.0) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.0) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.0) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.0) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (3.2.0) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.0) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.0) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.0) lib/active_support/callbacks.rb:425:in `_run__3574332544021311878__process_action__913916791702894930__callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.0) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.0) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.0) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.0) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.0) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:66:in `call'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:570:in `call'
  bullet (4.11.3) lib/bullet/rack.rb:10:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.0) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `_run__2180803471000393099__call__3895209263182192782__callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.0) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.7ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:04:52 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.2ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
ERROR: compiling _app_views_factures_show_pdf_prawn___2601126669109534190_2175584560 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:290: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:292: syntax error, unexpected end-of-input, expecting keyword_end
Function body:           def _app_views_factures_show_pdf_prawn___2601126669109534190_2175584560(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "factures/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'

#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"

#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "Emeraude composites", :size => 13, :style => :bold
	pdf.text "24 bis rue de la truite", :size => 10
	pdf.text "22400 Co√´temieux", :size => 10
	pdf.text "06 76 54 41 94", :size=> 10
	pdf.text "yann@emeraudecomposites.fr", :size => 10
	pdf.text "\n"
        pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	pdf.text "RM 22 803 795 301", :size => 10
	pdf.text "Siret 803 795 000 16", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end
#compteur_old = 28 
compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @facture.devi.client.namerefcontact, :size => 10
	pdf.text @facture.devi.client.nameentreprise, :style => :bold, :size => 10
	@facture.devi.client.adresse.each_line{ |line|
		compteur_init += 1 
		pdf.text line, :size => 10
	}
	pdf.text @facture.devi.client.tva_intra, :size => 10 unless @facture.devi.client.tva_intra.empty? && @facture.devi.client.tva_intra.nil? 
end

	if compteur_init > 50
		compteur_init = 0
	end


pdf.bounding_box [0,500], :width => 200 do
	pdf.text "FACTURE #{@facture.proforma ? "PRO FORMA" : ""}", :style => :bold, :size => 10
	pdf.text "Num√©ro : #{@facture.numfacture}", :size => 10
	pdf.text "Date : #{@facture.created_at.strftime('%d/%m/%Y')}", :size => 10
        pdf.text "Devis : #{@facture.devi.numdevis}", :size => 10
	pdf.text "Num√©ro client : #{@facture.devi.client.numclient}", :size => 10
        #pdf.text("Commande : #{@facture.numcommande}", :size => 10) unless @facture.numcommande.nil? || @facture.numcommande.empty?
	unless @facture.numcommande.nil? || @facture.numcommande.empty?
		@facture.numcommande.each_line{ |line|
			compteur_init += 1
			pdf.text line, :size => 10
		}	
	end
end

	if compteur_init > 50
		compteur_init = 0
	end

pdf.text "\n\n"
	pdf.text "Description", :style => :bold, :size => 10
	#pdf.text((@facture.devi.description.nil? ? "" : @facture.devi.description), :size => 10)
	unless @facture.devi.description.nil?
		@facture.devi.description.each_line{ |line|
			compteur_init += 1
			pdf.text line, :size => 10
		}
	end

  headers = Array.new
  headers.push("Produit")
  headers.push("Nb")
  headers.push("Unit√©")
  headers.push("Prix ‚Ç¨")
  headers.push("Total ‚Ç¨")
	Information.all.each do |information|
		compteur_init += 1
        	unless @facture.devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
			items = Array.new
      itams.push(headers)
			items_temp = Array.new
			unless information.name.nil?
				information.name.each_line{ |line|
					compteur_init += 1
				}
			end

 			@facture.devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
				informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price
				#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0, :text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:text=>informationligne.number, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>informationligne.unite, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :font_size=>10, :width=>0), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
				
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(:width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:right], :text=>"")])
			  items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end

				items.push(items_temp)
				items_temp = Array.new
				compteur_init += 1
			}

		

		#pdf.text compteur_init.to_s
		#pdf.text compteur_old.to_s
		#if (compteur_init > 40 || (compteur_init + compteur_old) > 40) && (compteur_old != 28 || compteur_init < 40)
                #      if compteur_init > 40
		#	dif_compteur = (50 - compteur_old) + 10
		#      else
		#	dif_compteur = (50 - (compteur_old + compteur_init)) + 20
		#      end
		#	0.upto(dif_compteur){ |i|
		#		pdf.text "\n"			
		#	}
		#	compteur_init = compteur_init - compteur_old
		#else
			pdf.text "\n\n"
		#end

		if compteur_init > 50
			compteur_init = 0
		end

    		#headers = [Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Produit",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Nb",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Unit√©",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Prix ‚Ç¨",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Total ‚Ç¨",
    		#:font_style => :bold,
    		#:font_size => 10)] 

		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		#phrase_somme = Prawn::Table::Cell.new(:text => "Somme #{information.name}", :document => self, :font_style => :bold, :font_size=>10)
		#totalsumgeneral = Prawn::Table::Cell.new(:text => format("%.2f", @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size=>10)
		#items.push([phrase_somme, "", "", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #pdf.table items, :border_style => :grid,
		#	:headers => headers,
		#	:column_widths => {0 => 270},
		#	:align => {0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width=> 535
		#end
		@totalsumgeneral = 0
		#compteur_old = compteur_init
	end

	#pdf.text compteur_init.to_s
	#pdf.text compteur_old.to_s
	#if compteur_init  > 19 && compteur_old != 28
	#	dif_compteur = ((compteur_old + compteur_init) > 28 && (compteur_old + compteur_init) < 51) ? 5 : (50 - compteur_init)
	#	0.upto(dif_compteur){ |i|
	#		pdf.text "\n"			
	#	}
	#		compteur_init = 0
	#else
	pdf.text "\n\n"
	#end

	if compteur_init > 50
		compteur_init = 0
	end

  header_bis = Array.new
  header_bis.push("Produit")
  header_bis.push("Total net ‚Ç¨")

	pdf.text "Total", :style => :bold, :font_size=>10
	items = Array.new
  items.push(header_bis)
	items_temp = Array.new
	Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			#items.push(items_temp.push(Prawn::Table::Cell.new(:text=>information.name.nil? ? "" : information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(:text=>@hash_totalsnumgeneral[information.name], :width => 0, :font_size=>10)))
			items.push(items_temp.push(information.name, @hash_totalsnumgeneral[information.name]))
      @totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}
 
   #total = [[Prawn::Table::Cell.new(
   # :text => "Total #{@facture.devi.tva ? "" : "*"}", :document => self, :font_style => (@facture.accompte == 100 ? :bold : :normal), :font_size=>10),
	 #  Prawn::Table::Cell.new(
   # :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => (@facture.accompte == 100 ? :bold : :normal), :font_size=>10)]]

   total = [["Total", format("%.2f",@totalsumgeneral).to_s]]
 
     unless @facture.devi.lignedevis.empty?
    	totallignedevis = Array.new
	@facture.devi.lignedevis.each{ |lignedevi| 
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([lignedevi.name,format("%.2f", lignedevi.prix).to_s])  
	}

  totallignedevis.push(["HT",@totalsumgeneral.to_s])
	#totallignedevis.push([Prawn::Table::Cell.new(:text=>"HT", :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10)])
     end 
  if @facture.accompte == 100 
   tva = [[Prawn::Table::Cell.new(
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size=>10), 
	  Prawn::Table::Cell.new(
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_style => :bold, :font_size=>10)],
	  [Prawn::Table::Cell.new(
    :text => "TTC", :document => self, :font_size=>10, :font_style => :bold), Prawn::Table::Cell.new(
    :text => format("%.2f",(@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size=>10)
		]]
   else	 
        total_accompte = [[Prawn::Table::Cell.new(:text=>"HT (#{@facture.accompte}%)", :document => self, :font_style => :bold, :font_size=>10), Prawn::Table::Cell.new(:text=>(format("%.2f",(@totalsumgeneral*@facture.accompte)/100)).to_s, :document => self, :font_style => :bold, :font_size=>10)]]

	tva = [[Prawn::Table::Cell.new(:text=>"TVA 20%", :document => self, :font_style => :bold, :font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",(((@totalsumgeneral*@facture.accompte)/100)*20)/100).to_s, :document => self, :font_style => :bold, :font_size => 10)]]

	ttc = [[Prawn::Table::Cell.new(:text=>"TTC", :document => self, :font_style => :bold, :font_size=>10), Prawn::Table::Cell.new(:text=>(format("%.2f",(((@totalsumgeneral*@facture.accompte)/100)*0.2)+((@totalsumgeneral*@facture.accompte)/100))).to_s, :document => self, :font_style => :bold, :font_size=>10)]]
        tva += ttc 
   end
	items += total
	items += totallignedevis unless @facture.devi.lignedevis.empty?
        items += total_accompte unless @facture.accompte == 100
	items += tva if @facture.devi.tva?
    header_bis = [Prawn::Table::Cell.new(:position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(:position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

    	pdf.table(items, :border_style => :grid,
		:headers => header_bis,
		:column_widths => {0 => 430},
		:align => {0 => :left, 1 => :right},
		:width => 535)


	#compteur_init += 26
	#compteur_init += compteur_old if compteur_old < 33 && compteur_init < 28
	#if compteur_init > 13
	#		dif_compteur = compteur_old == 28 ? 15 : (compteur_init > 49 ? 5 : 60 - (compteur_init < compteur_old ? compteur_init : compteur_old))
	#		cpt = (compteur_init > compteur_old ? compteur_init : compteur_old).to_s
	#		0.upto(dif_compteur){ |i|
	#			pdf.text "\n"			
	#		}
	#else
	#	pdf.text "\n\n"
	#end
	
        compteur_init += 26	
	if compteur_init > 50
		compteur_init = 0
	end

	pdf.text "\n\n * prestation exon√©r√©e de TVA en vertu de l‚Äôarticle 196 de la directive 2006/112/CE modifi√©e ‚Äì article 283-2 du CGI", :size=>10, :style=>:italic unless @facture.devi.tva
	pdf.text "\n\nDate de paiement : #{@facture.cond_reglement == "net dans 30 jours." ? (@facture.created_at + 2592000).strftime('%d/%m/%Y') : @facture.created_at.strftime('%d/%m/%Y')}", :size => 10
	pdf.text "Conditions de paiement : #{@facture.cond_reglement}", :size => 10 
	pdf.text "Taux de p√©nalit√©s de retard 12%", :size => 10
	pdf.text "Condition d'escompte : sans escomptes", :size => 10
	pdf.text "Si√®ge social : Tharsis software 183-189 avenue de Choisy 75013 Paris\n\n", :size => 10
	pdf.text "\n\n\n"

	if compteur_init > 30
		0.upto((compteur_init - 50)+10){ |i|
			pdf.text "\n"
		}
	end
	pdf.image @pigsfacture, :scale => 0.6, :vposition => :bottom, :position=>:center
#point = [0, pdf.bounds.bottom + 25]
#pdf.repeat :all do
#    pdf.bounding_box point, :width => 535  do
#	pdf.text "Tharsis Software - S.A.R.L. au capital de 10 500‚Ç¨", :align => :center, :size => 8
#	pdf.text "RCS PARIS 493 029 839 - SIRET 493 029 839 00021 - TVA FR64493029839", :align => :center, :size => 8
#    end
#end

pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__3574332544021311878__process_action__913916791702894930__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__2180803471000393099__call__3895209263182192782__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered factures/show.pdf.prawn (1.5ms)
Completed 500 Internal Server Error in 7ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:290: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:292: syntax error, unexpected end-of-input, expecting keyword_end):
    287: pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
  actionpack (3.2.0) lib/action_view/template.rb:285:in `module_eval'
  actionpack (3.2.0) lib/action_view/template.rb:285:in `compile'
  actionpack (3.2.0) lib/action_view/template.rb:233:in `compile!'
  actionpack (3.2.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (3.2.0) lib/active_support/notifications.rb:125:in `instrument'
  actionpack (3.2.0) lib/action_view/template.rb:141:in `render'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
  actionpack (3.2.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:39:in `render_template'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:12:in `render'
  actionpack (3.2.0) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.0) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:109:in `_render_template'
  actionpack (3.2.0) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.0) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.0) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.0) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (3.2.0) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.0) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.0) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.0) lib/active_support/callbacks.rb:425:in `_run__3574332544021311878__process_action__913916791702894930__callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.0) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.0) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.0) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.0) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.0) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:66:in `call'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:570:in `call'
  bullet (4.11.3) lib/bullet/rack.rb:10:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.0) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `_run__2180803471000393099__call__3895209263182192782__callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.0) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.7ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:05:06 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
ERROR: compiling _app_views_factures_show_pdf_prawn___2601126669109534190_2156756320 RAISED /Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:290: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:292: syntax error, unexpected end-of-input, expecting keyword_end
Function body:           def _app_views_factures_show_pdf_prawn___2601126669109534190_2156756320(local_assigns, output_buffer)
            _old_virtual_path, @virtual_path = @virtual_path, "factures/show";_old_output_buffer = @output_buffer;;_prawnto_compile_setup;pdf = Prawn::Document.new(@prawnto_options[:prawn]);#require 'prawn'
#require 'prawn/layout'
#require 'prawn/core'

#pigs = "#{RAILS_ROOT}/public/images/img_logo_tharsis/logotharsis.jpg"

#pdf.image pigs, :scale => 0.2
pdf.bounding_box [0,670], :width => 200  do
	pdf.text "Emeraude composites", :size => 13, :style => :bold
	pdf.text "24 bis rue de la truite", :size => 10
	pdf.text "22400 Co√´temieux", :size => 10
	pdf.text "06 76 54 41 94", :size=> 10
	pdf.text "yann@emeraudecomposites.fr", :size => 10
	pdf.text "\n"
        pdf.text "S.A.R.L. au capital de 10500‚Ç¨", :size => 10
	pdf.text "RM 22 803 795 301", :size => 10
	pdf.text "Siret 803 795 000 16", :size => 10
	#pdf.text "TVA FR64493029839", :size => 10	
end
#compteur_old = 28 
compteur_init = 28
pdf.bounding_box [320, 620], :width => 200 do
	pdf.text @facture.devi.client.namerefcontact, :size => 10
	pdf.text @facture.devi.client.nameentreprise, :style => :bold, :size => 10
	@facture.devi.client.adresse.each_line{ |line|
		compteur_init += 1 
		pdf.text line, :size => 10
	}
	pdf.text @facture.devi.client.tva_intra, :size => 10 unless @facture.devi.client.tva_intra.empty? && @facture.devi.client.tva_intra.nil? 
end

	if compteur_init > 50
		compteur_init = 0
	end


pdf.bounding_box [0,500], :width => 200 do
	pdf.text "FACTURE #{@facture.proforma ? "PRO FORMA" : ""}", :style => :bold, :size => 10
	pdf.text "Num√©ro : #{@facture.numfacture}", :size => 10
	pdf.text "Date : #{@facture.created_at.strftime('%d/%m/%Y')}", :size => 10
        pdf.text "Devis : #{@facture.devi.numdevis}", :size => 10
	pdf.text "Num√©ro client : #{@facture.devi.client.numclient}", :size => 10
        #pdf.text("Commande : #{@facture.numcommande}", :size => 10) unless @facture.numcommande.nil? || @facture.numcommande.empty?
	unless @facture.numcommande.nil? || @facture.numcommande.empty?
		@facture.numcommande.each_line{ |line|
			compteur_init += 1
			pdf.text line, :size => 10
		}	
	end
end

	if compteur_init > 50
		compteur_init = 0
	end

pdf.text "\n\n"
	pdf.text "Description", :style => :bold, :size => 10
	#pdf.text((@facture.devi.description.nil? ? "" : @facture.devi.description), :size => 10)
	unless @facture.devi.description.nil?
		@facture.devi.description.each_line{ |line|
			compteur_init += 1
			pdf.text line, :size => 10
		}
	end

  headers = Array.new
  headers.push("Produit")
  headers.push("Nb")
  headers.push("Unit√©")
  headers.push("Prix ‚Ç¨")
  headers.push("Total ‚Ç¨")
	Information.all.each do |information|
		compteur_init += 1
        	unless @facture.devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
			items = Array.new
      itams.push(headers)
			items_temp = Array.new
			unless information.name.nil?
				information.name.each_line{ |line|
					compteur_init += 1
				}
			end

 			@facture.devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
				informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price
				#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0, :text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:text=>informationligne.number, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>informationligne.unite, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :font_size=>10, :width=>0), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
				
		     unless informationligne.titleinformationlignes.empty?	
			informationligne.titleinformationlignes.each{ |titleinformationligne|
				#items.push([Prawn::Table::Cell.new(:width=>20, :document => self, :border_width => 0, :borders => [:left], :text=>titleinformationligne.title, :font_style => titleinformationligne.font_weight == "bold" ? :bold : :normal, :font_size=>titleinformationligne.font_size), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:none], :text=>""), Prawn::Table::Cell.new(:width=>20, :document => self, :borders => [:right], :text=>"")])
			  items.push([titleinformationligne.title, "", "", "", ""])
      }
                     end

				items.push(items_temp)
				items_temp = Array.new
				compteur_init += 1
			}

		

		#pdf.text compteur_init.to_s
		#pdf.text compteur_old.to_s
		#if (compteur_init > 40 || (compteur_init + compteur_old) > 40) && (compteur_old != 28 || compteur_init < 40)
                #      if compteur_init > 40
		#	dif_compteur = (50 - compteur_old) + 10
		#      else
		#	dif_compteur = (50 - (compteur_old + compteur_init)) + 20
		#      end
		#	0.upto(dif_compteur){ |i|
		#		pdf.text "\n"			
		#	}
		#	compteur_init = compteur_init - compteur_old
		#else
			pdf.text "\n\n"
		#end

		if compteur_init > 50
			compteur_init = 0
		end

    		#headers = [Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Produit",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Nb",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Unit√©",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Prix ‚Ç¨",
    		#:font_style => :bold,
    		#:font_size => 10), Prawn::Table::Cell.new(
    		#:width => 0,
    		#:text => "Total ‚Ç¨",
    		#:font_style => :bold,
    		#:font_size => 10)] 

		@hash_totalsnumgeneral[information.name] = @totalsumgeneral
		#phrase_somme = Prawn::Table::Cell.new(:text => "Somme #{information.name}", :document => self, :font_style => :bold, :font_size=>10)
		#totalsumgeneral = Prawn::Table::Cell.new(:text => format("%.2f", @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size=>10)
		#items.push([phrase_somme, "", "", "", totalsumgeneral])
		pdf.text information.name, :style => :bold, :font_size => 10
		pdf.table(items, :cell_style => { :borders => [:left, :right] })
    #pdf.table items, :border_style => :grid,
		#	:headers => headers,
		#	:column_widths => {0 => 270},
		#	:align => {0 => :left, 1 => :right, 2 => :right, 3 => :right, 4 => :right },
		#	:width=> 535
		#end
		@totalsumgeneral = 0
		#compteur_old = compteur_init
	end

	#pdf.text compteur_init.to_s
	#pdf.text compteur_old.to_s
	#if compteur_init  > 19 && compteur_old != 28
	#	dif_compteur = ((compteur_old + compteur_init) > 28 && (compteur_old + compteur_init) < 51) ? 5 : (50 - compteur_init)
	#	0.upto(dif_compteur){ |i|
	#		pdf.text "\n"			
	#	}
	#		compteur_init = 0
	#else
	pdf.text "\n\n"
	#end

	if compteur_init > 50
		compteur_init = 0
	end

  header_bis = Array.new
  header_bis.push("Produit")
  header_bis.push("Total net ‚Ç¨")

	pdf.text "Total", :style => :bold, :font_size=>10
	items = Array.new
  items.push(header_bis)
	items_temp = Array.new
	Information.all.each{ |information|
		unless @hash_totalsnumgeneral[information.name].nil?
			#items.push(items_temp.push(Prawn::Table::Cell.new(:text=>information.name.nil? ? "" : information.name, :width => 0, :font_size=>10), Prawn::Table::Cell.new(:text=>@hash_totalsnumgeneral[information.name], :width => 0, :font_size=>10)))
			items.push(items_temp.push(information.name, @hash_totalsnumgeneral[information.name]))
      @totalsumgeneral += @hash_totalsnumgeneral[information.name]
		end
		items_temp = Array.new
	}
 
   #total = [[Prawn::Table::Cell.new(
   # :text => "Total #{@facture.devi.tva ? "" : "*"}", :document => self, :font_style => (@facture.accompte == 100 ? :bold : :normal), :font_size=>10),
	 #  Prawn::Table::Cell.new(
   # :text => format("%.2f",@totalsumgeneral).to_s, :document => self, :font_style => (@facture.accompte == 100 ? :bold : :normal), :font_size=>10)]]

   total = [["Total", format("%.2f",@totalsumgeneral).to_s]]
 
     unless @facture.devi.lignedevis.empty?
    	totallignedevis = Array.new
	@facture.devi.lignedevis.each{ |lignedevi| 
		@totalsumgeneral += lignedevi.prix
		totallignedevis.push([lignedevi.name,format("%.2f", lignedevi.prix).to_s])  
	}

  totallignedevis.push(["HT",@totalsumgeneral.to_s])
	#totallignedevis.push([Prawn::Table::Cell.new(:text=>"HT", :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10)])
     end 
  if @facture.accompte == 100 
   tva = [[Prawn::Table::Cell.new(
    :text => "TVA 20%", :document => self, :font_style => :bold, :font_size=>10), 
	  Prawn::Table::Cell.new(
    :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_style => :bold, :font_size=>10)],
	  [Prawn::Table::Cell.new(
    :text => "TTC", :document => self, :font_size=>10, :font_style => :bold), Prawn::Table::Cell.new(
    :text => format("%.2f",(@totalsumgeneral * 0.2) + @totalsumgeneral).to_s, :document => self, :font_style => :bold, :font_size=>10)
		]]
   else	 
        total_accompte = [[Prawn::Table::Cell.new(:text=>"HT (#{@facture.accompte}%)", :document => self, :font_style => :bold, :font_size=>10), Prawn::Table::Cell.new(:text=>(format("%.2f",(@totalsumgeneral*@facture.accompte)/100)).to_s, :document => self, :font_style => :bold, :font_size=>10)]]

	tva = [[Prawn::Table::Cell.new(:text=>"TVA 20%", :document => self, :font_style => :bold, :font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",(((@totalsumgeneral*@facture.accompte)/100)*20)/100).to_s, :document => self, :font_style => :bold, :font_size => 10)]]

	ttc = [[Prawn::Table::Cell.new(:text=>"TTC", :document => self, :font_style => :bold, :font_size=>10), Prawn::Table::Cell.new(:text=>(format("%.2f",(((@totalsumgeneral*@facture.accompte)/100)*0.2)+((@totalsumgeneral*@facture.accompte)/100))).to_s, :document => self, :font_style => :bold, :font_size=>10)]]
        tva += ttc 
   end
	items += total
	items += totallignedevis unless @facture.devi.lignedevis.empty?
        items += total_accompte unless @facture.accompte == 100
	items += tva if @facture.devi.tva?
    header_bis = [Prawn::Table::Cell.new(:position => [0,0],
    :width => 0,
    :text => "Produit",
    :font_style => :bold,
    :font_size => 10),Prawn::Table::Cell.new(:position => [0,0],
    :width => 0,
    :text => "Total net ‚Ç¨",
    :font_style => :bold,
    :font_size => 10)]

    	pdf.table(items, :border_style => :grid,
		:headers => header_bis,
		:column_widths => {0 => 430},
		:align => {0 => :left, 1 => :right},
		:width => 535)


	#compteur_init += 26
	#compteur_init += compteur_old if compteur_old < 33 && compteur_init < 28
	#if compteur_init > 13
	#		dif_compteur = compteur_old == 28 ? 15 : (compteur_init > 49 ? 5 : 60 - (compteur_init < compteur_old ? compteur_init : compteur_old))
	#		cpt = (compteur_init > compteur_old ? compteur_init : compteur_old).to_s
	#		0.upto(dif_compteur){ |i|
	#			pdf.text "\n"			
	#		}
	#else
	#	pdf.text "\n\n"
	#end
	
        compteur_init += 26	
	if compteur_init > 50
		compteur_init = 0
	end

	pdf.text "\n\n * prestation exon√©r√©e de TVA en vertu de l‚Äôarticle 196 de la directive 2006/112/CE modifi√©e ‚Äì article 283-2 du CGI", :size=>10, :style=>:italic unless @facture.devi.tva
	pdf.text "\n\nDate de paiement : #{@facture.cond_reglement == "net dans 30 jours." ? (@facture.created_at + 2592000).strftime('%d/%m/%Y') : @facture.created_at.strftime('%d/%m/%Y')}", :size => 10
	pdf.text "Conditions de paiement : #{@facture.cond_reglement}", :size => 10 
	pdf.text "Taux de p√©nalit√©s de retard 12%", :size => 10
	pdf.text "Condition d'escompte : sans escomptes", :size => 10
	pdf.text "Si√®ge social : Tharsis software 183-189 avenue de Choisy 75013 Paris\n\n", :size => 10
	pdf.text "\n\n\n"

	if compteur_init > 30
		0.upto((compteur_init - 50)+10){ |i|
			pdf.text "\n"
		}
	end
	pdf.image @pigsfacture, :scale => 0.6, :vposition => :bottom, :position=>:center
#point = [0, pdf.bounds.bottom + 25]
#pdf.repeat :all do
#    pdf.bounding_box point, :width => 535  do
#	pdf.text "Tharsis Software - S.A.R.L. au capital de 10 500‚Ç¨", :align => :center, :size => 8
#	pdf.text "RCS PARIS 493 029 839 - SIRET 493 029 839 00021 - TVA FR64493029839", :align => :center, :size => 8
#    end
#end

#pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]

pdf.render;
          ensure
            @virtual_path, @output_buffer = _old_virtual_path, _old_output_buffer
          end

Backtrace: /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `module_eval'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:285:in `compile'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:233:in `compile!'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:142:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:125:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/template.rb:141:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:39:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/template_renderer.rb:12:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:36:in `render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_view/renderer/renderer.rb:17:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:109:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/streaming.rb:225:in `_render_template'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:103:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:88:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:16:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/core_ext/benchmark.rb:5:in `ms'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:39:in `render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:167:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rendering.rb:10:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:425:in `_run__3574332544021311878__process_action__913916791702894930__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/callbacks.rb:17:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `block in instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/notifications.rb:123:in `instrument'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/base.rb:121:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/abstract_controller/rendering.rb:45:in `process'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:203:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_controller/metal.rb:246:in `block in action'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:30:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/routing/route_set.rb:570:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/bullet-4.11.3/lib/bullet/rack.rb:10:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/etag.rb:23:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/conditionalget.rb:25:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/head.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/flash.rb:242:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:210:in `context'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/session/abstract/id.rb:205:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/cookies.rb:338:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/query_cache.rb:64:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activerecord-3.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `_run__2180803471000393099__call__3895209263182192782__callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:405:in `__run_callback'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/reloader.rb:65:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:26:in `call_app'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/logger.rb:16:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/request_id.rb:22:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/methodoverride.rb:21:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/runtime.rb:17:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/activesupport-3.2.0/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/lock.rb:15:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/static.rb:53:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/engine.rb:479:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/application.rb:220:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/content_length.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/railties-3.2.0/lib/rails/rack/log_tailer.rb:14:in `call'
/Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/rack-1.4.5/lib/rack/handler/webrick.rb:59:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
/Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'
  Rendered factures/show.pdf.prawn (2.1ms)
Completed 500 Internal Server Error in 7ms

ActionView::Template::Error (/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:290: syntax error, unexpected keyword_ensure, expecting keyword_end
/Users/nicolasvandenbogaerde/ruby/billing_apps_french_version/app/views/factures/show.pdf.prawn:292: syntax error, unexpected end-of-input, expecting keyword_end):
    287: #pdf.number_pages "<page>/<total>", [pdf.bounds.right, 0]
  actionpack (3.2.0) lib/action_view/template.rb:285:in `module_eval'
  actionpack (3.2.0) lib/action_view/template.rb:285:in `compile'
  actionpack (3.2.0) lib/action_view/template.rb:233:in `compile!'
  actionpack (3.2.0) lib/action_view/template.rb:142:in `block in render'
  activesupport (3.2.0) lib/active_support/notifications.rb:125:in `instrument'
  actionpack (3.2.0) lib/action_view/template.rb:141:in `render'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:41:in `block (2 levels) in render_template'
  actionpack (3.2.0) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.0) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:40:in `block in render_template'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:48:in `render_with_layout'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:39:in `render_template'
  actionpack (3.2.0) lib/action_view/renderer/template_renderer.rb:12:in `render'
  actionpack (3.2.0) lib/action_view/renderer/renderer.rb:36:in `render_template'
  actionpack (3.2.0) lib/action_view/renderer/renderer.rb:17:in `render'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:109:in `_render_template'
  actionpack (3.2.0) lib/action_controller/metal/streaming.rb:225:in `_render_template'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:103:in `render_to_body'
  actionpack (3.2.0) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
  actionpack (3.2.0) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:88:in `render'
  actionpack (3.2.0) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
  activesupport (3.2.0) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'
  activesupport (3.2.0) lib/active_support/core_ext/benchmark.rb:5:in `ms'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
  activerecord (3.2.0) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:39:in `render'
  actionpack (3.2.0) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (3.2.0) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (3.2.0) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.0) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.0) lib/active_support/callbacks.rb:425:in `_run__3574332544021311878__process_action__913916791702894930__callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.0) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.0) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.0) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.0) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.0) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.0) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.0) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.0) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.0) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.0) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.0) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.0) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:66:in `call'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:66:in `dispatch'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:30:in `call'
  journey (1.0.4) lib/journey/router.rb:68:in `block in call'
  journey (1.0.4) lib/journey/router.rb:56:in `each'
  journey (1.0.4) lib/journey/router.rb:56:in `call'
  actionpack (3.2.0) lib/action_dispatch/routing/route_set.rb:570:in `call'
  bullet (4.11.3) lib/bullet/rack.rb:10:in `call'
  warden (1.2.3) lib/warden/manager.rb:35:in `block in call'
  warden (1.2.3) lib/warden/manager.rb:34:in `catch'
  warden (1.2.3) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.5) lib/rack/etag.rb:23:in `call'
  rack (1.4.5) lib/rack/conditionalget.rb:25:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.5) lib/rack/session/abstract/id.rb:210:in `context'
  rack (1.4.5) lib/rack/session/abstract/id.rb:205:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.0) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:443:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `_run__2180803471000393099__call__3895209263182192782__callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.0) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.0) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/reloader.rb:65:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.0) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.0) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.5) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.5) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.0) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.5) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.0) lib/action_dispatch/middleware/static.rb:53:in `call'
  railties (3.2.0) lib/rails/engine.rb:479:in `call'
  railties (3.2.0) lib/rails/application.rb:220:in `call'
  rack (1.4.5) lib/rack/content_length.rb:14:in `call'
  railties (3.2.0) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.5) lib/rack/handler/webrick.rb:59:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/nicolasvandenbogaerde/.rvm/rubies/ruby-2.1.0/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:07:37 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  Rendered factures/show.pdf.prawn (4028.4ms)
Completed 500 Internal Server Error in 4033ms

ActionView::Template::Error (undefined local variable or method `itams' for #<#<Class:0x00000101bdbeb8>:0x00000101492260>):
    73: 		compteur_init += 1
    74:         	unless @facture.devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
    75: 			items = Array.new
    76:       itams.push(headers)
    77: 			items_temp = Array.new
    78: 			unless information.name.nil?
    79: 				information.name.each_line{ |line|
  app/views/factures/show.pdf.prawn:76:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2158264500'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2158264500'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.0ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:07:57 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (32.5ms)
Completed 500 Internal Server Error in 36ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    208: 	#totallignedevis.push([Prawn::Table::Cell.new(:text=>"HT", :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10)])
    209:      end 
    210:   if @facture.accompte == 100 
    211:    tva = [[Prawn::Table::Cell.new(
    212:     :text => "TVA 20%", :document => self, :font_style => :bold, :font_size=>10), 
    213: 	  Prawn::Table::Cell.new(
    214:     :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_style => :bold, :font_size=>10)],
  app/views/factures/show.pdf.prawn:211:in `new'
  app/views/factures/show.pdf.prawn:211:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2168838480'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2168838480'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.4ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.0ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:27:56 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.3ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (25.9ms)
Completed 500 Internal Server Error in 30ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    208: 	#totallignedevis.push([Prawn::Table::Cell.new(:text=>"HT", :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10)])
    209:      end 
    210:   if @facture.accompte == 100 
    211:    tva = [[Prawn::Table::Cell.new(
    212:     :text => "TVA 20%", :document => self, :font_style => :bold, :font_size=>10), 
    213: 	  Prawn::Table::Cell.new(
    214:     :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_style => :bold, :font_size=>10)],
  app/views/factures/show.pdf.prawn:211:in `new'
  app/views/factures/show.pdf.prawn:211:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2161317020'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2161317020'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.5ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:27:57 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.3ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (24.9ms)
Completed 500 Internal Server Error in 30ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    208: 	#totallignedevis.push([Prawn::Table::Cell.new(:text=>"HT", :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10)])
    209:      end 
    210:   if @facture.accompte == 100 
    211:    tva = [[Prawn::Table::Cell.new(
    212:     :text => "TVA 20%", :document => self, :font_style => :bold, :font_size=>10), 
    213: 	  Prawn::Table::Cell.new(
    214:     :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_style => :bold, :font_size=>10)],
  app/views/factures/show.pdf.prawn:211:in `new'
  app/views/factures/show.pdf.prawn:211:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2161317020'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2161317020'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.4ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.0ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:28:03 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (50.0ms)
Completed 500 Internal Server Error in 54ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    208: 	#totallignedevis.push([Prawn::Table::Cell.new(:text=>"HT", :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10)])
    209:      end 
    210:   if @facture.accompte == 100 
    211:    tva = [[Prawn::Table::Cell.new(
    212:     :text => "TVA 20%", :document => self, :font_style => :bold, :font_size=>10), 
    213: 	  Prawn::Table::Cell.new(
    214:     :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_style => :bold, :font_size=>10)],
  app/views/factures/show.pdf.prawn:211:in `new'
  app/views/factures/show.pdf.prawn:211:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2161317020'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2161317020'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.7ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:28:04 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.3ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.3ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.3ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (45.2ms)
Completed 500 Internal Server Error in 50ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    208: 	#totallignedevis.push([Prawn::Table::Cell.new(:text=>"HT", :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10)])
    209:      end 
    210:   if @facture.accompte == 100 
    211:    tva = [[Prawn::Table::Cell.new(
    212:     :text => "TVA 20%", :document => self, :font_style => :bold, :font_size=>10), 
    213: 	  Prawn::Table::Cell.new(
    214:     :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_style => :bold, :font_size=>10)],
  app/views/factures/show.pdf.prawn:211:in `new'
  app/views/factures/show.pdf.prawn:211:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2161317020'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2161317020'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.4ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.0ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:28:05 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.3ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (34.2ms)
Completed 500 Internal Server Error in 38ms

ActionView::Template::Error (wrong number of arguments (1 for 2..3)):
    208: 	#totallignedevis.push([Prawn::Table::Cell.new(:text=>"HT", :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10),Prawn::Table::Cell.new(:text=>@totalsumgeneral.to_s, :font_style => @facture.accompte == 100 ? :bold : :normal, :font_size => 10)])
    209:      end 
    210:   if @facture.accompte == 100 
    211:    tva = [[Prawn::Table::Cell.new(
    212:     :text => "TVA 20%", :document => self, :font_style => :bold, :font_size=>10), 
    213: 	  Prawn::Table::Cell.new(
    214:     :text => format("%.2f",@totalsumgeneral * 0.2).to_s, :document => self, :font_style => :bold, :font_size=>10)],
  app/views/factures/show.pdf.prawn:211:in `new'
  app/views/factures/show.pdf.prawn:211:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2161317020'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2161317020'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.2ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:28:39 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.2ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (54.1ms)
Completed 500 Internal Server Error in 60ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    233: 	items += total
    234: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    235:         items += total_accompte unless @facture.accompte == 100
    236: 	items += tva if @facture.devi.tva?
    237:     header_bis = Array.new
    238:     header_bis.push("Produit")
    239:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:236:in `+'
  app/views/factures/show.pdf.prawn:236:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2218809120'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2218809120'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.3ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:33:15 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (6.3ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (40.7ms)
Completed 500 Internal Server Error in 45ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    233: 	items += total
    234: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    235:         items += total_accompte unless @facture.accompte == 100
    236: 	items += tva if @facture.devi.tva?
    237:     header_bis = Array.new
    238:     header_bis.push("Produit")
    239:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:236:in `+'
  app/views/factures/show.pdf.prawn:236:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2169286200'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2169286200'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.2ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:33:33 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (26.9ms)
Completed 500 Internal Server Error in 31ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2202326580'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2202326580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.7ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:33:34 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (29.6ms)
Completed 500 Internal Server Error in 34ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2202326580'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2202326580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.2ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:33:35 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.3ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (34.3ms)
Completed 500 Internal Server Error in 39ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2202326580'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2202326580'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.4ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.6ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:33:47 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.3ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (39.4ms)
Completed 500 Internal Server Error in 44ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    234: 	items += total
    235: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    236:         items += total_accompte unless @facture.accompte == 100
    237: 	items += tva if @facture.devi.tva?
    238:     header_bis = Array.new
    239:     header_bis.push("Produit")
    240:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:237:in `+'
  app/views/factures/show.pdf.prawn:237:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2174881420'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2174881420'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (8.4ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:34:29 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.3ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.3ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (490.1ms)
Completed 200 OK in 496ms (Views: 491.7ms | ActiveRecord: 2.0ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:35:27 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.2ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (27.3ms)
Completed 500 Internal Server Error in 33ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    234: 	items += total
    235: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    236:         items += total_accompte unless @facture.accompte == 100
    237: 	items += tva if @facture.devi.tva?
    238:     header_bis = Array.new
    239:     header_bis.push("Produit")
    240:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:237:in `+'
  app/views/factures/show.pdf.prawn:237:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2212732280'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2212732280'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.1ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:37:40 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (27.5ms)
Completed 500 Internal Server Error in 32ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.2ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:37:41 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (33.1ms)
Completed 500 Internal Server Error in 38ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.3ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.8ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:37:42 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.3ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (31.8ms)
Completed 500 Internal Server Error in 36ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (5.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (14.6ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:37:42 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (31.8ms)
Completed 500 Internal Server Error in 36ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.2ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:37:42 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.3ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.3ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (28.4ms)
Completed 500 Internal Server Error in 33ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.9ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:37:42 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.3ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (37.2ms)
Completed 500 Internal Server Error in 42ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.0ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:37:42 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.3ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.3ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.4ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (34.8ms)
Completed 500 Internal Server Error in 40ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2176439180'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.2ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.6ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:38:06 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.3ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (31.3ms)
Completed 500 Internal Server Error in 36ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2212809280'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2212809280'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.2ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.7ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:38:12 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (29.7ms)
Completed 500 Internal Server Error in 34ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2212809280'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2212809280'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.5ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:38:13 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.3ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.3ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.4ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.3ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (47.3ms)
Completed 500 Internal Server Error in 53ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2212809280'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2212809280'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (7.8ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:39:10 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.2ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (28.2ms)
Completed 500 Internal Server Error in 34ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    235: 	items += total
    236: 	items += totallignedevis unless @facture.devi.lignedevis.empty?
    237:         items += total_accompte unless @facture.accompte == 100
    238: 	items += tva if @facture.devi.tva?
    239:     header_bis = Array.new
    240:     header_bis.push("Produit")
    241:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:238:in `+'
  app/views/factures/show.pdf.prawn:238:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2162103640'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2162103640'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.5ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.6ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:40:39 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.2ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (27.1ms)
Completed 500 Internal Server Error in 33ms

ActionView::Template::Error (no implicit conversion of nil into Array):
    234: 	#items += total
    235: 	#items += totallignedevis unless @facture.devi.lignedevis.empty?
    236:    #     items += total_accompte unless @facture.accompte == 100
    237: 	items += tva if @facture.devi.tva?
    238:     header_bis = Array.new
    239:     header_bis.push("Produit")
    240:     header_bis.push("Total net ‚Ç¨")
  app/views/factures/show.pdf.prawn:237:in `+'
  app/views/factures/show.pdf.prawn:237:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2212644000'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2212644000'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.8ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:41:45 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (4482.9ms)
Completed 500 Internal Server Error in 4487ms

ActionView::Template::Error (undefined local variable or method `total_accompte' for #<#<Class:0x00000101bdbeb8>:0x00000102acb680>):
    218: 	#	]]
    219: 
    220: 
    221:         total_accompte.push("HT (#{@facture.accompte})", format("%.2f",(@totalsumgeneral*@facture.accompte)/100).to_s )
    222: 	#tva = [[Prawn::Table::Cell.new(:text=>"TVA 20%", :document => self, :font_style => :bold, :font_size=>10), Prawn::Table::Cell.new(:text=>format("%.2f",(((@totalsumgeneral*@facture.accompte)/100)*20)/100).to_s, :document => self, :font_style => :bold, :font_size => 10)]]
    223: 
    224: 
  app/views/factures/show.pdf.prawn:221:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2169914100'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2169914100'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.4ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.1ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:42:55 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (480.4ms)
Completed 200 OK in 485ms (Views: 481.5ms | ActiveRecord: 1.8ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:47:39 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  Rendered factures/show.pdf.prawn (4569.2ms)
Completed 500 Internal Server Error in 4574ms

ActionView::Template::Error (undefined local variable or method `dfdsfdsfdsfs' for #<#<Class:0x00000101bdbeb8>:0x00000107ab9c00>):
    72: 	Information.all.each do |information|
    73: 		compteur_init += 1
    74:         	unless @facture.devi.informationlignes.find(:first, :conditions=>{:information_id=>information.id}).nil?
    75: dfdsfdsfdsfs
    76: 			items = Array.new
    77:       items.push(headers)
    78: 			items_temp = Array.new
  app/views/factures/show.pdf.prawn:75:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2211824500'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2211824500'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.1ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.6ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:47:52 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.3ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.3ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (487.6ms)
Completed 200 OK in 492ms (Views: 488.5ms | ActiveRecord: 2.2ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:50:14 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.2ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (495.5ms)
Completed 200 OK in 501ms (Views: 496.9ms | ActiveRecord: 1.7ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:56:07 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.2ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (500.1ms)
Completed 200 OK in 506ms (Views: 501.5ms | ActiveRecord: 2.0ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:56:32 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.1ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.3ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.3ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (506.2ms)
Completed 200 OK in 510ms (Views: 506.6ms | ActiveRecord: 2.2ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:56:54 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.3ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.3ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (487.8ms)
Completed 200 OK in 494ms (Views: 488.5ms | ActiveRecord: 2.4ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:57:23 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (484.4ms)
Completed 200 OK in 489ms (Views: 485.6ms | ActiveRecord: 1.6ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 19:59:08 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.3ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.3ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  Rendered factures/show.pdf.prawn (4670.8ms)
Completed 500 Internal Server Error in 4677ms

ActionView::Template::Error (undefined local variable or method `dqefdsfsdsf' for #<#<Class:0x00000101bdbeb8>:0x0000010141e810>):
    82: 			#end
    83: 
    84:  			@facture.devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    85: 				dqefdsfsdsf
    86:         informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price
    87: 				#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0, :text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:text=>informationligne.number, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>informationligne.unite, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :font_size=>10, :width=>0), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
    88: 				
  app/views/factures/show.pdf.prawn:85:in `block (2 levels) in _app_views_factures_show_pdf_prawn___2601126669109534190_2158028780'
  app/views/factures/show.pdf.prawn:84:in `each'
  app/views/factures/show.pdf.prawn:84:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2158028780'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2158028780'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.4ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 20:00:11 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mFacture Load (0.1ms)[0m  [1mSELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.2ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1
  [1m[36mClient Load (0.1ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.2ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11[0m
  Rendered factures/show.pdf.prawn (480.2ms)
Completed 200 OK in 484ms (Views: 481.4ms | ActiveRecord: 1.5ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 20:00:31 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
  [1m[36mFacture Load (0.3ms)[0m  [1mSELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1[0m
  [1m[35mDevi Load (0.2ms)[0m  SELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1
  [1m[36mClient Load (0.2ms)[0m  [1mSELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1[0m
  [1m[35mInformation Load (0.2ms)[0m  SELECT "informations".* FROM "informations" 
  [1m[36mInformationligne Load (0.3ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1[0m
  [1m[35mInformationligne Load (0.3ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position
  Rendered factures/show.pdf.prawn (4640.9ms)
Completed 500 Internal Server Error in 4648ms

ActionView::Template::Error (undefined local variable or method `fdfdsfdsf' for #<#<Class:0x00000101bdbeb8>:0x00000107a93898>):
    84:  			@facture.devi.informationlignes.find(:all, :conditions=>{:information_id=>information.id}, :order => "position").each{ |informationligne|
    85: 				informationligne.number.nil? && informationligne.price.nil? ? "" : @totalsumgeneral += informationligne.number * informationligne.price
    86: 				#items_temp.push((information.name.nil? ? "" : Prawn::Table::Cell.new(:width=>0, :text=>informationligne.name, :font_size=>10)), Prawn::Table::Cell.new(:text=>informationligne.number, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>informationligne.unite, :font_size=>10, :width=>0), Prawn::Table::Cell.new(:text=>format("%.2f",informationligne.price).to_s, :font_size=>10, :width=>0), (informationligne.number.nil? && informationligne.price.nil? ? "" : Prawn::Table::Cell.new(:text=>(format("%.2f",informationligne.number * informationligne.price)).to_s, :width=>0, :font_size=>10)))
    87: 			    fdfdsfdsf	
    88: 		     unless informationligne.titleinformationlignes.empty?	
    89: 			informationligne.titleinformationlignes.each{ |titleinformationligne|
    90: fdsfdsfdsfds
  app/views/factures/show.pdf.prawn:87:in `block (2 levels) in _app_views_factures_show_pdf_prawn___2601126669109534190_2211746520'
  app/views/factures/show.pdf.prawn:84:in `each'
  app/views/factures/show.pdf.prawn:84:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2211746520'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2211746520'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (6.5ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 21:08:04 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.1ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.1ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.1ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (502.3ms)
Completed 200 OK in 507ms (Views: 504.0ms | ActiveRecord: 1.3ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 21:08:58 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.1ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.1ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (4736.3ms)
Completed 500 Internal Server Error in 4741ms

ActionView::Template::Error (undefined local variable or method `ttc' for #<#<Class:0x00000101bdbeb8>:0x00000107c08548>):
    236: 		]]
    237: 	#ttc = [[Prawn::Table::Cell.new(:text=>"TTC", :document => self, :font_style => :bold, :font_size=>10), Prawn::Table::Cell.new(:text=>(format("%.2f",(((@totalsumgeneral*@facture.accompte)/100)*0.2)+((@totalsumgeneral*@facture.accompte)/100))).to_s, :document => self, :font_style => :bold, :font_size=>10)]]
    238:   #ttc = [["TTC", format("%.2f",(((@totalsumgeneral*@facture.accompte)/100)*0.2)+((@totalsumgeneral*@facture.accompte)/100)).to_s]]
    239:   tva += ttc 
    240:    else	 
    241:         #total_accompte = [[Prawn::Table::Cell.new(:text=>"HT (#{@facture.accompte}%)", :document => self, :font_style => :bold, :font_size=>10), Prawn::Table::Cell.new(:text=>(format("%.2f",(@totalsumgeneral*@facture.accompte)/100)).to_s, :document => self, :font_style => :bold, :font_size=>10)]]
    242:         total_accompte.push("HT (#{@facture.accompte})", format("%.2f",(@totalsumgeneral*@facture.accompte)/100).to_s )
  app/views/factures/show.pdf.prawn:239:in `block in _app_views_factures_show_pdf_prawn___2601126669109534190_2212550760'
  app/views/factures/show.pdf.prawn:72:in `each'
  app/views/factures/show.pdf.prawn:72:in `_app_views_factures_show_pdf_prawn___2601126669109534190_2212550760'


  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.4ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /Users/nicolasvandenbogaerde/.rvm/gems/ruby-2.1.0@billing/gems/actionpack-3.2.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (5.1ms)


Started GET "/clients/devis/factures/F0001-2014.pdf?facture_id=1" for 127.0.0.1 at 2014-09-14 21:10:06 +0200
Processing by FacturesController#show as PDF
  Parameters: {"facture_id"=>"1", "id"=>"F0001-2014"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1[0m
  [1m[35mFacture Load (0.2ms)[0m  SELECT "factures".* FROM "factures" WHERE "factures"."numfacture" = 'F0001-2014' AND "factures"."id" = 1 LIMIT 1
  [1m[36mDevi Load (0.2ms)[0m  [1mSELECT "devis".* FROM "devis" WHERE "devis"."id" = 11 LIMIT 1[0m
  [1m[35mClient Load (0.2ms)[0m  SELECT "clients".* FROM "clients" WHERE "clients"."id" = 1 LIMIT 1
  [1m[36mInformation Load (0.2ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35mInformationligne Load (0.2ms)[0m  SELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 LIMIT 1
  [1m[36mInformationligne Load (0.2ms)[0m  [1mSELECT "informationlignes".* FROM "informationlignes" WHERE "informationlignes"."devi_id" = 11 AND "informationlignes"."information_id" = 1 ORDER BY position[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 9
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 11[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 12
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 13[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "titleinformationlignes" WHERE "titleinformationlignes"."informationligne_id" = 10
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT "informations".* FROM "informations" [0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "lignedevis" WHERE "lignedevis"."devi_id" = 11
  Rendered factures/show.pdf.prawn (515.5ms)
Completed 200 OK in 521ms (Views: 516.9ms | ActiveRecord: 2.0ms)
